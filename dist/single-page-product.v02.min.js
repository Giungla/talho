(()=>{let s="oculto",r="https://xef5-44zo-gegm.b2.xano.io/api:79PnTkh_",d=new Proxy({quantity:1,product:null,selectedVariation:null},{get(a,t){switch(t){case"variationsCount":return a.product?.variations.length??0;case"hasPriceDifference":var{price:r,full_price:e}=d.prices;return r!==e;case"prices":{let{product:t,selectedVariation:e}=a;return t&&d.hasSelectedVariation?(r=t.variations.find(t=>t.id===e))?o(r.price,r.full_price):o():o()}case"BRLPrices":var{price:e,full_price:r}=d.prices;return o(c.format(e),c.format(r));case"computedFinalPrices":var{quantity:e,prices:r}=d,i=r.price*e,r=r.full_price*e;return{price:{price:i,full_price:r},currency:{price:c.format(i),full_price:c.format(r)}};case"hasSelectedVariation":return null!==a.selectedVariation;default:return Reflect.get(a,t)}},set(t,e,a){var r,i,t=Reflect.set(t,e,a);switch(e){case"quantity":q(p,String(a??1)),(l=d.product)&&d.hasSelectedVariation&&(l=t=>w("[data-wtf-price-value]",t),{BRLPrices:n,hasPriceDifference:r,computedFinalPrices:i}=d,q(l(f),n.price),q(l(h),n.full_price),q(l(y),i.currency.price),k(f,s,!r),k(h,s,!r));break;case"selectedVariation":if(m&&v&&d.product){var{selectedVariation:c,product:n}=d,o=document.createDocumentFragment();for(let t of n?.variations){var u=document.createElement("div");_(u,"text-block"),k(u,"selecionado",c===t.id),q(u,t.label),g(u,"click",()=>{var e;e=t.id,d.product?.variations.some(({id:t})=>t===e)&&(d.selectedVariation=e)}),o.appendChild(u)}m.replaceChildren(o)}Reflect.set(d,"quantity",1);break;case"product":var l=a;Reflect.set(d,"selectedVariation",l?.variations[0].id)}return t}}),t=w("[data-wtf-quantity-minus]"),e=w("[data-wtf-quantity-plus]"),p=w("[data-wtf-quantity-value]"),f=w("[data-wtf-price]"),h=w("[data-wtf-full-price]"),y=w("[data-wtf-total]"),m=w("[data-wtf-sku-list]"),v=w("[data-wtf-sku-item]"),a=w("[data-wtf-comprar]"),c=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});function w(t,e=document){return e?e.querySelector(t):null}function g(t,e,a,r){t&&t.addEventListener(e,a,r)}function q(t,e){t&&(t.textContent=e)}function _(t,...e){t&&t.classList.add(...e)}function k(t,e,a){t&&t.classList.toggle(e,a)}function i(t){return{message:t,succeeded:!1}}function n(t){return{data:t,succeeded:!0}}function o(t=0,e=0){return{price:t,full_price:e}}function u(t){t+=d.quantity,t=Math.max(1,Math.min(t,10));t!==d.quantity&&(d.quantity=t)}async function l(t){t.preventDefault();var{quantity:t,product:e,selectedVariation:a}=d;if(a&&e){t=await(async t=>{var e="Falha ao adicionar o produto";try{var a=await fetch(r+"/cart/handle",{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({item:t,operation:"add"})});return a.ok?n(await a.json()):i((await a.json())?.message??e)}catch(t){return i("[CATCH] "+e)}})({quantity:t,sku_id:a,reference_id:e.slug});if(!t.succeeded)return alert("A adição falhou");d.quantity=1,_(w("#carrinho-flutuante"),"carrinhoflutuante--visible"),localStorage.setItem("talho_cart_items",JSON.stringify(t.data))}}(async()=>{var e="Houve uma falha ao capturar o produto";try{var t=location.pathname.split("/"),a=await fetch(r+"/product/single-product-page",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({quantity:1,reference_id:t[t.length-1]})});return a.ok?n(await a.json()):i((await a.json())?.message??e)}catch(t){return i(e)}})().then(t=>{t.succeeded&&(d.product=t.data)}).then(()=>{g(e,"click",()=>u(1)),g(t,"click",()=>u(-1)),g(a,"click",l)})})();