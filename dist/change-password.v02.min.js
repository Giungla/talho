(()=>{let t="; ",o="oculto",c="__Host-Talho-AuthToken",d="mensagemdeerro",l="disabled",f="[data-wtf-wrapper]",p={preventScroll:!1};function h(e,a=document){return a?a.querySelector(e):null}function m(e,a,t,r){e&&e.addEventListener(a,t,r)}function v(a){var e=document.cookie.split(t).find(e=>{e=r(e).name;return e===a});return!!e&&r(e).value}function r(e){var[e,a]=e.split("=");return{name:e,value:a}}if(!1===v(c))b=encodeURIComponent(location.pathname),location.href="/acessos/entrar?redirect_to="+b;else{var e,a,w=h("#wf-form-update-password");if(w){for(var g of["name","method","data-name","aria-label","data-wf-page-id","data-wf-element-id","data-turnstile-sitekey"])L(w,g);var b=w.parentElement;a=["w-form"],(e=b)&&e.classList.remove(...a),w.remove(),b.insertAdjacentHTML("afterbegin",w.outerHTML)}let i=h("[data-wtf-password]"),u=h("[data-wtf-confirm-password]"),r=[{field:i,validator:function(){var e=A("wtfPassword");if(!i)return e(!1);var{hasNumber:a,hasMinLength:t,hasLowercase:r,hasUppercase:s,hasSpecialChar:n}=(e=>({hasNumber:(e=(a=>e=>e.test(a))(e))(/\d/),hasLowercase:e(/[a-z]/),hasUppercase:e(/[A-Z]/),hasMinLength:e(/.{8,}/),hasSpecialChar:e(/[!@#$%^&*()_+{}\[\]:;<>,.?\/~\\-]/)}))(i.value),o=a&&r&&s&&n&&t,a=(({hasNumber:e,hasLowercase:a,hasUppercase:t,hasMinLength:r,hasSpecialChar:s})=>{var n=(e,a)=>`Sua senha deve conter pelo menos ${e} `+a;return r?e?s?a?!t&&n(1,"letra maiúscula"):n(1,"letra minúscula"):n(1,"caractere especial"):n(1,"número"):n(8,"caracteres")})({hasNumber:a,hasLowercase:r,hasUppercase:s,hasMinLength:t,hasSpecialChar:n});U(i,a||""),S(i,o),0<(u?.value??"").length&&_(i,u)&&z();return e(o)}},{field:u,validator:z}];for(let{field:e,validator:a}of r)e&&(m(e,"blur",a),m(e,"input",()=>S(e,!0)));let s=h("#wf-form-update-password"),n=h('[type="submit"]',s);function L(e,a){e&&e.removeAttribute(a)}function C(e,a,t){e&&e.classList.toggle(a,t)}function y(e){return{message:e,succeeded:!1}}function T(e,a){if(e){var r=!a.succeeded,s=h("[data-wtf-error-update-password]",e);let t=h("[data-wtf-success-update-password]",e);s&&C(s,o,!r),t&&C(t,o,r),r?(e=s&&h("div",s))&&(e.textContent=a.message):t&&setTimeout(()=>{var e,a;e=t,a=[o],e&&e.classList.add(...a)},8e3)}}function A(a){return function(e){return[a,e]}}function S(e,a){e=e.closest(f);e&&C(e,d,!a)}function M(e,a){e&&e.focus(a)}function U(e,a){e&&(e=h("[data-wtf-field-error] div",e.closest(f)))&&(e.textContent=a)}function _(e,a){return e&&a&&e?.value===a?.value}function z(){var e=A("wtfConfirmPassword"),a=_(i,u);return U(u,a?"":"As senhas informadas não conferem"),u&&S(u,a),e(a)}L(n,l),s&&m(s,"submit",async a=>{a.preventDefault(),a.stopPropagation(),a=n,t=l,e=l,a&&a.setAttribute(t,e);var e,a=r.map(({validator:e})=>e).find(e=>!1===e().at(1));if(a){let e=h(`[data-${a().at(0).replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}]`,s);return M(e,p),setTimeout(()=>{e?.dispatchEvent(new FocusEvent("blur")),M(e,p)},0),L(n,l)}var t=await(async e=>{var a="Houve uma falha ao atualizar sua senha. Por favor, tente novamente mais tarde.";try{var t=await fetch("https://xef5-44zo-gegm.b2.xano.io/api:TJEuMepe/user/change-password",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:v(c)},body:JSON.stringify(e)});return t.ok?{data:await t.json(),succeeded:!0}:y((await t.json())?.message??a)}catch(e){return y(a)}})({password:s?.password.value,confirm_password:s?.confirm_password.value});T(s,t),L(n,l),t.succeeded&&s.reset()})}})();