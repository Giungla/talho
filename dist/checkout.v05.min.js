(()=>{let{ref:e,createApp:j}=Vue,n="",a="/",r=null,s="error",d="shipping",o="billing",l="https://xef5-44zo-gegm.b2.xano.io",h=(l,l+"/api:5lp3Lw8X"),t=l+"/api:24B7O9Aj",u={headers:{Accept:"application/json","Content-Type":"application/json"}},c={method:"POST",...u},p={AC:"Acre",AL:"Alagoas",AP:"Amapá",AM:"Amazonas",BA:"Bahia",CE:"Ceará",DF:"Distrito Federal",ES:"Espírito Santo",GO:"Goiás",MA:"Maranhão",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Pará",PB:"Paraíba",PR:"Paraná",PE:"Pernambuco",PI:"Piauí",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rondônia",RR:"Roraima",SC:"Santa Catarina",SP:"São Paulo",SE:"Sergipe",TO:"Tocantins"},i=Object.keys(p),O=[10,11],g=new WeakMap,_=new Event("input"),m="same",C="diff",y="pix",v="creditcard",b=(y,v,new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"}));function P(e){return i="[data-wtf-loader]",t=document,t=t?t.querySelector(i):r,i="oculto",e=!e,!!t&&t.classList.toggle(i,e);var i,t}function V(e,i){var t,r,s=new URL(location.protocol+"//"+location.hostname),a=new URL(e,s);for([t,r]of Object.entries(i))a.searchParams.set(t,r);return a.toString()}function f(e,i){return Object.hasOwn(e,i)}function E(e){return JSON.stringify(e)}function A(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,n)}function D(e){return e.replace(/\D+/g,n)}function S(e){return e.trim()}function N(e){return e.length}function w(e,i,t){return e?i.push(t):-1}function M(e,i){return e.includes(i)}function R(e,i){return e.test(i)}function F(...t){return{mounted(i){var e=B(i,"input",e=>{e.isTrusted&&((e=e.target).value=t.reduce((e,i)=>i(e),e.value??n),i.dispatchEvent(_))});g.set(i,e)},unmounted:G}}function k(e,i,t){return{field:e,valid:i,...t&&{ignoreIf:t}}}function H(e){return{message:e,succeeded:!1}}function I(e){return{data:e,succeeded:!0}}function B(e,i,t,r){if(e)return e.addEventListener(i,t,r),()=>e.removeEventListener(i,t,r)}async function T({cep:e,deliveryMode:i}){var t="Não foi possível encontrar o endereço";if(8!==(e=D(e)).length)return H(t);try{var r=await fetch(l+`/api:jyidAW68/cepaddress/${e}/checkout`,{...c,credentials:"include",body:E({deliveryMode:i})});return r.ok?I(await r.json()):H((await r.json())?.message??t)}catch(e){return H(t)}}let G=e=>{var i=g.get(e);i&&(i(),g.delete(e))};j({name:"TalhoCheckoutApp",setup(){return{customerCPF:e(n),customerMail:e(n),customerPhone:e(n),customerBirthdate:e(n),customerCreditCardCVV:e(n),customerCreditCardDate:e(n),customerCreditCardNumber:e(n),customerCreditCardHolder:e(n),billingCEP:e(n),billingAddress:e(n),billingNumber:e(n),billingComplement:e(n),billingNeighborhood:e(n),billingCity:e(n),billingState:e(n),shippingRecipient:e(n),shippingCEP:e(n),shippingAddress:e(n),shippingNumber:e(n),shippingComplement:e(n),shippingNeighborhood:e(n),shippingCity:e(n),shippingState:e(n),couponCode:e(n),customerMailElement:e(r),customerCPFElement:e(r),customerPhoneElement:e(r),customerBirthdateElement:e(r),paymentMethodMessageElement:e(r),customerCreditCardCVVElement:e(r),customerCreditCardDateElement:e(r),customerCreditCardNumberElement:e(r),customerCreditCardHolderElement:e(r),billingCEPElement:e(r),billingAddressElement:e(r),billingNumberElement:e(r),billingNeighborhoodElement:e(r),billingCityElement:e(r),billingStateElement:e(r),deliveryPlaceMessageElement:e(r),shippingRecipientElement:e(r),shippingCEPElement:e(r),shippingAddressElement:e(r),shippingNumberElement:e(r),shippingNeighborhoodElement:e(r),shippingCityElement:e(r),shippingStateElement:e(r),deliveryDateMessageElement:e(r),deliveryHourMessageElement:e(r),installmentsMessageElement:e(r),couponCodeElement:e(r),deliveryPlaceAddressErrorMessage:e(r),deliveryBillingAddressErrorMessage:e(r),deliveryShippingAddressErrorMessage:e(r)}},data(){return{hasPendingPayment:!1,isSubmitted:!1,productlist:r,visitedFields:[],selectedPayment:r,availablePayments:[{label:"Cartão de crédito",method:v},{label:"PIX",method:y}],deliveryPlace:r,deliveryPlaces:[{token:m,label:"Mesmo endereço de cobrança do cartão"},{token:C,label:"Entregar em um endereço diferente"}],installment:r,selectedInstallment:r,isCouponPending:!1,coupon:r,isPagSeguroLoaded:!1,deliveryDate:r,deliveryDates:r,deliveryHour:r,deliveryHours:r,deliveryPrice:r}},created(){this.refreshCart().then(()=>P(!1)),window.addEventListener("storage",e=>{"talho_cart_items"===e.key&&this.refreshCart()})},methods:{async getCart(){var i="Falha ao capturar os produtos";try{var e=await fetch("https://xef5-44zo-gegm.b2.xano.io/api:79PnTkh_/cart/get",{...u,credentials:"include"});return e.ok?I(await e.json()):H((await e.json())?.message??i)}catch(e){return H(i)}},async refreshCart(){return this.getCart().then(e=>{e.succeeded&&(0===e.data.items.length?location.href=V("/",{reason:"empty_cart"}):this.productlist=e.data)})},async getInstallments(){var i="Falha ao capturar o parcelamento";try{var e=await fetch(h+"/calculatefees",{...c,cache:"force-cache",credentials:"include",body:E({amount:this.getOrderPrice,cardBin:this.customerCreditCardNumber.replace(/\D+/g,n).slice(0,8)})});return e.ok?I(await e.json()):H((await e.json())?.message??i)}catch(e){return H(i)}},async refreshInstallments(){var e;this.isCreditCard&&(this.installment=r,this.selectedInstallment=r,(e=await this.getInstallments()).succeeded)&&(this.installment=e.data)},setSelectedInstallmentsCount(e){var i,t;this.selectedInstallment!==e&&(this.selectedInstallment=(i=1,t=2,Math.max(i,Math.min(t,e))))},setSelectedPaymentMethod(e){this.selectedPayment!==e&&(this.hasDeliveryDates||this.handleDeliveryDates(),e!==v?this.clearCreditCardData():this.isPagSeguroLoaded||this.loadPagSeguro(),this.selectedPayment=e)},setVisitedField(e){return w(!M(this.visitedFields,e),this.visitedFields,e)},hasVisitRegistry(e){return M(this.visitedFields,e)},async handlePayment(e){if(e.preventDefault(),!this.hasPendingPayment)if(this.triggerValidations(),this.isSubmitted){let e=this.firstInvalidField;var i,t;e?(i=e.field,t={block:"center",behavior:"smooth"},i.scrollIntoView(t),"INPUT"===e.field.tagName&&setTimeout(()=>e.field.focus(),500)):(this.hasPendingPayment=P(!0),(i=await(0,{pix:this.handleProcessPIX,creditcard:this.handleProcessCreditCard,error:async()=>H("Houve uma falha no envio de seu pedido")}[this.selectedPayment??s])?.()).succeeded?(t=this.isCreditCard?"confirmacao-do-pedido":"pix",location.href=V(["/pagamento",t].join(a),{order:i.data.transactionid})):(this.hasPendingPayment=!P(!1),alert("Pagamento falhou")))}else this.isSubmitted=!0,Vue.nextTick(()=>this.handlePayment(e))},async handleProcessPIX(){var i="Falha ao gerar o pedido";try{var e=await fetch(h+"/process_pix",{...c,credentials:"include",body:E({...this.getOrderBaseData,customer:{...this.getParsedCustomer,...this.getParsedAddresses}})});return e.ok?I(await e.json()):H((await e.json())?.message??i)}catch(e){return H(i)}},async handleProcessCreditCard(){var t="Falha ao gerar o pedido";try{let i=this.selectedInstallment;var e=await fetch(h+"/process_creditcard",{...c,credentials:"include",body:E({...this.getOrderBaseData,customer:{...this.getParsedCustomer,...this.getParsedAddresses},is_same_address:this.isSameAddress,credit_card_info:{holderName:this.customerCreditCardHolder,creditCardToken:this.getCreditCardToken.encryptedCard??n,numberOfPayments:i,installmentValue:this.installment?.find(({installments:e})=>e===i)?.installment_value??0}})});return e.ok?I(await e.json()):H((await e.json())?.message??t)}catch(e){return H(t)}},triggerValidations(){var e;for({field:e}of this.notIgnoredFields)e?.dispatchEvent(new Event("blur"))},feedAddress(e,{uf:i,bairro:t,logradouro:r,localidade:s}){e===o?(this.billingAddress=r,this.billingNeighborhood=t,this.billingCity=s,this.billingState=i):(this.shippingAddress=r,this.shippingNeighborhood=t,this.shippingCity=s,this.shippingState=i)},setDeliveryPlace(e){this.deliveryPlace!==e&&(e===m&&/^\d{5}\-\d{3}$/.test(this.billingCEP)&&this.isBillingAddressGroupValid?T({cep:this.billingCEP,deliveryMode:!0}).then(e=>{e.succeeded||(this.deliveryPlaceAddressErrorMessage=e.message)}):this.deliveryPlaceAddressErrorMessage=r,this.deliveryPlace=e)},async captureAddress(e,i,t){if(!R(/^\d{5}-\d{3}$/,i)||i===t)return!1;t=e+"CEP",i=await T({cep:i,deliveryMode:e===d});if(!i.succeeded)return this[t]=n,this.setVisitedField(t),e===d&&(this.deliveryShippingAddressErrorMessage=i.message),e===o&&(this.deliveryBillingAddressErrorMessage=i.message),!1;switch(e){case d:this.deliveryShippingAddressErrorMessage=r;break;case o:this.deliveryBillingAddressErrorMessage=r}return this.feedAddress(e,i.data),!0},async captureCoupon(){var i="Falha ao capturar o cupom indicado";try{var e=await fetch(h+"/get_coupon",{...c,credentials:"include",body:E({verify_amount:!0,coupon_code:this.couponCode,cpf:this.customerCPF&&r})});return e.ok?I(await e.json()):H((await e.json())?.message??i)}catch(e){return H(i)}},async handleSearchCoupon(){var e;this.isCouponPending||(this.isCouponPending=!0,e=await this.captureCoupon(),this.isCouponPending=!1,e.succeeded?this.coupon=e.data:this.coupon={error:!0,message:e.message})},handleRemoveCoupon(){this.coupon=r,this.couponCode=n},loadPagSeguro(){var e=document.createElement("script");e.async=!0,e.src="https://assets.pagseguro.com.br/checkout-sdk-js/rc/dist/browser/pagseguro.min.js",e.onload=()=>{this.isPagSeguroLoaded=!0},document.head.appendChild(e)},clearCreditCardData(){this.customerCreditCardHolder=n,this.customerCreditCardNumber=n,this.customerCreditCardDate=n,this.customerCreditCardCVV=n},async captureAvailableDeliveryDates(){var i="Falha ao capturar as datas";try{var e=await fetch(t+"/delivery_dates",{cache:"force-cache",credentials:"include"});return e.ok?I(await e.json()):H((await e.json())?.message??i)}catch(e){return H(i)}},async handleDeliveryDates(){var e=await this.captureAvailableDeliveryDates();this.deliveryDates=e.succeeded?e.data:r},setDeliveryDate(i){var e=this.deliveryDates?.find(e=>e.shiftDays===i)?.shiftDays;"number"==typeof e&&this.deliveryDate!==e&&(this.deliveryDate=e,this.deliveryHour=r,this.deliveryPrice=r,this.handleDeliveryHours())},async captureAvailableDeliveryHours(){var i="Falha ao capturar os horários";try{var e=await fetch(t+"/delivery_hours?shiftDays="+this.deliveryDate,{cache:"force-cache",credentials:"include"});return e.ok?I(await e.json()):H((await e.json())?.message??i)}catch(e){return H(i)}},async handleDeliveryHours(){var e=await this.captureAvailableDeliveryHours();e.succeeded&&(this.deliveryHours=e.data)},setDeliveryHour(i){this.deliveryHour!==i&&0!==this.deliveryHours?.periods_count&&this.deliveryHours?.hours.some(({hour:e})=>e===i)&&(this.deliveryHour=i)},async captureDeliveryQuotation(e){var i="Falha ao gerar uma cotação";try{var t=await fetch(l+"/api:i6etHc7G/site/checkout-delivery",{...c,credentials:"include",signal:e.signal,body:E(this.quotationPayload)});return t.ok?I(await t.json()):H((await t.json())?.message??i)}catch(e){return H(i)}}},computed:{hasSelectedPaymentMethod(){return this.selectedPayment!==r},isCreditCard(){return this.selectedPayment===v},getOrderSubtotal(){return this.productlist?.order_price??0},getOrderSubtotalFormatted(){return b.format(this.getOrderSubtotal)},getOrderPrice(){return[this.getOrderSubtotal,this.getShippingPrice,this.getCouponDiscountPrice].reduce((e,i)=>e+i,0)},getOrderPriceFormatted(){return b.format(this.getOrderPrice)},getShippingPrice(){return this.deliveryPrice===r?0:this.deliveryPrice/100},getShippingPriceFormatted(){return b.format(this.getShippingPrice)},getCouponDiscountPrice(){var e,i,t;return this.hasNullCoupon||this.hasInvalidCoupon?0:({value:e,is_percentage:i}=this.coupon,t=this.getParsedPriceForApplyDiscount,i?Math.min(e/100,1)*(-1*t):-1*Math.min(t,e))},getCouponDiscountPriceFormatted(){return b.format(this.getCouponDiscountPrice)},getParsedPriceForApplyDiscount(){return this.hasNullCoupon||this.hasInvalidCoupon?0:{subtotal:this.getOrderSubtotal,shipping:this.getShippingPrice,product_id:0}[this.coupon.cupom_type]},getParsedProducts(){var e=this.productlist?.items;return e?e.map(({name:e,imageUrl:i,quantity:t,price:r})=>({name:e,image:i,quantity:t,price:b.format(r),finalPrice:b.format(r*t)})):[]},isPersonalDataValid(){return!this.isSubmitted||[this.customerMailValidation.valid,this.customerBirthdateValidation.valid,this.customerCPFValidation.valid,this.customerPhoneValidation.valid].every(Boolean)},customerMailValidation(){return k(this.customerMailElement,!this.hasVisitRegistry("customerMail")||R(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,this.customerMail))},customerBirthdateValidation(){var e=this.customerBirthdate;return k(this.customerBirthdateElement,!this.hasVisitRegistry("customerBirthdate")||R(/^\d{2}\/\d{2}\/\d{4}$/,e)&&(e=>{var[e,i,t]=e.split(a);return"Invalid Date"!==new Date(t+`-${i}-${e}T00:00:00`).toString()})(e))},customerCPFValidation(){var i,e=this.customerCPF;return k(this.customerCPFElement,!this.hasVisitRegistry("customerCPF")||R(/^\d{3}\.\d{3}\.\d{3}-\d{2}$/,this.customerCPF)&&11===(i=D(i=e)).length&&!/^(\d)\1{10}$/.test(i)&&(e=O.map((r,e)=>{e=11-[...i.slice(0,e?10:9)].map(Number).reduce((e,i,t)=>e+i*(r-t),0)%11;return 9<e?0:e}),i.endsWith(e.join(n))))},customerPhoneValidation(){return k(this.customerPhoneElement,!this.hasVisitRegistry("customerPhone")||R(/\(\d{2}\)\s\d{4,5}-\d{4}/,this.customerPhone))},paymentMethodValidation(){return k(this.paymentMethodMessageElement,this.selectedPayment!==r)},customerCreditCardHolderValidation(){return k(this.customerCreditCardHolderElement,!this.hasVisitRegistry("customerCreditCardHolder")||/^(\w{2,})(\s+(\w+))+$/.test(A(S(this.customerCreditCardHolder).replace(/\s{2,}/g," "))),!this.isCreditCard)},customerCreditCardNumberValidation(){return k(this.customerCreditCardNumberElement,!this.hasVisitRegistry("customerCreditCardNumber")||R(/^(\d{4})(\s\d{4}){2}(\s\d{3,4})$/,S(this.customerCreditCardNumber)),!this.isCreditCard)},customerCreditCardDateValidation(){var e,i=this.customerCreditCardDate;return k(this.customerCreditCardDateElement,!this.hasVisitRegistry("customerCreditCardDate")||R(/^(1[012]|0[1-9])\/\d{2}$/,i)&&2===(i=(i=i).split(a)).length&&([i,e]=i,i=parseInt(i,10),e=parseInt(e,10),!(isNaN(i)||isNaN(e)||i<1||12<i))&&new Date<new Date(2e3+(e<100?e:0),i,0,23,59,59),!this.isCreditCard)},customerCreditCardCVVValidation(){return k(this.customerCreditCardCVVElement,!this.hasVisitRegistry("customerCreditCardCVV")||R(/^\d{3}$/,this.customerCreditCardCVV),!this.isCreditCard)},isCreditCardGroupValid(){return[this.customerCreditCardHolderValidation.valid,this.customerCreditCardNumberValidation.valid,this.customerCreditCardDateValidation.valid,this.customerCreditCardCVVValidation.valid].every(Boolean)},billingCEPValidation(){return k(this.billingCEPElement,!this.hasVisitRegistry("billingCEP")||R(/^\d{5}-\d{3}$/,this.billingCEP),!this.isCreditCard)},billingAddressValidation(){return k(this.billingAddressElement,!this.hasVisitRegistry("billingAddress")||2<N(S(this.billingAddress)),!this.isCreditCard)},billingNumberValidation(){return k(this.billingNumberElement,!this.hasVisitRegistry("billingNumber")||0<N(this.billingNumber),!this.isCreditCard)},billingNeighborhoodValidation(){return k(this.billingNeighborhoodElement,!this.hasVisitRegistry("billingNeighborhood")||0<N(this.billingNeighborhood),!this.isCreditCard)},billingCityValidation(){return k(this.billingCityElement,!this.hasVisitRegistry("billingCity")||2<N(this.billingCity),!this.isCreditCard)},billingStateValidation(){return k(this.billingStateElement,!this.hasVisitRegistry("billingState")||M(i,this.billingState),!this.isCreditCard)},isBillingAddressGroupValid(){return this.deliveryBillingAddressErrorMessage===r&&[this.billingCEPValidation,this.billingAddressValidation,this.billingNumberValidation,this.billingNeighborhoodValidation,this.billingCityValidation,this.billingStateValidation].every(e=>e.valid)},deliveryPlaceValidation(){return k(this.deliveryPlaceMessageElement,this.hasSelectedAddress&&this.deliveryPlaceAddressErrorMessage===r,!this.isCreditCard)},shippingRecipientValidation(){return k(this.shippingRecipientElement,!this.hasVisitRegistry("shippingRecipient")||R(/^(\w{2,})(\s+(\w+))+$/,A(S(this.shippingRecipient)).replace(/\s{2,}/g," ")),!this.shouldValidateShippingAddress)},shippingCEPValidation(){return k(this.shippingCEPElement,!this.hasVisitRegistry("shippingCEP")||R(/^\d{5}-\d{3}$/,this.shippingCEP),!this.shouldValidateShippingAddress)},shippingAddressValidation(){return k(this.shippingAddressElement,!this.hasVisitRegistry("shippingAddress")||2<N(S(this.shippingAddress)),!this.shouldValidateShippingAddress)},shippingNumberValidation(){return k(this.shippingNumberElement,!this.hasVisitRegistry("shippingNumber")||0<N(S(this.shippingNumber)),!this.shouldValidateShippingAddress)},shippingNeighborhoodValidation(){return k(this.shippingNeighborhoodElement,!this.hasVisitRegistry("shippingNeighborhood")||3<N(S(this.shippingNeighborhood)),!this.shouldValidateShippingAddress)},shippingCityValidation(){return k(this.shippingCityElement,!this.hasVisitRegistry("shippingCity")||2<N(S(this.shippingCity)),!this.shouldValidateShippingAddress)},shippingStateValidation(){return k(this.shippingStateElement,!this.hasVisitRegistry("shippingState")||M(i,this.shippingState),!this.shouldValidateShippingAddress)},isShippingAddressGroupValid(){return this.deliveryShippingAddressErrorMessage===r&&[this.shippingCEPValidation,this.shippingAddressValidation,this.shippingNumberValidation,this.shippingNeighborhoodValidation,this.shippingCityValidation,this.shippingStateValidation].every(e=>e.valid)},deliveryDatesGroupValidation(){return k(this.deliveryDateMessageElement,this.deliveryDate!==r,!this.paymentMethodValidation.valid)},deliveryHoursGroupValidation(){return k(this.deliveryHourMessageElement,this.deliveryHour!==r,!this.deliveryDatesGroupValidation.valid)},installmentGroupValidation(){return k(this.installmentsMessageElement,this.selectedInstallment!==r,!this.isCreditCard||!this.paymentMethodValidation.valid)},notIgnoredFields(){return[this.customerMailValidation,this.customerBirthdateValidation,this.customerCPFValidation,this.customerPhoneValidation,this.paymentMethodValidation,this.customerCreditCardHolderValidation,this.customerCreditCardNumberValidation,this.customerCreditCardDateValidation,this.customerCreditCardCVVValidation,this.billingCEPValidation,this.billingAddressValidation,this.billingNumberValidation,this.billingNeighborhoodValidation,this.billingCityValidation,this.billingStateValidation,this.deliveryPlaceValidation,this.shippingRecipientValidation,this.shippingCEPValidation,this.shippingAddressValidation,this.shippingNumberValidation,this.shippingNeighborhoodValidation,this.shippingCityValidation,this.shippingStateValidation,this.deliveryDatesGroupValidation,this.deliveryHoursGroupValidation,this.installmentGroupValidation].filter(({ignoreIf:e})=>M([!1,void 0],e))},firstInvalidField(){return this.notIgnoredFields.find(({valid:e})=>!e)??r},hasSelectedAddress(){return this.deliveryPlace!==r},isSameAddress(){return this.deliveryPlace===m},isDiffAddress(){return this.deliveryPlace===C},shouldValidateShippingAddress(){return!this.isCreditCard||this.showShippingAddressSelector&&!this.isSameAddress},showShippingAddressSelector(){return!this.isCreditCard||(this.isCreditCard,this.hasSelectedAddress)},getParsedAddresses(){var e=e=>p[e]??n,i=e=>S(e).replace(/-+/g,n)||"N/A",t={zipPostalCode:this.shippingCEP,street:this.shippingAddress,number:this.shippingNumber,complement:i(this.shippingComplement),neighbourhood:this.shippingNeighborhood,city:this.shippingCity,state:e(this.shippingState)},i={zipPostalCode:this.billingCEP,street:this.billingAddress,number:this.billingNumber,complement:i(this.billingComplement),neighbourhood:this.billingNeighborhood,city:this.billingCity,state:e(this.billingState)};return this.isCreditCard?{billingaddress:i,shippingaddress:this.isSameAddress?i:t}:{shippingaddress:t,billingaddress:t}},getParsedCustomer(){return{name:this.isCreditCard?this.customerCreditCardHolder:this.shippingRecipient,cpf:this.customerCPF,email:this.customerMail,birthDate:this.customerBirthdate,phone:this.customerPhone}},getOrderBaseData(){return{user_id:r,coupon_code:this.hasInvalidCoupon||this.hasNullCoupon?r:this.coupon?.code,delivery:{delivery_hour:this.deliveryHour,delivery_date:this.deliveryDate}}},showInstallmentSection(){return this.isCreditCard&&0<N(this.installment??[])},getParsedInstallments(){var e=this.installment;return e?e.map(({installments:e,installment_value:i})=>({installments:e,installment_value:b.format(i)})):[]},hasNullCoupon(){return this.coupon===r},hasAppliedCoupon(){return f(this.coupon??{},"cupom_type")},hasInvalidCoupon(){return f(this.coupon??{},s)},isCouponCodeValid(){var e=this.couponCode;return 4<N(S(e))&&!R(/[^A-Z\d]/,e)},getCreditCardToken(){var e,i;return this.isPagSeguroLoaded?([e,i]=this.customerCreditCardDate.split(a),window.PagSeguro.encryptCard({expMonth:e,expYear:"20".concat(i),holder:this.customerCreditCardHolder,securityCode:this.customerCreditCardCVV,number:D(this.customerCreditCardNumber),publicKey:"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxPIKWT6ettkFKqSyfoUpH/550Q8YQtRf7ZYJJbV3U7/4HBtamJT9If4wiLs2YlEfwTPWlB5Cl0jGmkBSQkjIDF+QTOSJviZYKgiuR7Bnavgt+idkcZsd5hM1I6u1uwOJJE3wSSXg+Nw70GZCeg7A6bmq9tOu1827En/ZFKWBXqv9Upc7q/Y6N0XMzZ3CL1j6ZlhnCalQzzaV9whijxK22lIL78gLEUcnmEO7CUX6DyfcdlA13MM4X538k2eYUosdnKafCEDNVcT+PPUeUdJZ0CpBWA9c/XtO0BIbTXHTsDuDlX0r7BF0vMFJMi0D9lkFCavY/kjZEQYhnXMtrWlUWwIDAQAB"})):{errors:[],hasErrors:!1,encryptedCard:r}},hasDeliveryDates(){var e=this.deliveryDates;return Array.isArray(e)&&0<N(e)},getParsedDeliveryDates(){if(!this.hasDeliveryDates)return[];let r=this.deliveryDate;return this.deliveryDates.map(({date:e,shiftDays:i,deliveryPeriod:t})=>{e=new Date(e+"T00:00:00");return{shiftDays:i,deliveryPeriod:t,selected:r===i,date:e.toLocaleDateString("pt-BR",{month:"long",day:"numeric",weekday:"long"})}})},hasDeliveryHour(){return this.deliveryHours!==r&&0<N(this.deliveryHours.hours)},getParsedDeliveryHours(){return this.deliveryDate!==r&&this.hasDeliveryHour?this.deliveryHours.hours.map(({label:e,hour:i})=>({hour:i,label:e})):[]},quotationPayload(){var e,i=this.deliveryHours?.hours.find(({hour:e})=>e===this.deliveryHour);return!(!i||(e=this.getParsedAddresses.shippingaddress.zipPostalCode,!/^\d{5}\-\d{3}$/.test(e))||this.deliveryDate===r)&&{cep:e,shiftDays:this.deliveryDate,selectedHour:i.hour,hourToken:i.validator}}},watch:{billingCEP(e,i){this.captureAddress(o,e,i).then(e=>{e&&(this.deliveryPlaceAddressErrorMessage=r,this.deliveryPlace===m)&&(this.deliveryPlace=r)})},shippingCEP(e,i){this.captureAddress(d,e,i)},getOrderPrice:{immediate:!0,handler:function(){this.refreshInstallments()}},getCreditCardToken(e){e.hasErrors||this.refreshInstallments()},quotationPayload(i,t,r){if(i){var s,a,n,{cep:i,shiftDays:d,hourToken:o,selectedHour:l}=i;let e=new AbortController;return t?({shiftDays:t,selectedHour:s,hourToken:a,cep:n}=t,d!==t||l!==s||o!==a||i!==n?(this.captureDeliveryQuotation(e).then(e=>{e.succeeded&&(this.deliveryPrice=e.data.total)}),r(()=>e.abort())):void 0):(this.captureDeliveryQuotation(e).then(e=>{e.succeeded&&(this.deliveryPrice=e.data.total)}),r(()=>e.abort()))}}},directives:{maskDate:F(D,function(e){return e.replace(/^(\d{0,2})(\d{0,2})(\d{0,4})/,(e,i,t,r)=>[i,t,r].filter(Boolean).join(a))}),maskCpf:F(D,function(e){return e.replace(/^(\d{0,3})(\d{0,3})(\d{0,3})(\d{0,2})/,(e,i,t,r,s)=>{var a=[];return w(i,a,""+i),w(t,a,"."+t),w(r,a,"."+r),w(s,a,"-"+s),a.join(n)})}),maskPhone:F(D,function(e){var i=(e,i,t,r)=>{var s=[];return w(i,s,"("+i),w(t,s,") "+t),w(r,s,"-"+r),s.join(n)};return e.length<11?e.replace(/^(\d{0,2})(\d{0,4})(\d{0,4})/,i):e.replace(/^(\d{0,2})(\d{0,5})(\d{0,4})/,i)}),maskCreditCard:F(D,function(e){return e.replace(/^(\d{0,4})(\d{0,4})(\d{0,4})(\d{0,4})/,(e,i,t,r,s)=>{var a,n=[];for(a of[i,t,r,s])w(a,n,a);return n.join(" ")})}),maskCreditCardDate:F(D,function(e){return e.replace(/^(\d{0,2})(\d{0,2})/,(e,i,t)=>{var r,s=[];for(r of[i,t])w(r,s,r);return s.join(a)})}),maskNumberOnly:F(D),maskCep:F(D,function(e){return e.replace(/^(\d{0,5})(\d{0,3})/,(e,i,t)=>{var r,s=[];for(r of[i,t])w(r,s,r);return s.join("-")})}),upperCase:F(function(e){return e.toUpperCase()}),normalize:F(A),visitedField:{mounted(i,{value:t,instance:r}){var e=B(i,"blur",e=>{r.setVisitedField(t),g.delete(i)},{once:!0});g.set(i,e)},unmounted:G}}}).mount("#fechamentodopedido")})();