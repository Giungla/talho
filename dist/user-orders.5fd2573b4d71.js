"use strict";(()=>{var Se=401,P="__Host-Talho-AuthToken",j="__Host-Talho-Session-Cookie",$="X-Talho-Session";function ye(e){!e||e.status!==Se||(location.href=z("/acessos/entrar",{redirect_to:encodeURIComponent(location.pathname)}))}function ie(e){let t=e?.headers.get($);t&&B(j,t,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+V(90))})}function T(e){return ie(this),ye(this),{message:e,succeeded:!1}}function C(e){return ie(this),{data:e,succeeded:!0}}function O(e=[],t="GET"){let n=new Headers({Accept:"application/json","Content-Type":"application/json"});for(let[S,q]of e)n.set(S,q);let u=y(j);u&&n.set($,u);let f=y(P);return f&&n.set("Authorization",f),{method:t,headers:n}}var b=null,E="oculto";function J(){return!!y(P)}function s(e,t=document){return t?t.querySelector(e):b}function v(e,t,n,u){if(e)return e.addEventListener(t,n,u),()=>e.removeEventListener(t,n,u)}function I(e,t,n){e&&e.setAttribute(t,n)}function L(e,t){e&&e.removeAttribute(t)}function k(e,...t){e&&e.classList.add(...t)}function R(e,...t){e&&e.classList.remove(...t)}function H(e,t,n){return e?e.classList.toggle(t,n):!1}function l(e,t){e&&(e.textContent=typeof t=="string"?t:t.toString())}function z(e,t={}){let n=new URL(`${location.protocol}//${location.hostname}`),u=new URL(e,n);for(let[f,S]of Object.entries(t))u.searchParams.set(f,S);return u.toString()}function w(e){return JSON.stringify(e)}function h(e){return e.length}var X="; ";function y(e){let t=document.cookie.split(X).find(n=>{let{name:u}=Y(n);return u===e});return t?Y(t).value:!1}function Y(e){let[t,n]=e.split("=");return{name:t,value:n}}function B(e,t,n={}){if(h(e)===0)throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof t)||h(t.toString())===0)throw new Error("'setCookie' should receive a valid cookie value");let u=[`${e}=${t}`];n?.expires&&n?.expires instanceof Date&&u.push("expires="+n.expires.toUTCString()),n.maxAge&&u.push(`maxAge=${n.maxAge}`),n?.sameSite&&typeof n?.sameSite=="string"&&u.push(`SameSite=${n?.sameSite}`),n?.path&&u.push(`path=${n?.path}`),n?.domain&&u.push(`domain=${n?.path}`),n?.httpOnly&&u.push("HttpOnly"),n?.secure&&u.push("Secure");let f=u.join(X);return document.cookie=f,f}function V(e){return 86400*1e3*e}var D=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});var W="talho_cart_items";var Z={AC:"Acre",AL:"Alagoas",AP:"Amap\xE1",AM:"Amazonas",BA:"Bahia",CE:"Cear\xE1",DF:"Distrito Federal",ES:"Esp\xEDrito Santo",GO:"Goi\xE1s",MA:"Maranh\xE3o",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Par\xE1",PB:"Para\xEDba",PR:"Paran\xE1",PE:"Pernambuco",PI:"Piau\xED",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rond\xF4nia",RR:"Roraima",SC:"Santa Catarina",SP:"S\xE3o Paulo",SE:"Sergipe",TO:"Tocantins"},Re=Object.keys(Z),he=Object.values(Z);var F="https://xef5-44zo-gegm.b2.xano.io";(function(){let e="disabled",t="carrinhoflutuante--visible",n=`${F}/api:79PnTkh_`,u=new Set;function f(...r){return Math.max(...r)}if(!J()){location.href="/acessos/entrar";return}let S=new Proxy({list:[]},{get(r,o){let a=h(r.list);switch(o){case"hasOrders":return a>0;case"ordersCount":return a;default:return r[o]}},set(r,o,a){let i=Reflect.set(r,o,a);if(!i)return i;switch(o){case"list":fe();break}return!0}});async function q(){let r="Falha ao buscar os pedidos";try{let o=await fetch(`${F}/api:TJEuMepe/user/orders`,{...O()});if(!o.ok){let i=await o.json();return T.call(o,i?.message??r)}let a=await o.json();return C.call(o,a)}catch{return T(r)}}async function ue({comment:r,rating:o,product_id:a}){let i="Falha ao gerar a avalia\xE7\xE3o, tente novamente mais tarde.";try{let c=await fetch(`${F}/api:9ixgU7Er/ratings/${a}/create`,{...O([],"POST"),body:w({rating:o,comment:r})});if(!c.ok){let m=await c.json();return T.call(c,m?.message??i)}let _=await c.json();return C.call(c,_)}catch{return T(i)}}async function ce(r){let o="Falha ao adicionar o produto";try{let a=await fetch(`${n}/cart/handle`,{...O([],"POST"),body:w({item:r,operation:"add"})});if(!a.ok){let c=await a.json();return T.call(a,c?.message??o)}let i=await a.json();return C.call(a,i)}catch{return T(`[CATCH] ${o}`)}}function x(r,...o){r&&r.replaceChildren(...o.filter(Boolean))}function A(r){if(r)return r.remove()}let de=s("[data-wtf-has-no-orders]"),Q=s("[data-wtf-order-template]"),M=s("[data-wtf-orders-container]"),K=s("[data-wtf-product-item]",M),U=s("[data-wtf-evaluated]"),ee=s("[data-wtf-not-rated]"),te=s("[data-wtf-evaluation-form]");for(let r of[U,ee,te,K])A(r);function le(){return document.createDocumentFragment()}async function pe({sku_id:r,slug:o}){if(u.has(o))return;u.add(o);let a=await ce({sku_id:r,quantity:1,reference_id:o});if(!a.succeeded){u.delete(o);return}k(s("#carrinho-flutuante"),t),localStorage.setItem(W,w(a.data)),u.delete(o)}function fe(){let{list:r,hasOrders:o}=S;if(!M||!Q||!K)return;H(de,E,o),H(M,E,!o);let a=le();for(let i of r){let c=Q.cloneNode(!0);l(s("[data-wtf-order-total]",c),i.total),l(s("[data-wtf-order-status]",c),i.status),l(s("[data-wtf-created-at]",c),i.created_at),l(s("[data-wtf-payment-method]",c),i.payment_method),l(s("[data-wtf-transaction-id]",c),i.transaction_id);let _=s("[data-wtf-product-list]",c);for(let{name:m,slug:p,product_id:N,sku_id:Te,quantity:Ae,unit_price:oe,image:xe,review:G,has_stock:ge}of i.order_items){let g=K.cloneNode(!0),ne=s("[data-wtf-review-area]",g);I(s("[data-wtf-product-anchor]",g),"href",`/produtos/${p}`);let ae=s("[data-wtf-buy-again-cta]",g);if(ge?v(ae,"click",()=>pe({sku_id:Te,slug:p})):A(ae),l(s("[data-wtf-product-name]",g),m),l(s("[data-wtf-product-price]",g),D.format(oe/100)),l(s("[data-wtf-product-subtotal]",g),D.format(oe*Ae/100)),G===void 0){let d=ee?.cloneNode(!0)??b,se=te?.cloneNode(!0)??b;R(d,E),i.pago?(v(s("[data-wtf-not-rated-cta]",d),"click",()=>{me(N,d,se)},{once:!0}),A(s("[data-wtf-not-rated-unpaid]",d))):(A(s("[data-wtf-not-rated-paid]",d)),A(s("[data-wtf-not-rated-cta]",d))),x(ne,d,se)}else{let d=U?.cloneNode(!0);l(s("[data-wtf-evaluated-comment]",d),G.comment),re(d,G.rating),R(d,E),x(ne,d)}_.insertAdjacentElement("afterbegin",g)}a.appendChild(c)}x(M,a)}function re(r,o){if(!r)return;let a=s("[data-wtf-evaluated-star-section]",r);if(!a)return;let i=f(a.childElementCount-f(1,o),0);for(let c=0;c++<i;)A(a.lastElementChild)}function me(r,o,a){if(!o||!a)return;k(o,E),R(a,E);let i=s("form",a),c=i?.parentElement;if(!i||!c)return;let _=["id","name","method","data-name","aria-label","data-wf-page-id","data-wf-element-id","data-turnstile-sitekey"];for(let p of _)L(i,p);A(i),x(c),c.insertAdjacentHTML("afterbegin",i.outerHTML);let m=s("form",a);L(s('[type="submit"]',m),e),v(m,"submit",async p=>{if(p.preventDefault(),p.stopPropagation(),!p.isTrusted||!p.submitter)return;I(p.submitter,e,e);let N=await ue({product_id:r,comment:m.comment.value,rating:parseInt(m.rating.value)});if(!N.succeeded){L(p.submitter,e);return}Ee(N.data,m)})}function Ee(r,o){if(!o)return;let a=o.closest("[data-wtf-review-area]");if(!a)return;let i=U?.cloneNode(!0);i&&(re(i,r.rating),l(s("[data-wtf-evaluated-comment]",i),r.comment),R(i,E),x(a,i))}q().then(r=>{r.succeeded&&(S.list=r.data)})})();})();
