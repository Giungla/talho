!function(){"use strict";var e="user_name",t="phone",i="email",s="shipping_cep",r="billing_cep",a="https://xef5-44zo-gegm.b2.xano.io",n="talho_cart_items",o={AC:"Acre",AL:"Alagoas",AP:"Amapá",AM:"Amazonas",BA:"Bahia",CE:"Ceará",DF:"Distrito Federal",ES:"Espírito Santo",GO:"Goiás",MA:"Maranhão",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Pará",PB:"Paraíba",PR:"Paraná",PE:"Pernambuco",PI:"Piauí",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rondônia",RR:"Roraima",SC:"Santa Catarina",SP:"São Paulo",SE:"Sergipe",TO:"Tocantins"},d=Object.keys(o),l="",h="/";function u(e){const t=$(_(document.cookie),"; ").find(t=>{const{name:i}=c(t);return i===e});return!!t&&c(t).value}function c(e){const[t,...i]=$(e,"=");return{name:t,value:f(i)>0&&decodeURIComponent(i.join("="))}}var p=null,g={block:"center",behavior:"smooth"};function m(e,t,i,s){if(e)return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)}function y(e){return i=!e,!!(t=function(e,t=document){return t?t.querySelector(e):p}("[data-wtf-loader]"))&&t.classList.toggle("oculto",i);var t,i}function C(e,t={}){const i=new URL(`${location.protocol}//${location.hostname}`),s=new URL(e,i);for(const[r,a]of Object.entries(t))s.searchParams.set(r,a);return s.toString()}function v(e){return JSON.stringify(e)}function b(e){return e.trim()}function P(e){return e.replace(/\D+/g,l)}function f(e){return e.length}function V(){return/^(([\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+(\.[\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+)*)|("[\p{L}\p{N}\s!#$%&'*+\/=?^_`{|}~.-]+"))@(([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*\.)+[a-zA-Z]{2,63}|(\[(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\]))$/u}function S(){return/^\(\d{2}\)\s\d{4,5}-\d{4}$/}function D(){return/^\d{5}-\d{3}$/}function E(){return/^(\w{2,})(\s+(\w+))+$/}function A(){return/^\d{3}\.\d{3}\.\d{3}-\d{2}$/}function N(){return/^\d{2}\/\d{2}\/\d{4}$/}function w(e,t){return("function"==typeof e?e():e).test(t)}function M(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,l).replace(/[\u200B-\u200D\uFEFF]/g,l).replace(/[\u2060\u034F]/g,l)}function _(e){return e.replace(/\s{2,}/g," ")}function $(e,t,i){return e.split(t,i)}function F(e){return e===p}var R="POST",I="__Host-Talho-Session-Cookie",O="X-Talho-Session",k={redirect_to:encodeURIComponent(location.pathname+location.search)},H={path:h,secure:!0,sameSite:"Strict",expires:new Date(Date.now()+12096e5)};function j(e){const t=e?.headers.get(O);t&&function(e,t,i={}){if(0===f(e))throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof t)||0===f(t.toString()))throw new Error("'setCookie' should receive a valid cookie value");const s=[`${e}=${encodeURIComponent(t)}`];z(i?.expires&&i?.expires instanceof Date,s,"expires="+i.expires?.toUTCString()),z(i.maxAge,s,`maxAge=${i.maxAge}`),z(i?.sameSite&&"string"==typeof i?.sameSite,s,`SameSite=${i?.sameSite}`),z(i?.path,s,`path=${i?.path}`),z(i?.domain,s,`domain=${i?.domain}`),z(i?.httpOnly,s,"HttpOnly"),z(i?.secure,s,"Secure");const r=s.join("; ");document.cookie=r}(I,t,H)}function B(e,t=!1,i){return j(this),t||this&&401===this.status&&function(e="/acessos/entrar",t=k){location.href=C(e,t)}(),i?.(),{message:e,succeeded:!1}}function T(e,t){return j(this),t?.(),{data:e,succeeded:!0}}function G(e=[],t="GET"){const i="application/json",s=new Headers({Accept:i,"Content-Type":i});for(const[n,o]of e)s.set(n,o);const r=u(I);r&&s.set(O,r);const a=u("__Host-Talho-AuthToken");return a&&s.set("Authorization",a),{method:t,headers:s}}var L=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});function x(e,t=0){const i=Math.pow(10,t);return Math.round(e*i)/i}function z(e,t,i){return e?t.push(i):-1}function U(e,t){return e.includes(t)}function X(e,t){return e===t}var q=new WeakMap,Q=e=>{const t=q.get(e);t&&(t(),q.delete(e))};function Z(...e){return{mounted(t,i){const s=i.arg??"input",r=m(t,s,i=>{if(!i.isTrusted)return;const s=i.target;s.value=e.reduce((e,t)=>t(e),s.value??l),t.dispatchEvent(J)});q.set(t,r)},unmounted:Q}}var J=new Event("input"),W=new Event("blur"),Y=[10,11];document.currentScript?.getAttribute("data-parameter-names");var{ref:K,createApp:ee}=Vue,te="shipping",ie="billing",se=`${a}/api:79PnTkh_`,re=`${a}/api:5lp3Lw8X`,ae=`${a}/api:24B7O9Aj`,ne="ERROR_CODE_NOT_FOUND",oe="ERROR_CODE_BAD_REQUEST",de={[ne]:"O CEP indicado não foi localizado.",[oe]:"Não realizamos entregas na sua região."},le=document.currentScript?.getAttribute("data-public-key"),he="same",ue="diff",ce="creditcard";function pe(e,t){return Object.hasOwn(e,t)}function ge(e,t,i){return{field:e,valid:t,...i&&{ignoreIf:i}}}async function me({cep:e,deliveryMode:t}){const i="Não foi possível encontrar o endereço";if(8!==f(e=P(e)))return B(i);try{const s=await fetch(`${a}/api:jyidAW68/cepaddress/${e}/checkout`,{...G([],R),body:v({deliveryMode:t})});if(!s.ok){const e=await s.json();return B.call(s,e?.code??i)}const r=await s.json();return T.call(s,r)}catch(s){return B(i)}}ee({name:"TalhoCheckoutApp",setup:()=>({customerCPF:K(l),customerMail:K(l),customerPhone:K(l),customerBirthdate:K(l),customerCreditCardCVV:K(l),customerCreditCardDate:K(l),customerCreditCardNumber:K(l),customerCreditCardHolder:K(l),billingCEP:K(l),billingAddress:K(l),billingNumber:K(l),billingComplement:K(l),billingNeighborhood:K(l),billingCity:K(l),billingState:K(l),shippingRecipient:K(l),shippingCEP:K(l),shippingAddress:K(l),shippingNumber:K(l),shippingComplement:K(l),shippingNeighborhood:K(l),shippingCity:K(l),shippingState:K(l),couponCode:K(l),customerMailElement:K(p),customerCPFElement:K(p),customerPhoneElement:K(p),customerBirthdateElement:K(p),paymentMethodMessageElement:K(p),customerCreditCardCVVElement:K(p),customerCreditCardDateElement:K(p),customerCreditCardNumberElement:K(p),customerCreditCardHolderElement:K(p),billingCEPElement:K(p),billingAddressElement:K(p),billingNumberElement:K(p),billingNeighborhoodElement:K(p),billingCityElement:K(p),billingStateElement:K(p),deliveryPlaceMessageElement:K(p),shippingRecipientElement:K(p),shippingCEPElement:K(p),shippingAddressElement:K(p),shippingNumberElement:K(p),shippingNeighborhoodElement:K(p),shippingCityElement:K(p),shippingStateElement:K(p),deliveryDateMessageElement:K(p),deliveryHourMessageElement:K(p),installmentsMessageElement:K(p),couponCodeElement:K(p),deliveryPlaceAddressErrorMessage:K(p),deliveryBillingAddressErrorMessage:K(p),deliveryShippingAddressErrorMessage:K(p)}),data:()=>({user:p,errorMessage:p,hasPendingPayment:!1,isSubmitted:!1,productlist:p,visitedFields:[],selectedPayment:p,availablePayments:[{label:"Cartão de crédito",method:ce},{label:"PIX",method:"pix"}],deliveryPlace:p,deliveryPlaces:[{token:he,label:"Mesmo endereço de cobrança do cartão"},{token:ue,label:"Entregar em um endereço diferente"}],installment:p,selectedInstallment:p,installmentMessage:p,isCouponPending:!1,coupon:p,isPagSeguroLoaded:!1,deliveryDate:p,deliveryHour:p,isDeliveryLoading:!1,deliveryPrice:p,deliveryOptions:p,priorityTax:p,subsidy:p,selectedBillingAddressId:p,selectedShippingAddressId:p}),created(){Promise.allSettled([this.getLoggedInUser().then(e=>{e.succeeded&&(this.user=e.data)}),this.refreshCart().then(()=>y(!1))]),window.addEventListener("storage",e=>{e.key===n&&this.refreshCart()})},methods:{setPreviousAddress(e,t){const i=this.user?.address_list.find(t=>t.id===e);if(!i)return;const{id:s,cep:r,address:a,number:n,city:o,complement:d,state:l,neighborhood:h}=i;this[`${t}CEP`]=r,this[`${t}Address`]=a,this[`${t}Number`]=n,this[`${t}Complement`]=d,this[`${t}City`]=o,this[`${t}State`]=l,this[`${t}Neighborhood`]=h,t!==te?t===ie&&(this.selectedBillingAddressId=s):this.selectedShippingAddressId=s},async getLoggedInUser(){const e="Falha na captura do usuário";try{const t=await fetch(`${a}/api:TJEuMepe/user/checkout`,{...G()});if(!t.ok){const i=await t.json();return B.call(t,i?.message??e,!0)}const i=await t.json();return T.call(t,i)}catch(t){return B(e)}},async getCart(){const e="Falha ao capturar os produtos";try{const t=await fetch(`${se}/cart/get`,{...G()});if(!t.ok){const i=await t.json();return B.call(t,i?.message??e)}const i=await t.json();return T.call(t,i)}catch(t){return B(e)}},async refreshCart(){if(!this.hasPendingPayment)return this.getCart().then(e=>{e.succeeded&&(0!==f(e.data.items)?this.productlist=e.data:location.href=C("/",{reason:"empty_cart"}))})},async getInstallments(){const e="Falha ao capturar o parcelamento";try{const t=await fetch(`${re}/calculatefees`,{...G([],R),body:v({amount:this.getOrderPrice,cardBin:this.customerCreditCardNumber.replace(/\D+/g,l).slice(0,8)})});if(!t.ok){const i=await t.json();return B.call(t,i?.message??e)}const i=await t.json();return T.call(t,i)}catch(t){return B(e)}},async refreshInstallments(){if(!this.isCreditCard||!this.isCreditCardGroupValid||this.getCreditCardToken.hasErrors)return;this.installment=p,this.selectedInstallment=p,this.installmentMessage=p;const e=await this.getInstallments();e.succeeded?this.installment=e.data:this.installmentMessage=e.message},setSelectedInstallmentsCount(e){var t;this.selectedInstallment!==e&&(this.selectedInstallment=(t=e,Math.max(1,Math.min(2,t))))},setSelectedPaymentMethod(e){this.selectedPayment!==e&&(this.hasDeliveryDates||this.handleDeliveryOptions(),e!==ce?this.clearCreditCardData():this.isPagSeguroLoaded||this.loadPagSeguro(),this.deliveryPlace=p,this.selectedPayment=e)},setVisitedField(e){return z(!U(this.visitedFields,e),this.visitedFields,e)},hasVisitRegistry(e){return U(this.visitedFields,e)},async handlePayment(e){if(e.preventDefault(),this.hasPendingPayment||this.isDeliveryLoading)return;if(this.triggerValidations(),!this.isSubmitted)return this.isSubmitted=!0,void Vue.nextTick(()=>this.handlePayment(e));const t=this.firstInvalidField;if(t){i=t.field,s=g,i&&i.scrollIntoView(s);try{"INPUT"===t.field.tagName&&setTimeout(()=>t.field.focus(),500)}catch(o){}return}var i,s;this.hasPendingPayment=!y(!0);const r=await this.handlePostPayment(this.selectedPayment);if(!r.succeeded)return this.errorMessage=r.message,void(this.hasPendingPayment=!y(!1));const a={pix:"pix",creditcard:"confirmacao-do-pedido"}[this.selectedPayment];location.href=C(["/pagamento",a].join(h),{order:r.data.transactionid}),localStorage.removeItem(n)},async handlePostPayment(e){const t="Falha ao gerar o pedido";try{const i=await fetch(`${re}/payment/process/${e}`,{...G([],R),body:v({...this.getOrderBaseData,customer:{...this.getParsedCustomer,...this.getParsedAddresses},...e===ce&&this.creditCardAdditionalInfo})});if(!i.ok){const e=await i.json();return B.call(i,e?.message??t)}const s=await i.json();return T.call(i,s)}catch(i){return B(t)}},triggerValidations(){const e=this.notIgnoredFields;for(const{field:t}of e)t?.dispatchEvent(W)},feedAddress(e,{uf:t,bairro:i,logradouro:s,localidade:r}){if(e===ie)return this.billingAddress=s,this.billingNeighborhood=i,this.billingCity=r,void(this.billingState=t);this.shippingAddress=s,this.shippingNeighborhood=i,this.shippingCity=r,this.shippingState=t},setDeliveryPlace(e){this.deliveryPlace!==e&&(e===he&&w(/^\d{5}\-\d{3}$/,this.billingCEP)&&this.isBillingAddressGroupValid?me({cep:this.billingCEP,deliveryMode:!0}).then(e=>{e.succeeded||(this.deliveryPlaceAddressErrorMessage=de?.[e.message]??e.message)}):this.deliveryPlaceAddressErrorMessage=p,this.deliveryPlace=e)},async captureAddress(e,t,i){if(!w(/^\d{5}-\d{3}$/,t)||t===i)return!1;const s=`${e}CEP`,r=await me({cep:t,deliveryMode:e===te});if(!r.succeeded){const{message:t}=r;return this[s]=l,this.setVisitedField(s),this.deliveryShippingAddressErrorMessage=e===te&&t!==ne?de?.[t]??de[oe]:p,this.deliveryBillingAddressErrorMessage=e===ie&&t!==ne?de?.[t]??de[oe]:p,!1}switch(e){case te:this.deliveryShippingAddressErrorMessage=p;break;case ie:this.deliveryBillingAddressErrorMessage=p}return this.feedAddress(e,r.data),!0},async captureCoupon(){const e="Falha ao capturar o cupom indicado";try{const t=await fetch(`${re}/get_coupon`,{...G([],R),body:v({verify_amount:!0,coupon_code:this.couponCode,cpf:b(this.customerCPF),has_subsidy:this.subsidy?.has??!1,delivery_cep:this.getParsedAddresses.shippingaddress.zipPostalCode,has_selected_delivery:!F(this.deliveryHour)&&!F(this.deliveryDate)})});if(!t.ok){const i=await t.json();return B.call(t,i?.message??e)}const i=await t.json();return T.call(t,i)}catch(t){return B(e)}},async handleSearchCoupon(){if(this.isCouponPending)return;this.isCouponPending=!0;const e=await this.captureCoupon();this.isCouponPending=!1,e.succeeded?this.coupon=e.data:this.coupon={error:!0,message:e.message}},handleRemoveCoupon(){this.coupon=p,this.couponCode=l},loadPagSeguro(){const e=document.createElement("script");e.async=!0,e.src="https://assets.pagseguro.com.br/checkout-sdk-js/rc/dist/browser/pagseguro.min.js",e.onload=()=>{this.isPagSeguroLoaded=!0},document.head.appendChild(e)},clearCreditCardData(){this.customerCreditCardHolder=l,this.customerCreditCardNumber=l,this.customerCreditCardDate=l,this.customerCreditCardCVV=l},async handleDeliveryOptions(){const e=await this.captureDeliveryOptions();e.succeeded&&(this.deliveryOptions=e.data)},async captureDeliveryOptions(){const e="Falha ao capturar as opções de entrega";try{const t=await fetch(`${ae}/delivery`,{...G()});if(!t.ok){const i=await t.json();return B.call(t,i?.message??e)}const i=await t.json();return T.call(t,i)}catch(t){return B(e)}},setDeliveryDate(e){const t=this.deliveryOptions?.dates?.find(({shift_days:t})=>t===e);t&&this.deliveryDate!==e&&(this.deliveryDate=t.shift_days,this.deliveryHour=p,this.deliveryPrice=p)},setDeliveryHour(e){this.deliveryHour!==e&&0!==this.getSelectedDateDetails?.periods.periods_count&&(this.deliveryHour=e)},async handleDeliveryQuotation(e){this.isDeliveryLoading=!0;const t=await this.captureDeliveryQuotation(e);if(!t.succeeded)return;const{total:i,validator:s}=t.data;this.deliveryPrice={value:i,validator:s},this.isDeliveryLoading=!1},async captureDeliveryQuotation(e){const t="Falha ao gerar uma cotação";try{const i=await fetch(`${a}/api:i6etHc7G/site/checkout-delivery`,{...G([],R),signal:e.signal,body:v(this.quotationPayload)});if(!i.ok){const e=await i.json();return B.call(i,e?.message??t)}const s=await i.json();return T.call(i,s)}catch(i){return B(t)}},async handleSubsidy(){const e=this.getParsedAddresses.shippingaddress.zipPostalCode;if(!w(/^\d{5}\-\d{3}$/,e))return;const t=await this.verifyForSubsidy(P(e));this.subsidy=t.succeeded?t.data:p},async verifyForSubsidy(e){const t="Houve uma falha na verificação";try{const i=await fetch(`${ae}/delivery/${e}/subsidy`,{...G()});if(!i.ok){const e=await i.json();return B.call(i,e?.message??t)}const s=await i.json();return T.call(i,s)}catch(i){return B(t)}},async createAbandonmentCart(e){const t="Houve uma ao gerar o carrinho";try{const i=await fetch(`${a}/api:EuHZTAGr/abandonment/post`,{...G([],R),keepalive:!0,priority:"high",body:v(e)});if(!i.ok){const e=await i.json();return B.call(i,e?.message??t)}const s=await i.json();return T.call(i,s)}catch(i){return B(t)}}},computed:{hasSelectedPaymentMethod(){return!F(this.selectedPayment)},isCreditCard(){return this.selectedPayment===ce},getOrderSubtotal(){return this.productlist?.order_price??0},getOrderSubtotalFormatted(){return L.format(this.getOrderSubtotal)},getOrderPrice(){const e=[this.getOrderSubtotal,this.getShippingPrice,this.priorityFee,this.getCouponDiscountPrice];return z(this.hasSubsidy,e,this.subsidyDiscountPrice),z(this.hasPIXDiscount,e,this.PIXDiscountPrice),x(e.reduce((e,t)=>e+t,0),2)},getOrderPriceFormatted(){return L.format(this.getOrderPrice)},getShippingPrice(){return this.hasFreeShippingByCartPrice||F(this.deliveryPrice)?0:this.deliveryPrice.value/100},getShippingPriceFormatted(){return this.hasFreeShippingByCartPrice?"Frete grátis":L.format(this.getShippingPrice)},getCouponDiscountPrice(){if(this.hasNullCoupon||this.hasInvalidCoupon)return 0;const{value:e,is_percentage:t}=this.coupon,i=this.getParsedPriceForApplyDiscount;let s=t?Math.min(e/100,1)*(-1*i):-1*Math.min(i,e);return Math.round(100*Math.abs(s))/100*Math.sign(s)},getCouponDiscountPriceFormatted(){return L.format(this.getCouponDiscountPrice)},getParsedPriceForApplyDiscount(){if(this.hasNullCoupon||this.hasInvalidCoupon)return 0;const{cupom_type:e}=this.coupon,{getShippingPrice:t}=this;return e===te&&this.hasSubsidy?Math.max(t+this.subsidyDiscountPrice,0):{product_id:0,shipping:t,subtotal:this.getOrderSubtotal}[e]},getParsedProducts(){const e=this.productlist?.items;return e?e.map(({name:e,imageUrl:t,quantity:i,price:s})=>({name:e,image:t,quantity:i,price:L.format(s),finalPrice:L.format(s*i),imageStyle:`background-image: url('${t}')`})):[]},isPersonalDataValid(){return!this.isSubmitted||[this.customerMailValidation.valid,this.customerBirthdateValidation.valid,this.customerCPFValidation.valid,this.customerPhoneValidation.valid].every(Boolean)},customerMailValidation(){return ge(this.customerMailElement,!this.hasVisitRegistry("customerMail")||w(V,this.customerMail))},customerBirthdateValidation(){const{customerBirthdate:e}=this;return ge(this.customerBirthdateElement,!this.hasVisitRegistry("customerBirthdate")||w(N,e)&&function(e){const[t,i,s]=$(e,h),r=new Date(`${s}-${i}-${t}T00:00:00`);if(X(r.toString(),"Invalid Date"))return!1;const a=X(r.getUTCDate(),Number(t)),n=X(r.getUTCMonth()+1,Number(i)),o=X(r.getUTCFullYear(),Number(s));return a&&n&&o}(e))},customerCPFValidation(){const{customerCPF:e}=this;return ge(this.customerCPFElement,!this.hasVisitRegistry("customerCPF")||w(A,this.customerCPF)&&function(e){if(11!==f(e=P(e))||w(/^(\d)\1{10}$/,e))return!1;const t=Y.map((t,i)=>{const s=i?10:9,r=11-[...e.slice(0,s)].map(Number).reduce((e,i,s)=>e+i*(t-s),0)%11;return r>9?0:r});return e.endsWith(t.join(l))}(e))},customerPhoneValidation(){return ge(this.customerPhoneElement,!this.hasVisitRegistry("customerPhone")||w(S,this.customerPhone))},paymentMethodValidation(){return ge(this.paymentMethodMessageElement,!F(this.selectedPayment))},customerCreditCardHolderValidation(){return ge(this.customerCreditCardHolderElement,!this.hasVisitRegistry("customerCreditCardHolder")||w(E,_(M(b(this.customerCreditCardHolder)))),!this.isCreditCard)},customerCreditCardNumberValidation(){return ge(this.customerCreditCardNumberElement,!this.hasVisitRegistry("customerCreditCardNumber")||w(/^(\d{4})(\s\d{4}){2}(\s\d{3,4})$/,b(this.customerCreditCardNumber)),!this.isCreditCard)},customerCreditCardDateValidation(){const{customerCreditCardDate:e}=this;return ge(this.customerCreditCardDateElement,!this.hasVisitRegistry("customerCreditCardDate")||w(/^(1[012]|0[1-9])\/\d{2}$/,e)&&function(e){const t=$(e,h);if(2!==f(t))return!1;const[i,s]=t,r=parseInt(i,10),a=parseInt(s,10);if(isNaN(r)||isNaN(a)||r<1||r>12)return!1;const n=new Date;return new Date(2e3+(a<100?a:0),r,0,23,59,59)>n}(e),!this.isCreditCard)},customerCreditCardCVVValidation(){return ge(this.customerCreditCardCVVElement,!this.hasVisitRegistry("customerCreditCardCVV")||w(/^\d{3,4}$/,this.customerCreditCardCVV),!this.isCreditCard)},isCreditCardGroupValid(){return[this.customerCreditCardHolderValidation.valid,this.customerCreditCardNumberValidation.valid,this.customerCreditCardDateValidation.valid,this.customerCreditCardCVVValidation.valid].every(Boolean)},billingCEPValidation(){return ge(this.billingCEPElement,!this.hasVisitRegistry("billingCEP")||w(D,this.billingCEP),!this.isCreditCard)},billingAddressValidation(){return ge(this.billingAddressElement,!this.hasVisitRegistry("billingAddress")||f(b(this.billingAddress))>2,!this.isCreditCard)},billingNumberValidation(){return ge(this.billingNumberElement,!this.hasVisitRegistry("billingNumber")||f(this.billingNumber)>0,!this.isCreditCard)},billingNeighborhoodValidation(){return ge(this.billingNeighborhoodElement,!this.hasVisitRegistry("billingNeighborhood")||f(this.billingNeighborhood)>0,!this.isCreditCard)},billingCityValidation(){return ge(this.billingCityElement,!this.hasVisitRegistry("billingCity")||f(this.billingCity)>2,!this.isCreditCard)},billingStateValidation(){return ge(this.billingStateElement,!this.hasVisitRegistry("billingState")||U(d,this.billingState),!this.isCreditCard)},isBillingAddressGroupValid(){return F(this.deliveryBillingAddressErrorMessage)&&[this.billingCEPValidation,this.billingAddressValidation,this.billingNumberValidation,this.billingNeighborhoodValidation,this.billingCityValidation,this.billingStateValidation].every(e=>e.valid)},deliveryPlaceValidation(){return ge(this.deliveryPlaceMessageElement,this.hasSelectedAddress&&F(this.deliveryPlaceAddressErrorMessage),!this.isCreditCard)},shippingRecipientValidation(){return ge(this.shippingRecipientElement,!this.hasVisitRegistry("shippingRecipient")||w(/^(\w{2,})(\s+(\w+))+$/,_(M(b(this.shippingRecipient)))),!this.shouldValidateShippingAddress)},shippingCEPValidation(){return ge(this.shippingCEPElement,!this.hasVisitRegistry("shippingCEP")||w(D,this.shippingCEP),!this.shouldValidateShippingAddress)},shippingAddressValidation(){return ge(this.shippingAddressElement,!this.hasVisitRegistry("shippingAddress")||f(b(this.shippingAddress))>2,!this.shouldValidateShippingAddress)},shippingNumberValidation(){return ge(this.shippingNumberElement,!this.hasVisitRegistry("shippingNumber")||f(b(this.shippingNumber))>0,!this.shouldValidateShippingAddress)},shippingNeighborhoodValidation(){return ge(this.shippingNeighborhoodElement,!this.hasVisitRegistry("shippingNeighborhood")||f(b(this.shippingNeighborhood))>3,!this.shouldValidateShippingAddress)},shippingCityValidation(){return ge(this.shippingCityElement,!this.hasVisitRegistry("shippingCity")||f(b(this.shippingCity))>2,!this.shouldValidateShippingAddress)},shippingStateValidation(){return ge(this.shippingStateElement,!this.hasVisitRegistry("shippingState")||U(d,this.shippingState),!this.shouldValidateShippingAddress)},isShippingAddressGroupValid(){return F(this.deliveryShippingAddressErrorMessage)&&[this.shippingCEPValidation,this.shippingAddressValidation,this.shippingNumberValidation,this.shippingNeighborhoodValidation,this.shippingCityValidation,this.shippingStateValidation].every(e=>e.valid)},deliveryDatesGroupValidation(){return ge(this.deliveryDateMessageElement,!F(this.deliveryDate),!this.paymentMethodValidation.valid)},deliveryHoursGroupValidation(){return ge(this.deliveryHourMessageElement,!F(this.deliveryHour),!this.deliveryDatesGroupValidation.valid)},installmentGroupValidation(){return ge(this.installmentsMessageElement,!F(this.selectedInstallment),!this.isCreditCard||!this.paymentMethodValidation.valid)},notIgnoredFields(){return[this.customerMailValidation,this.customerBirthdateValidation,this.customerCPFValidation,this.customerPhoneValidation,this.paymentMethodValidation,this.customerCreditCardHolderValidation,this.customerCreditCardNumberValidation,this.customerCreditCardDateValidation,this.customerCreditCardCVVValidation,this.billingCEPValidation,this.billingAddressValidation,this.billingNumberValidation,this.billingNeighborhoodValidation,this.billingCityValidation,this.billingStateValidation,this.deliveryPlaceValidation,this.shippingRecipientValidation,this.shippingCEPValidation,this.shippingAddressValidation,this.shippingNumberValidation,this.shippingNeighborhoodValidation,this.shippingCityValidation,this.shippingStateValidation,this.deliveryDatesGroupValidation,this.deliveryHoursGroupValidation,this.installmentGroupValidation].filter(({ignoreIf:e})=>U([!1,void 0],e))},firstInvalidField(){return this.notIgnoredFields.find(({valid:e})=>!e)??p},hasSelectedAddress(){return!F(this.deliveryPlace)},isSameAddress(){return this.deliveryPlace===he},isDiffAddress(){return this.deliveryPlace===ue},shouldValidateShippingAddress(){return!this.isCreditCard||this.showShippingAddressSelector&&!this.isSameAddress},showShippingAddressSelector(){return!this.isCreditCard||this.isCreditCard&&this.hasSelectedAddress},getParsedAddresses(){const e=e=>o?.[e]??l,t=e=>b(e).replace(/-+/g,l)||"N/A",i={zipPostalCode:this.shippingCEP,street:this.shippingAddress,number:this.shippingNumber,complement:t(this.shippingComplement),neighbourhood:this.shippingNeighborhood,city:this.shippingCity,state:e(this.shippingState)},s={zipPostalCode:this.billingCEP,street:this.billingAddress,number:this.billingNumber,complement:t(this.billingComplement),neighbourhood:this.billingNeighborhood,city:this.billingCity,state:e(this.billingState)};return this.isCreditCard?{billingaddress:s,shippingaddress:this.isSameAddress?s:i}:{shippingaddress:i,billingaddress:i}},getParsedCustomer(){return{name:this.isCreditCard?this.customerCreditCardHolder:this.shippingRecipient,cpf:this.customerCPF,email:this.customerMail,birthDate:this.customerBirthdate,phone:this.customerPhone}},getParsedDeliveryData(){const{getSelectedHourDetails:e,getSelectedDateDetails:t}=this;return{delivery_hour:{value:this.deliveryHour,validator:e?.validator,has_priority:e?.has_priority},delivery_date:{value:this.deliveryDate,validator:t?.validator,has_priority:t?.has_priority}}},getOrderBaseData(){return{user_id:p,coupon_code:this.hasInvalidCoupon||this.hasNullCoupon?p:this.coupon?.code,delivery:{...this.getParsedDeliveryData,delivery_price:this.deliveryPrice}}},showInstallmentSection(){return this.isCreditCard&&(f(this.installment??[])>0||!F(this.installmentMessage))},getParsedInstallments(){const{installment:e}=this;return e?e.map(({installments:e,installment_value:t})=>({installments:e,installment_value:L.format(t)})):[]},hasNullCoupon(){return F(this.coupon)},hasAppliedCoupon(){return pe(this.coupon??{},"cupom_type")},hasInvalidCoupon(){return pe(this.coupon??{},"error")},isCouponCodeValid(){const{couponCode:e}=this;return f(b(e))>4&&!w(/[^A-Z\d]/,e)},getCreditCardToken(){if(!this.isPagSeguroLoaded)return{errors:[],hasErrors:!1,encryptedCard:p};const[e,t]=$(this.customerCreditCardDate,h);return window.PagSeguro.encryptCard({expMonth:e,expYear:"20".concat(t),holder:this.customerCreditCardHolder,securityCode:this.customerCreditCardCVV,number:P(this.customerCreditCardNumber),publicKey:le})},hasDeliveryDates(){const{deliveryOptions:e}=this;return t=e?.dates,Array.isArray(t)&&f(e?.dates)>0;var t},hasDeliveryHour(){return!F(this.deliveryDate)&&f(this.getParsedDeliveryHours)>0},getParsedDeliveryHours(){return!this.hasDeliveryDates||F(this.getSelectedDateDetails)?[]:this.getSelectedDateDetails.periods.hours.map(({label:e,hour:t})=>({hour:t,label:e}))},quotationPayload(){if([this.deliveryDate,this.deliveryHour].some(e=>F(e)))return!1;const e=this.getParsedAddresses.shippingaddress.zipPostalCode;if(!w(/^\d{5}\-\d{3}$/,e))return!1;const{delivery_hour:t,delivery_date:i}=this.getParsedDeliveryData;return{cep:e,delivery_hour:t,delivery_date:i}},getParsedDeliveryDates(){if(F(this.deliveryOptions))return[];const e=this.deliveryDate;return this.deliveryOptions.dates.map(({label:t,shift_days:i})=>({label:t,shift_days:i,selected:e===i}))},getSelectedDateDetails(){if(!this.deliveryDate===p)return p;const e=this.deliveryOptions?.dates.find(({shift_days:e})=>e===this.deliveryDate);return e||p},getSelectedHourDetails(){return this.getSelectedDateDetails&&this.deliveryHour?this.getSelectedDateDetails.periods.hours.find(({hour:e})=>e===this.deliveryHour)??p:p},hasPriorityFee(){return!!(this.hasDeliveryHour&&this.getSelectedDateDetails&&this.getSelectedHourDetails)&&this.getSelectedDateDetails.has_priority&&this.getSelectedHourDetails.has_priority},priorityFee(){return this.hasPriorityFee?this.deliveryOptions?.priority_fee:0},priorityFeeFormatted(){return L.format(this.priorityFee)},hasSubsidy(){return!0===this.subsidy?.has&&this.getShippingPrice>0&&this.getOrderSubtotal>=250&&!this.hasFreeShippingByCartPrice},subsidyDiscountPrice(){return!0===this.subsidy?.has?-1*Math.min(this.subsidy.value,this.getShippingPrice):0},subsidyDiscountPriceFormatted(){return L.format(this.subsidyDiscountPrice)},hasFreeShippingByCartPrice(){return this.getOrderSubtotal>=400},creditCardAdditionalInfo(){const{installment:e,isSameAddress:t,getCreditCardToken:i,selectedInstallment:s,customerCreditCardHolder:r}=this;return{is_same_address:t,credit_card_info:{holderName:r,creditCardToken:i.encryptedCard??l,numberOfPayments:s,installmentValue:e?.find(({installments:e})=>e===s)?.installment_value??0}}},hasPIXDiscount(){return"pix"===this.selectedPayment&&(this.deliveryOptions?.pix_discount??0)>0},PIXDiscountPrice(){return this.hasPIXDiscount?x((this.deliveryOptions?.pix_discount??0)/100*-this.getOrderSubtotal,2):0},PIXDiscountPriceFormatted(){return L.format(this.PIXDiscountPrice)},userAddresses(){const e=this.user;return e&&0!==f(e.address_list)?e.address_list.map(({address:e,number:t,cep:i,...s})=>({...s,address:e,number:t,cep:i,complete:`${e}, ${t} ${i}`})):[]}},watch:{billingCEP(e,t){this.captureAddress(ie,e,t).then(e=>{e&&(this.deliveryPlaceAddressErrorMessage=p,this.deliveryPlace===he&&(this.deliveryPlace=p))})},shippingCEP(e,t){this.deliveryDate=p,this.deliveryHour=p,this.captureAddress(te,e,t)},getOrderPrice:{immediate:!0,handler:function(){this.refreshInstallments()}},getCreditCardToken(e){e.hasErrors||this.refreshInstallments()},quotationPayload(e,t,i){if(!e)return;const{cep:s,delivery_hour:r,delivery_date:a}=e;if(!w(/^\d{5}\-\d{3}$/,s))return;const n=new AbortController;if(!t)return this.handleDeliveryQuotation(n),i(()=>n.abort());const{cep:o,delivery_date:d,delivery_hour:l}=t;return this.handleDeliveryQuotation(n),i(()=>n.abort())},getParsedAddresses(e,t){e&&t&&e.shippingaddress.zipPostalCode!==t.shippingaddress.zipPostalCode&&w(/^\d{5}\-\d{3}$/,e.shippingaddress.zipPostalCode)&&(this.isCreditCard&&F(this.deliveryPlace)||this.handleSubsidy())},user(e){e&&(this.customerPhone=e.telephone??"",this.customerCPF=e.cpf??"",this.customerBirthdate=e.birthday?.split("-").reverse().join("/")??"",this.customerMail=e.email??"")}},directives:{trim:Z(b),removeDuplicatedSpaces:Z(_),maskDate:Z(P,function(e){return e.replace(/^(\d{0,2})(\d{0,2})(\d{0,4})/,(e,t,i,s)=>[t,i,s].filter(Boolean).join(h))}),maskCpf:Z(P,function(e){return e.replace(/^(\d{0,3})(\d{0,3})(\d{0,3})(\d{0,2})/,(e,t,i,s,r)=>{const a=[];return z(t,a,`${t}`),z(i,a,`.${i}`),z(s,a,`.${s}`),z(r,a,`-${r}`),a.join(l)})}),maskPhone:Z(P,function(e){const t=(e,t,i,s)=>{const r=[];return z(t,r,`(${t}`),z(i,r,`) ${i}`),z(s,r,`-${s}`),r.join(l)};return f(e)<11?e.replace(/^(\d{0,2})(\d{0,4})(\d{0,4})/,t):e.replace(/^(\d{0,2})(\d{0,5})(\d{0,4})/,t)}),maskCreditCard:Z(P,function(e){return e.replace(/^(\d{0,4})(\d{0,4})(\d{0,4})(\d{0,4})/,(e,t,i,s,r)=>{const a=[];for(const n of[t,i,s,r])z(n,a,n);return a.join(" ")})}),maskCreditCardDate:Z(P,function(e){return e.replace(/^(\d{0,2})(\d{0,2})/,(e,t,i)=>{const s=[];for(const r of[t,i])z(r,s,r);return s.join(h)})}),maskNumberOnly:Z(P),maskCep:Z(P,function(e){return e.replace(/^(\d{0,5})(\d{0,3})/,(e,t,i)=>{const s=[];for(const r of[t,i])z(r,s,r);return s.join("-")})}),upperCase:Z(function(e){return e.toUpperCase()}),normalize:Z(M),visitedField:{mounted(e,{value:t,instance:i}){const s=m(e,"blur",()=>{i.setVisitedField(t),q.delete(e)},{once:!0});q.set(e,s)},unmounted:Q},captureAbandonment:{mounted(a,n){q.set(a,m(a,"change",o=>{if(!o.isTrusted||!n.arg)return;const d=n.arg,l={[i]:V,[t]:S,[e]:E,[s]:D,[r]:D},h=b(a.value),u=l?.[d]??null,c=d===i?_(M(h)):h;u&&w(u,c)&&n.instance.createAbandonmentCart({field:d,value:h})}))},unmounted:Q}}}).mount("#fechamentodopedido"),window.addEventListener("pageshow",e=>{e.persisted&&window.location.reload()})}();