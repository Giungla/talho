"use strict";(()=>{var st=401,N="__Host-Talho-AuthToken",O="__Host-Talho-Session-Cookie",M="X-Talho-Session";function it(t){!t||t.status!==st||(location.href=w("/acessos/entrar",{redirect_to:encodeURIComponent(location.pathname)}))}function $(t){let o=t?.headers.get(M);o&&I(O,o,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+k(90))})}function m(t){return $(this),it(this),{message:t,succeeded:!1}}function h(t){return $(this),{data:t,succeeded:!0}}function _(t=[],o="GET"){let e=new Headers({Accept:"application/json","Content-Type":"application/json"});for(let[s,u]of t)e.set(s,u);let n=A(O);n&&e.set(M,n);let r=A(N);return r&&e.set("Authorization",r),{method:o,headers:e}}var S=null,c="oculto";function a(t,o=document){return o?o.querySelector(t):S}function p(t,o,e,n){if(t)return t.addEventListener(o,e,n),()=>t.removeEventListener(o,e,n)}function D(t,o){t&&t.removeAttribute(o)}function g(t,...o){t&&t.classList.add(...o)}function y(t,...o){t&&t.classList.remove(...o)}function l(t,o,e){return t?t.classList.toggle(o,e):!1}function d(t,o){t&&(t.textContent=typeof o=="string"?o:o.toString())}function w(t,o={}){let e=new URL(`${location.protocol}//${location.hostname}`),n=new URL(t,e);for(let[r,s]of Object.entries(o))n.searchParams.set(r,s);return n.toString()}function P(t){return JSON.stringify(t)}function f(t){return t.length}function C(t){return t===S}var V="; ";function A(t){let o=document.cookie.split(V).find(e=>{let{name:n}=H(e);return n===t});return o?H(o).value:!1}function H(t){let[o,e]=t.split("=");return{name:o,value:e}}function I(t,o,e={}){if(f(t)===0)throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof o)||f(o.toString())===0)throw new Error("'setCookie' should receive a valid cookie value");let n=[`${t}=${o}`];e?.expires&&e?.expires instanceof Date&&n.push("expires="+e.expires.toUTCString()),e.maxAge&&n.push(`maxAge=${e.maxAge}`),e?.sameSite&&typeof e?.sameSite=="string"&&n.push(`SameSite=${e?.sameSite}`),e?.path&&n.push(`path=${e?.path}`),e?.domain&&n.push(`domain=${e?.path}`),e?.httpOnly&&n.push("HttpOnly"),e?.secure&&n.push("Secure");let r=n.join(V);return document.cookie=r,r}function k(t){return 86400*1e3*t}var E=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});function v(t,o,e){return Math.max(t,Math.min(o,e))}var q="talho_cart_items";var F={AC:"Acre",AL:"Alagoas",AP:"Amap\xE1",AM:"Amazonas",BA:"Bahia",CE:"Cear\xE1",DF:"Distrito Federal",ES:"Esp\xEDrito Santo",GO:"Goi\xE1s",MA:"Maranh\xE3o",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Par\xE1",PB:"Para\xEDba",PR:"Paran\xE1",PE:"Pernambuco",PI:"Piau\xED",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rond\xF4nia",RR:"Roraima",SC:"Santa Catarina",SP:"S\xE3o Paulo",SE:"Sergipe",TO:"Tocantins"},ct=Object.keys(F),ut=Object.values(F);var U="https://xef5-44zo-gegm.b2.xano.io";var lt="selecionado",pt="carrinhoflutuante--visible",ot=`${U}/api:79PnTkh_`,T="click",dt=1,ft=10,B="POST",K="{count}",z=[`Temos apenas ${K} unidade dispon\xEDvel.`,`Temos apenas ${K} unidades dispon\xEDveis.`],mt={quantity:1,stockCount:0,product:S,selectedVariation:S},L=location.pathname.split("/"),i=new Proxy(mt,{get(t,o){switch(o){case"variationsCount":return f(t.product?.variations??[]);case"hasPriceDifference":{let{price:e,full_price:n}=i.prices;return e!==n}case"prices":{let{product:e,selectedVariation:n}=t;if(!e||!i.hasSelectedVariation)return b();let r=e.variations.find(s=>s.id===n);return r?b(r.price,r.full_price):b()}case"BRLPrices":{let{price:e,full_price:n}=i.prices;return b(E.format(e),E.format(n))}case"computedFinalPrices":{let{quantity:e,prices:n}=i,r=n.price*e,s=n.full_price*e;return{price:{price:r,full_price:s},currency:{price:E.format(r),full_price:E.format(s)}}}case"hasSelectedVariation":return!C(t.selectedVariation);default:return Reflect.get(t,o)}},set(t,o,e){let n=Reflect.set(t,o,e);switch(o){case"quantity":d(yt,String(e??1)),vt();break;case"selectedVariation":Ct(),Reflect.set(i,"quantity",1);break;case"stockCount":xt(),j(0);break;case"product":{let r=e;Reflect.set(i,"stockCount",r?.stock_quantity??0),Reflect.set(i,"selectedVariation",r?.variations[0].id??S)}}return n}}),Y=a("[data-wtf-error-message-sku-maximum]"),gt=a("[data-wtf-error-message-invetory]"),St=a("[data-wtf-quantity-minus]"),Et=a("[data-wtf-quantity-plus]"),yt=a("[data-wtf-quantity-value]"),J=a("[data-wtf-price]"),X=a("[data-wtf-full-price]"),Pt=a("[data-wtf-total]"),W=a("[data-wtf-sku-list]"),Tt=a("[data-wtf-sku-item]"),G=a("[data-wtf-shipping-button]"),R=a("[data-wtf-shipping-form]"),x=a("[data-wtf-shipping-value]"),nt=a("[data-wtf-comprar]"),Z=a("[data-wtf-error-message-shipping]");function rt(t,o,e){return t.replace(o,e)}function b(t=0,o=0){return{price:t,full_price:o}}async function At(t){let o="Houve uma falha ao capturar o produto";try{let e=await fetch(`${ot}/product/single-product-page`,{..._([],B),body:P({quantity:1,reference_id:t})});if(!e.ok){let r=await e.json();return m.call(e,r?.message??o)}let n=await e.json();return h.call(e,n)}catch{return m(o)}}function j(t){let o=t+i.quantity,e=Math.min(i.stockCount,ft),n=v(dt,e,o);n!==i.quantity&&(i.quantity=n)}function ht(t){i.product?.variations.some(({id:e})=>e===t)&&(i.selectedVariation=t)}async function _t(t){t.preventDefault();let{quantity:o,product:e,selectedVariation:n}=i;if(!n||!e||i.stockCount===0)return;let r=await Rt({quantity:o,sku_id:n,reference_id:e.slug});if(!r.succeeded)return alert("A adi\xE7\xE3o falhou");i.quantity=1,g(a("#carrinho-flutuante"),pt),localStorage.setItem(q,P(r.data))}async function Rt(t){let o="Falha ao adicionar o produto";try{let e=await fetch(`${ot}/cart/handle`,{..._([],B),body:P({item:t,operation:"add"})});if(!e.ok){let r=await e.json();return m.call(e,r?.message??o)}let n=await e.json();return h.call(e,n)}catch{return m(`[CATCH] ${o}`)}}function Ct(){if(!W||!Tt||!i.product)return;let{selectedVariation:t,product:o}=i,e=document.createDocumentFragment(),n=a("[data-wtf-weight-selector]"),r=i.variationsCount<2;if(r)return n?.remove();l(n,c,r);for(let s of o?.variations){let u=document.createElement("div"),Q=t===s.id;g(u,"text-block"),l(u,lt,Q),d(u,rt(s.label,/\./g,",")),Q||p(u,T,()=>ht(s.id)),e.appendChild(u)}W.replaceChildren(e)}function vt(){if(!i.product||!i.hasSelectedVariation)return;let o=s=>a("[data-wtf-price-value]",s),{BRLPrices:e,hasPriceDifference:n,computedFinalPrices:r}=i;d(o(J),e.price),d(o(X),e.full_price),d(o(Pt),r.currency.price),l(J,c,!n),l(X,c,!n)}function xt(){let{stockCount:t}=i,o=t<1;if(l(a("[data-wtf-shipping]"),c,o),l(a("[data-wtf-quantity-selector]"),c,o),l(nt,c,o),l(gt,c,t>0),l(Y,c,t>10||o))return;let n=f(z)-1;d(a("div",Y),rt(z[v(0,n,t-1)],K,t.toString()))}function tt(t){return t.replace(/^(\d{0,5})(\d{0,3})/,(o,e,n)=>{let r=[];for(let s of[e,n])s&&r.push(s);return r.join("-")})}function et(){let t=a("form",R);if(!t)return;let o=["name","method","data-name","aria-label","data-wf-page-id","data-wf-element-id","data-turnstile-sitekey"];for(let r of o)D(t,r);y(R,"w-form");let e=t.parentElement;e.innerHTML=t.outerHTML;let n=a("#shipping-cep-form");n&&(p(n,"input",r=>{r.stopPropagation();let s=r.target,u=s.value.replace(/\D+/g,"");s.name!=="cep"||s.value===tt(u)||!r.isTrusted||(s.value=tt(u),s.dispatchEvent(new Event("input")))}),p(n,"submit",async r=>{r.preventDefault();let s=n.cep.value,u=await Lt({cep:s,reference_id:L[f(L)-1]});if(l(Z,c,u.succeeded),!u.succeeded){d(a("div",Z),u.message);return}switch(u.data.type){case"quotation":return at(u.data.data);case"locationlist":return bt(u.data.data)}}))}function at(t){g(G,c),g(R,c),y(x,c);let o=Math.max(t.total/100-(t.has_subsidy?t.subsidy_value:0),0);d(a("[data-wtf-quotation-price]",x),o===0?"Frete gr\xE1tis":E.format(o)),p(a("[data-wtf-quotation-reload]",x),T,e=>{y(R,c),g(x,c)},{once:!0})}function bt(t){console.log(f(t)," localiza\xE7\xF5es recebidas")}async function Lt(t){let o="Houve uma falha ao gerar a cota\xE7\xE3o";try{let e=await fetch(`${U}/api:i6etHc7G/site/product-delivery`,{..._([],B),body:P(t)});if(!e.ok){let r=await e.json();return m.call(e,r?.message??o)}let n=await e.json();return h.call(e,n)}catch{return m(o)}}At(L[f(L)-1]).then(t=>{if(!t.succeeded)return;i.product=t.data.product;let o=t.data.delivery;C(o)||(et(),at(o))}).then(()=>{p(Et,T,()=>j(1)),p(St,T,()=>j(-1)),p(nt,T,_t),p(G,T,t=>{t.preventDefault(),g(G,c),y(R,c),et()},{once:!0})});})();
