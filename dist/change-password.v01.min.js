(()=>{let t="; ",o="oculto",u="__Host-Talho-AuthToken",c="mensagemdeerro",d="disabled",l="[data-wtf-wrapper]",f={preventScroll:!1};function p(e,a=document){return a?a.querySelector(e):null}function m(e,a,t,r){e&&e.addEventListener(a,t,r)}function h(a){var e=document.cookie.split(t).find(e=>{e=r(e).name;return e===a});return!!e&&r(e).value}function r(e){var[e,a]=e.split("=");return{name:e,value:a}}if(!1===h(u))g=encodeURIComponent(location.pathname),location.href="/acessos/entrar?redirect_to="+g;else{var e,a,v=p("#wf-form-update-password");if(v){for(var w of["name","method","data-name","aria-label","data-wf-page-id","data-wf-element-id","data-turnstile-sitekey"])b(v,w);var g=v.parentElement;a=["w-form"],(e=g)&&e.classList.remove(...a),v.remove(),g.insertAdjacentHTML("afterbegin",v.outerHTML)}let i=p("[data-wtf-password]"),t=p("[data-wtf-confirm-password]"),r=[{field:i,validator:function(){var e=T("wtfPassword");if(!i)return e(!1);var{hasNumber:a,hasMinLength:t,hasLowercase:r,hasUppercase:s,hasSpecialChar:n}=(e=>({hasNumber:(e=(a=>e=>e.test(a))(e))(/\d/),hasLowercase:e(/[a-z]/),hasUppercase:e(/[A-Z]/),hasMinLength:e(/.{8,}/),hasSpecialChar:e(/[!@#$%^&*()_+{}\[\]:;<>,.?\/~\\-]/)}))(i.value),o=a&&r&&s&&n&&t,a=(({hasNumber:e,hasLowercase:a,hasUppercase:t,hasMinLength:r,hasSpecialChar:s})=>{var n=(e,a)=>`Sua senha deve conter pelo menos ${e} `+a;return r?e?s?a?!t&&n(1,"maiúscula"):n(1,"letra minúscula"):n(1,"caractere especial"):n(1,"número"):n(8,"caracteres")})({hasNumber:a,hasLowercase:r,hasUppercase:s,hasMinLength:t,hasSpecialChar:n});return M(i,a||""),A(i,o),e(o)}},{field:t,validator:function(){var e=T("wtfConfirmPassword");if(!i||!t)return e(!1);var a=i.value===t.value;return M(t,a?"okok":"As senhas informadas não conferem"),A(t,a),e(a)}}];for(let{field:e,validator:a}of r)e&&(m(e,"blur",function(){console.log(e.dataset),a()}),m(e,"input",()=>A(e,!0)));let s=p("#wf-form-update-password"),n=p('[type="submit"]',s);function b(e,a){e&&e.removeAttribute(a)}function L(e,a,t){e&&e.classList.toggle(a,t)}function C(e){return{message:e,succeeded:!1}}function y(e,a){if(e){var r=!a.succeeded,s=p("[data-wtf-error-update-password]",e);let t=p("[data-wtf-success-update-password]",e);s&&L(s,o,!r),t&&L(t,o,r),r?(e=s&&p("div",s))&&(e.textContent=a.message):t&&setTimeout(()=>{var e,a;e=t,a=[o],e&&e.classList.add(...a)},8e3)}}function T(a){return function(e){return[a,e]}}function A(e,a){e=e.closest(l);e&&L(e,c,!a)}function S(e,a){e&&e.focus(a)}function M(e,a){e&&(e=p("[data-wtf-field-error] div",e.closest(l)))&&(e.textContent=a)}b(n,d),s&&m(s,"submit",async a=>{a.preventDefault(),a.stopPropagation(),a=n,t=d,e=d,a&&a.setAttribute(t,e);var e,a=r.map(({validator:e})=>e).find(e=>!1===e().at(1));if(a){let e=p(`[data-${a().at(0).replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}]`,s);return S(e,f),setTimeout(()=>{e?.dispatchEvent(new FocusEvent("blur")),S(e,f)},0),b(n,d)}var t=await(async e=>{var a="Houve uma falha ao atualizar sua senha. Por favor, tente novamente mais tarde.";try{var t=await fetch("https://xef5-44zo-gegm.b2.xano.io/api:TJEuMepe/user/change-password",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:h(u)},body:JSON.stringify(e)});return t.ok?{data:await t.json(),succeeded:!0}:C((await t.json())?.message??a)}catch(e){return C(a)}})({password:s?.password.value,confirm_password:s?.confirm_password.value});y(s,t),b(n,d),t.succeeded&&s.reset()})}})();