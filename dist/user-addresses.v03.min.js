(()=>{let O="; ",e="__Host-Talho-AuthToken",o="oculto",d="https://xef5-44zo-gegm.b2.xano.io",_="[data-wtf-wrapper]",Z="mensagemdeerro";var t="#wf-form-Address-Form";if(!1===r(e))return location.href="/acessos/entrar?redirect_to="+encodeURIComponent(location.pathname);let q=["AL","AM","AP","CE","BA","AC","DF","ES","GO","MA","MG","MS","MT","PA","PB","PE","PI","PR","RJ","RN","RO","RR","RS","SC","SE","SP","TO"];function a(e){u(i("[data-wtf-loader]"),o,!e)}function i(e,t=document){return t.querySelector(e)}function s(e,t,a,r){return e.addEventListener(t,a,r),()=>e.removeEventListener(t,a,r)}function r(t){var e=document.cookie.split(O).find(e=>{e=n(e).name;return e===t});return!!e&&n(e).value}function n(e){var[e,t]=e.split("=");return{name:e,value:t}}function u(e,t,a){e.classList.toggle(t,a)}function c(e,t){e.removeAttribute(t)}function f(e){return{data:e,succeeded:!0}}function l(e){return{message:e,succeeded:!1}}let v={Accept:"application/json","Content-Type":"application/json",Authorization:r(e)},w=i("[data-wtf-error-message-no-address-registered]"),m=i("[data-wtf-registered-address]"),z=m?.parentElement,p=(m?.remove(),new Proxy([],{set(e,t,r){var a=Reflect.set(e,t,r),t="length"===t&&0===r;if(h(t),!t&&"number"!=typeof r){t=null!==i(`[data-wtf-address-id="${r.id}"]`);if(h(0<y(e)),!t){var n=r;if(m){let a=m.cloneNode(!0);e=i("[data-wtf-address-tag]",a),t=i("[data-wtf-address]",a),r=i("[data-wtf-delete-user-address]",a);if(e&&(e.textContent=n.nick),t&&(t.textContent=n.address),r){let t=null;t=s(r,"click",async function(){var e;(await(async e=>{var t="Houve uma falha ao remover o endereço. Tente novamente mais tarde.";try{var a=await fetch(d+`/api:Yytq8Zut/user_addresses/${e}/delete`,{method:"DELETE",headers:v});return a.ok?f(null):l((await a.json())?.message??t)}catch(e){return l(t)}})(n.id)).succeeded&&(t?.(),e=p.findIndex(e=>e.id===n.id),p.splice(e,1),a.remove())},!1)}a.dataset.wtfAddressId=n.id,z.appendChild(a)}}}return a}}));function h(e){w&&u(w,o,!e)}function g(t){return function(e){return[t,e]}}function D(e,t){var a=!t.succeeded,r=i("[data-wtf-error-new]",e);let n=i("[data-wtf-success-new]",e);r&&u(r,o,!a),n&&u(n,o,a),a?(e=r&&i("div",r))&&(e.textContent=t.message):setTimeout(()=>{return n&&(e=n,t=[o],void e.classList.add(...t));var e,t},8e3)}function y(e){return e.length}function A(e,t){e=e.closest(_);e&&u(e,Z,!t)}function I(e){var t,a,r,n,o;if(e.succeeded)({cep:e,logradouro:t,localidade:a,complemento:r,bairro:n,uf:o}=e.data),T(k,e),T(L,t),T(x,n),T(M,a),T(H,o);else for(var d of[L,$,x,M,H])T(d)}function b(e){Array.isArray(e)?p.push(...e):p.push(e)}function T(e,t=""){e&&(e.value=t)}var C,E=i(t);if(!E)return;for(C of["name","method","data-name","aria-label","data-wf-page-id","data-wf-element-id","data-turnstile-sitekey"])c(E,C);var N,P=i('input[type="submit"]',E);if(P&&c(P,"disabled"),!(P=E.parentElement))return;N=["w-form"],P.classList.remove(...N),E.remove(),P.insertAdjacentHTML("afterbegin",E.outerHTML);let j=i(t);if(!j)return;let S=i("[data-wtf-tag-new]"),k=i("[data-wtf-zipcode-new]"),L=i("[data-wtf-address-new]"),R=i("[data-wtf-number-new]"),$=i("[data-wtf-complement-new]"),x=i("[data-wtf-neighborhood-new]"),M=i("[data-wtf-city-new]"),H=i("[data-wtf-state-new]");function Y(){var e,t=g("wtfTagNew");return S?(e=2<y(S.value),A(S,e),t(e)):t(!1)}function B(){var e,t=g("wtfZipcodeNew");return k?(e=/^\d{5}-\d{3}$/.test(k.value),A(k,e),t(e)):t(!1)}function F(){var e,t=g("wtfAddressNew");return L?(e=2<y(L.value),A(L,e),t(e)):t(!1)}function G(){var e,t=g("wtfNumberNew");return R?(e=0<y(R.value),A(R,e),t(e)):t(!1)}function J(){var e,t=g("wtfNeighborhoodNew");return x?(e=2<y(x.value),A(x,e),t(e)):t(!1)}function U(){var e,t=g("wtfCityNew");return M?(e=2<y(M.value),A(M,e),t(e)):t(!1)}function W(){var e,t=g("wtfStateNew");return H?(e=q.includes(H.value),A(H,e),t(e)):t(!1)}for(let{field:e,validator:t}of[{field:S,validator:Y},{field:k,validator:B},{field:L,validator:F},{field:R,validator:G},{field:x,validator:J},{field:M,validator:U},{field:H,validator:W}])e&&(s(e,"blur",t,!1),s(e,"input",function(){A(e,!0)},!1));k&&s(k,"input",function(){var e,t;k&&(t=y(e=k.value.replace(/\D+/g,"")),k.value=5<t?e.replace(/(\d{5})(\d{1,3})/,"$1-$2"):e,y(k.value)<9||(async e=>{var t="O CEP informado não foi encontrado";try{var a=await fetch(d+"/api:jyidAW68/cepaddress/"+e);return a.ok?f(await a.json()):l((await a.json())?.message??t)}catch(e){return l(t)}})(e).then(I))},!1),s(j,"submit",async function(e){e.preventDefault(),e.stopPropagation();e=[Y,B,F,G,J,U,W].find(e=>!e().at(1));if(e)i(`[data-${e().at(0).replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}]`,j)?.focus({preventScroll:!1});else{a(!0);e=await(async e=>{var t="Houve uma falha ao salvar o endereço. Por favor, tente novamente mais tarde.";try{var a=await fetch(d+"/api:Yytq8Zut/user_addresses/create",{method:"POST",headers:v,body:JSON.stringify(e)});return a.ok?f(await a.json()):l((await a.json())?.message??t)}catch(e){return l(t)}})({nick:S?.value,cep:k?.value,address:L?.value,number:R?.value,complement:$?.value,neighborhood:x?.value,city:M?.value,state:H?.value});if(D(j,e),!e.succeeded)return a(!1);j.reset(),b(e.data),a(!1)}},!1),(async()=>{var t="Houve uma falha ao buscar os seus endereços. Tente novamente mais tarde.";try{var e=await fetch(d+"/api:Yytq8Zut/user_addresses/all",{headers:v});return e.ok?f(await e.json()):l((await e.json())?.message??t)}catch(e){return l(t)}})().then(e=>{e.succeeded&&0<y(e.data)&&b(e.data)}).finally(()=>a(!1))})();