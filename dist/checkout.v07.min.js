(()=>{let{ref:e,createApp:O}=Vue,d="",a="/",s=null,r="shipping",n="billing",o="https://xef5-44zo-gegm.b2.xano.io",l=(o,o+"/api:5lp3Lw8X"),h=o+"/api:24B7O9Aj",t={headers:{Accept:"application/json","Content-Type":"application/json"}},u={method:"POST",...t},c="talho_cart_items",p={AC:"Acre",AL:"Alagoas",AP:"Amapá",AM:"Amazonas",BA:"Bahia",CE:"Ceará",DF:"Distrito Federal",ES:"Espírito Santo",GO:"Goiás",MA:"Maranhão",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Pará",PB:"Paraíba",PR:"Paraná",PE:"Pernambuco",PI:"Piauí",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rondônia",RR:"Roraima",SC:"Santa Catarina",SP:"São Paulo",SE:"Sergipe",TO:"Tocantins"},i=Object.keys(p),j=[10,11],g=new WeakMap,H=new Event("input"),m="same",y="diff",C="creditcard",v=(C,new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"}));function b(e){return i="[data-wtf-loader]",t=document,t=t?t.querySelector(i):s,i="oculto",e=!e,!!t&&t.classList.toggle(i,e);var i,t}function P(e,i){var t,s,r=new URL(location.protocol+"//"+location.hostname),a=new URL(e,r);for([t,s]of Object.entries(i))a.searchParams.set(t,s);return a.toString()}function V(e,i){return Object.hasOwn(e,i)}function f(e){return JSON.stringify(e)}function D(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,d)}function S(e){return e.replace(/\D+/g,d)}function E(e){return e.trim()}function A(e){return e.length}function M(e,i,t){return e?i.push(t):-1}function N(e,i){return e.includes(i)}function w(e,i){return e.test(i)}function F(...t){return{mounted(i){var e=k(i,"input",e=>{e.isTrusted&&((e=e.target).value=t.reduce((e,i)=>i(e),e.value??d),i.dispatchEvent(H))});g.set(i,e)},unmounted:T}}function R(e,i,t){return{field:e,valid:i,...t&&{ignoreIf:t}}}function I(e){return{message:e,succeeded:!1}}function _(e){return{data:e,succeeded:!0}}function k(e,i,t,s){if(e)return e.addEventListener(i,t,s),()=>e.removeEventListener(i,t,s)}async function B({cep:e,deliveryMode:i}){var t="Não foi possível encontrar o endereço";if(8!==(e=S(e)).length)return I(t);try{var s=await fetch(o+`/api:jyidAW68/cepaddress/${e}/checkout`,{...u,credentials:"include",body:f({deliveryMode:i})});return s.ok?_(await s.json()):I((await s.json())?.message??t)}catch(e){return I(t)}}let T=e=>{var i=g.get(e);i&&(i(),g.delete(e))};O({name:"TalhoCheckoutApp",setup(){return{customerCPF:e(d),customerMail:e(d),customerPhone:e(d),customerBirthdate:e(d),customerCreditCardCVV:e(d),customerCreditCardDate:e(d),customerCreditCardNumber:e(d),customerCreditCardHolder:e(d),billingCEP:e(d),billingAddress:e(d),billingNumber:e(d),billingComplement:e(d),billingNeighborhood:e(d),billingCity:e(d),billingState:e(d),shippingRecipient:e(d),shippingCEP:e(d),shippingAddress:e(d),shippingNumber:e(d),shippingComplement:e(d),shippingNeighborhood:e(d),shippingCity:e(d),shippingState:e(d),couponCode:e(d),customerMailElement:e(s),customerCPFElement:e(s),customerPhoneElement:e(s),customerBirthdateElement:e(s),paymentMethodMessageElement:e(s),customerCreditCardCVVElement:e(s),customerCreditCardDateElement:e(s),customerCreditCardNumberElement:e(s),customerCreditCardHolderElement:e(s),billingCEPElement:e(s),billingAddressElement:e(s),billingNumberElement:e(s),billingNeighborhoodElement:e(s),billingCityElement:e(s),billingStateElement:e(s),deliveryPlaceMessageElement:e(s),shippingRecipientElement:e(s),shippingCEPElement:e(s),shippingAddressElement:e(s),shippingNumberElement:e(s),shippingNeighborhoodElement:e(s),shippingCityElement:e(s),shippingStateElement:e(s),deliveryDateMessageElement:e(s),deliveryHourMessageElement:e(s),installmentsMessageElement:e(s),couponCodeElement:e(s),deliveryPlaceAddressErrorMessage:e(s),deliveryBillingAddressErrorMessage:e(s),deliveryShippingAddressErrorMessage:e(s)}},data(){return{hasPendingPayment:!1,isSubmitted:!1,productlist:s,visitedFields:[],selectedPayment:s,availablePayments:[{label:"Cartão de crédito",method:C},{label:"PIX",method:"pix"}],deliveryPlace:s,deliveryPlaces:[{token:m,label:"Mesmo endereço de cobrança do cartão"},{token:y,label:"Entregar em um endereço diferente"}],installment:s,selectedInstallment:s,isCouponPending:!1,coupon:s,isPagSeguroLoaded:!1,deliveryDate:s,deliveryHour:s,isDeliveryLoading:!1,deliveryPrice:s,deliveryOptions:s,priorityTax:s,subsidy:s}},created(){this.refreshCart().then(()=>b(!1)),window.addEventListener("storage",e=>{e.key===c&&this.refreshCart()})},methods:{async getCart(){var i="Falha ao capturar os produtos";try{var e=await fetch("https://xef5-44zo-gegm.b2.xano.io/api:79PnTkh_/cart/get",{...t,credentials:"include"});return e.ok?_(await e.json()):I((await e.json())?.message??i)}catch(e){return I(i)}},async refreshCart(){if(!this.hasPendingPayment)return this.getCart().then(e=>{e.succeeded&&(0===e.data.items.length?location.href=P("/",{reason:"empty_cart"}):this.productlist=e.data)})},async getInstallments(){var i="Falha ao capturar o parcelamento";try{var e=await fetch(l+"/calculatefees",{...u,cache:"force-cache",credentials:"include",body:f({amount:this.getOrderPrice,cardBin:this.customerCreditCardNumber.replace(/\D+/g,d).slice(0,8)})});return e.ok?_(await e.json()):I((await e.json())?.message??i)}catch(e){return I(i)}},async refreshInstallments(){var e;this.isCreditCard&&this.isCreditCardGroupValid&&!this.getCreditCardToken.hasErrors&&(this.installment=s,this.selectedInstallment=s,(e=await this.getInstallments()).succeeded)&&(this.installment=e.data)},setSelectedInstallmentsCount(e){var i,t;this.selectedInstallment!==e&&(this.selectedInstallment=(i=1,t=2,Math.max(i,Math.min(t,e))))},setSelectedPaymentMethod(e){this.selectedPayment!==e&&(this.hasDeliveryDates||this.handleDeliveryOptions(),e!==C?this.clearCreditCardData():this.isPagSeguroLoaded||this.loadPagSeguro(),this.deliveryPlace=s,this.selectedPayment=e)},setVisitedField(e){return M(!N(this.visitedFields,e),this.visitedFields,e)},hasVisitRegistry(e){return N(this.visitedFields,e)},async handlePayment(e){if(e.preventDefault(),!this.hasPendingPayment&&!this.isDeliveryLoading)if(this.triggerValidations(),this.isSubmitted){let e=this.firstInvalidField;if(e)i=e.field,t={block:"center",behavior:"smooth"},i.scrollIntoView(t),"INPUT"===e.field.tagName&&setTimeout(()=>e.field.focus(),500);else{this.hasPendingPayment=!b(!0);var i=await this.handlePostPayment(this.selectedPayment);if(!i.succeeded)return this.hasPendingPayment=!b(!1),alert(i.message);var t={pix:"pix",creditcard:"confirmacao-do-pedido"}[this.selectedPayment];location.href=P(["/pagamento",t].join(a),{order:i.data.transactionid}),localStorage.removeItem(c)}}else this.isSubmitted=!0,Vue.nextTick(()=>this.handlePayment(e))},async handlePostPayment(e){var i="Falha ao gerar o pedido";try{var t=await fetch(l+"/payment/process/"+e,{...u,credentials:"include",body:f({...this.getOrderBaseData,customer:{...this.getParsedCustomer,...this.getParsedAddresses},...e===C&&this.creditCardAdditionalInfo})});return t.ok?_(await t.json()):I((await t.json())?.message??i)}catch(e){return I(i)}},triggerValidations(){var e;for({field:e}of this.notIgnoredFields)e?.dispatchEvent(new Event("blur"))},feedAddress(e,{uf:i,bairro:t,logradouro:s,localidade:r}){e===n?(this.billingAddress=s,this.billingNeighborhood=t,this.billingCity=r,this.billingState=i):(this.shippingAddress=s,this.shippingNeighborhood=t,this.shippingCity=r,this.shippingState=i)},setDeliveryPlace(e){this.deliveryPlace!==e&&(e===m&&/^\d{5}\-\d{3}$/.test(this.billingCEP)&&this.isBillingAddressGroupValid?B({cep:this.billingCEP,deliveryMode:!0}).then(e=>{e.succeeded||(this.deliveryPlaceAddressErrorMessage=e.message)}):this.deliveryPlaceAddressErrorMessage=s,this.deliveryPlace=e)},async captureAddress(e,i,t){if(!w(/^\d{5}-\d{3}$/,i)||i===t)return!1;t=e+"CEP",i=await B({cep:i,deliveryMode:e===r});if(!i.succeeded)return this[t]=d,this.setVisitedField(t),e===r&&(this.deliveryShippingAddressErrorMessage=i.message),e===n&&(this.deliveryBillingAddressErrorMessage=i.message),!1;switch(e){case r:this.deliveryShippingAddressErrorMessage=s;break;case n:this.deliveryBillingAddressErrorMessage=s}return this.feedAddress(e,i.data),!0},async captureCoupon(){var i="Falha ao capturar o cupom indicado";try{var e=await fetch(l+"/get_coupon",{...u,credentials:"include",body:f({verify_amount:!0,coupon_code:this.couponCode,cpf:this.customerCPF&&s,has_subsidy:this.subsidy?.has??!1,delivery_cep:this.getParsedAddresses.shippingaddress.zipPostalCode,has_selected_delivery:this.deliveryHour!==s&&this.deliveryDate!==s})});return e.ok?_(await e.json()):I((await e.json())?.message??i)}catch(e){return I(i)}},async handleSearchCoupon(){var e;this.isCouponPending||(this.isCouponPending=!0,e=await this.captureCoupon(),this.isCouponPending=!1,e.succeeded?this.coupon=e.data:this.coupon={error:!0,message:e.message})},handleRemoveCoupon(){this.coupon=s,this.couponCode=d},loadPagSeguro(){var e=document.createElement("script");e.async=!0,e.src="https://assets.pagseguro.com.br/checkout-sdk-js/rc/dist/browser/pagseguro.min.js",e.onload=()=>{this.isPagSeguroLoaded=!0},document.head.appendChild(e)},clearCreditCardData(){this.customerCreditCardHolder=d,this.customerCreditCardNumber=d,this.customerCreditCardDate=d,this.customerCreditCardCVV=d},async handleDeliveryOptions(){var e=await this.captureDeliveryOptions();e.succeeded&&(this.deliveryOptions=e.data)},async captureDeliveryOptions(){var i="Falha ao capturar as opções de entrega";try{var e=await fetch(h+"/delivery",{credentials:"include",headers:{Accept:"application/json"}});return e.ok?_(await e.json()):I((await e.json())?.message??i)}catch(e){return I(i)}},setDeliveryDate(i){var e=this.deliveryOptions?.dates?.find(({shift_days:e})=>e===i);e&&this.deliveryDate!==i&&(this.deliveryDate=e.shift_days,this.deliveryHour=s,this.deliveryPrice=s)},setDeliveryHour(e){this.deliveryHour!==e&&0!==this.getSelectedDateDetails?.periods.periods_count&&(this.deliveryHour=e)},async handleDeliveryQuotation(e){this.isDeliveryLoading=!0;var i,e=await this.captureDeliveryQuotation(e);e.succeeded&&({total:e,validator:i}=e.data,this.deliveryPrice={value:e,validator:i},this.isDeliveryLoading=!1)},async captureDeliveryQuotation(e){var i="Falha ao gerar uma cotação";try{var t=await fetch(o+"/api:i6etHc7G/site/checkout-delivery",{...u,credentials:"include",signal:e.signal,body:f(this.quotationPayload)});return t.ok?_(await t.json()):I((await t.json())?.message??i)}catch(e){return I(i)}},async handleSubsidy(){var e=this.getParsedAddresses.shippingaddress.zipPostalCode;/^\d{5}\-\d{3}$/.test(e)&&(e=await this.verifyForSubsidy(S(e)),this.subsidy=e.succeeded?e.data:s)},async verifyForSubsidy(e){var i="Houve uma falha na verificação";try{var t=await fetch(h+`/delivery/${e}/subsidy`,{credentials:"include",headers:{Accept:"application/json"}});return t.ok?_(await t.json()):I((await t.json())?.message??i)}catch(e){return I(i)}}},computed:{hasSelectedPaymentMethod(){return this.selectedPayment!==s},isCreditCard(){return this.selectedPayment===C},getOrderSubtotal(){return this.productlist?.order_price??0},getOrderSubtotalFormatted(){return v.format(this.getOrderSubtotal)},getOrderPrice(){var e,i=[this.getOrderSubtotal,this.getShippingPrice,this.priorityFee,this.subsidyDiscountPrice,this.getCouponDiscountPrice].reduce((e,i)=>e+i,0);return i=i,e=2,e=Math.pow(10,e),Math.round(i*e)/e},getOrderPriceFormatted(){return v.format(this.getOrderPrice)},getShippingPrice(){return this.hasFreeShippingByCartPrice||this.deliveryPrice===s?0:this.deliveryPrice.value/100},getShippingPriceFormatted(){return this.hasFreeShippingByCartPrice?"Frete grátis":v.format(this.getShippingPrice)},getCouponDiscountPrice(){var e,i,t;return this.hasNullCoupon||this.hasInvalidCoupon?0:({value:e,is_percentage:t}=this.coupon,i=this.getParsedPriceForApplyDiscount,t=t?Math.min(e/100,1)*(-1*i):-1*Math.min(i,e),Math.round(100*Math.abs(t))/100*Math.sign(t))},getCouponDiscountPriceFormatted(){return v.format(this.getCouponDiscountPrice)},getParsedPriceForApplyDiscount(){var e,i;return this.hasNullCoupon||this.hasInvalidCoupon?0:(e=this.coupon.cupom_type,i=this.getShippingPrice,e===r&&this.hasSubsidy?Math.max(i+this.subsidyDiscountPrice,0):{product_id:0,shipping:i,subtotal:this.getOrderSubtotal}[e])},getParsedProducts(){var e=this.productlist?.items;return e?e.map(({name:e,imageUrl:i,quantity:t,price:s})=>({name:e,image:i,quantity:t,price:v.format(s),finalPrice:v.format(s*t)})):[]},isPersonalDataValid(){return!this.isSubmitted||[this.customerMailValidation.valid,this.customerBirthdateValidation.valid,this.customerCPFValidation.valid,this.customerPhoneValidation.valid].every(Boolean)},customerMailValidation(){return R(this.customerMailElement,!this.hasVisitRegistry("customerMail")||w(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,this.customerMail))},customerBirthdateValidation(){var e=this.customerBirthdate;return R(this.customerBirthdateElement,!this.hasVisitRegistry("customerBirthdate")||w(/^\d{2}\/\d{2}\/\d{4}$/,e)&&(e=>{var[e,i,t]=e.split(a);return"Invalid Date"!==new Date(t+`-${i}-${e}T00:00:00`).toString()})(e))},customerCPFValidation(){var i,e=this.customerCPF;return R(this.customerCPFElement,!this.hasVisitRegistry("customerCPF")||w(/^\d{3}\.\d{3}\.\d{3}-\d{2}$/,this.customerCPF)&&11===(i=S(i=e)).length&&!/^(\d)\1{10}$/.test(i)&&(e=j.map((s,e)=>{e=11-[...i.slice(0,e?10:9)].map(Number).reduce((e,i,t)=>e+i*(s-t),0)%11;return 9<e?0:e}),i.endsWith(e.join(d))))},customerPhoneValidation(){return R(this.customerPhoneElement,!this.hasVisitRegistry("customerPhone")||w(/\(\d{2}\)\s\d{4,5}-\d{4}/,this.customerPhone))},paymentMethodValidation(){return R(this.paymentMethodMessageElement,this.selectedPayment!==s)},customerCreditCardHolderValidation(){return R(this.customerCreditCardHolderElement,!this.hasVisitRegistry("customerCreditCardHolder")||/^(\w{2,})(\s+(\w+))+$/.test(D(E(this.customerCreditCardHolder).replace(/\s{2,}/g," "))),!this.isCreditCard)},customerCreditCardNumberValidation(){return R(this.customerCreditCardNumberElement,!this.hasVisitRegistry("customerCreditCardNumber")||w(/^(\d{4})(\s\d{4}){2}(\s\d{3,4})$/,E(this.customerCreditCardNumber)),!this.isCreditCard)},customerCreditCardDateValidation(){var e,i=this.customerCreditCardDate;return R(this.customerCreditCardDateElement,!this.hasVisitRegistry("customerCreditCardDate")||w(/^(1[012]|0[1-9])\/\d{2}$/,i)&&2===(i=(i=i).split(a)).length&&([i,e]=i,i=parseInt(i,10),e=parseInt(e,10),!(isNaN(i)||isNaN(e)||i<1||12<i))&&new Date<new Date(2e3+(e<100?e:0),i,0,23,59,59),!this.isCreditCard)},customerCreditCardCVVValidation(){return R(this.customerCreditCardCVVElement,!this.hasVisitRegistry("customerCreditCardCVV")||w(/^\d{3}$/,this.customerCreditCardCVV),!this.isCreditCard)},isCreditCardGroupValid(){return[this.customerCreditCardHolderValidation.valid,this.customerCreditCardNumberValidation.valid,this.customerCreditCardDateValidation.valid,this.customerCreditCardCVVValidation.valid].every(Boolean)},billingCEPValidation(){return R(this.billingCEPElement,!this.hasVisitRegistry("billingCEP")||w(/^\d{5}-\d{3}$/,this.billingCEP),!this.isCreditCard)},billingAddressValidation(){return R(this.billingAddressElement,!this.hasVisitRegistry("billingAddress")||2<A(E(this.billingAddress)),!this.isCreditCard)},billingNumberValidation(){return R(this.billingNumberElement,!this.hasVisitRegistry("billingNumber")||0<A(this.billingNumber),!this.isCreditCard)},billingNeighborhoodValidation(){return R(this.billingNeighborhoodElement,!this.hasVisitRegistry("billingNeighborhood")||0<A(this.billingNeighborhood),!this.isCreditCard)},billingCityValidation(){return R(this.billingCityElement,!this.hasVisitRegistry("billingCity")||2<A(this.billingCity),!this.isCreditCard)},billingStateValidation(){return R(this.billingStateElement,!this.hasVisitRegistry("billingState")||N(i,this.billingState),!this.isCreditCard)},isBillingAddressGroupValid(){return this.deliveryBillingAddressErrorMessage===s&&[this.billingCEPValidation,this.billingAddressValidation,this.billingNumberValidation,this.billingNeighborhoodValidation,this.billingCityValidation,this.billingStateValidation].every(e=>e.valid)},deliveryPlaceValidation(){return R(this.deliveryPlaceMessageElement,this.hasSelectedAddress&&this.deliveryPlaceAddressErrorMessage===s,!this.isCreditCard)},shippingRecipientValidation(){return R(this.shippingRecipientElement,!this.hasVisitRegistry("shippingRecipient")||w(/^(\w{2,})(\s+(\w+))+$/,D(E(this.shippingRecipient)).replace(/\s{2,}/g," ")),!this.shouldValidateShippingAddress)},shippingCEPValidation(){return R(this.shippingCEPElement,!this.hasVisitRegistry("shippingCEP")||w(/^\d{5}-\d{3}$/,this.shippingCEP),!this.shouldValidateShippingAddress)},shippingAddressValidation(){return R(this.shippingAddressElement,!this.hasVisitRegistry("shippingAddress")||2<A(E(this.shippingAddress)),!this.shouldValidateShippingAddress)},shippingNumberValidation(){return R(this.shippingNumberElement,!this.hasVisitRegistry("shippingNumber")||0<A(E(this.shippingNumber)),!this.shouldValidateShippingAddress)},shippingNeighborhoodValidation(){return R(this.shippingNeighborhoodElement,!this.hasVisitRegistry("shippingNeighborhood")||3<A(E(this.shippingNeighborhood)),!this.shouldValidateShippingAddress)},shippingCityValidation(){return R(this.shippingCityElement,!this.hasVisitRegistry("shippingCity")||2<A(E(this.shippingCity)),!this.shouldValidateShippingAddress)},shippingStateValidation(){return R(this.shippingStateElement,!this.hasVisitRegistry("shippingState")||N(i,this.shippingState),!this.shouldValidateShippingAddress)},isShippingAddressGroupValid(){return this.deliveryShippingAddressErrorMessage===s&&[this.shippingCEPValidation,this.shippingAddressValidation,this.shippingNumberValidation,this.shippingNeighborhoodValidation,this.shippingCityValidation,this.shippingStateValidation].every(e=>e.valid)},deliveryDatesGroupValidation(){return R(this.deliveryDateMessageElement,this.deliveryDate!==s,!this.paymentMethodValidation.valid)},deliveryHoursGroupValidation(){return R(this.deliveryHourMessageElement,this.deliveryHour!==s,!this.deliveryDatesGroupValidation.valid)},installmentGroupValidation(){return R(this.installmentsMessageElement,this.selectedInstallment!==s,!this.isCreditCard||!this.paymentMethodValidation.valid)},notIgnoredFields(){return[this.customerMailValidation,this.customerBirthdateValidation,this.customerCPFValidation,this.customerPhoneValidation,this.paymentMethodValidation,this.customerCreditCardHolderValidation,this.customerCreditCardNumberValidation,this.customerCreditCardDateValidation,this.customerCreditCardCVVValidation,this.billingCEPValidation,this.billingAddressValidation,this.billingNumberValidation,this.billingNeighborhoodValidation,this.billingCityValidation,this.billingStateValidation,this.deliveryPlaceValidation,this.shippingRecipientValidation,this.shippingCEPValidation,this.shippingAddressValidation,this.shippingNumberValidation,this.shippingNeighborhoodValidation,this.shippingCityValidation,this.shippingStateValidation,this.deliveryDatesGroupValidation,this.deliveryHoursGroupValidation,this.installmentGroupValidation].filter(({ignoreIf:e})=>N([!1,void 0],e))},firstInvalidField(){return this.notIgnoredFields.find(({valid:e})=>!e)??s},hasSelectedAddress(){return this.deliveryPlace!==s},isSameAddress(){return this.deliveryPlace===m},isDiffAddress(){return this.deliveryPlace===y},shouldValidateShippingAddress(){return!this.isCreditCard||this.showShippingAddressSelector&&!this.isSameAddress},showShippingAddressSelector(){return!this.isCreditCard||(this.isCreditCard,this.hasSelectedAddress)},getParsedAddresses(){var e=e=>p[e]??d,i=e=>E(e).replace(/-+/g,d)||"N/A",t={zipPostalCode:this.shippingCEP,street:this.shippingAddress,number:this.shippingNumber,complement:i(this.shippingComplement),neighbourhood:this.shippingNeighborhood,city:this.shippingCity,state:e(this.shippingState)},i={zipPostalCode:this.billingCEP,street:this.billingAddress,number:this.billingNumber,complement:i(this.billingComplement),neighbourhood:this.billingNeighborhood,city:this.billingCity,state:e(this.billingState)};return this.isCreditCard?{billingaddress:i,shippingaddress:this.isSameAddress?i:t}:{shippingaddress:t,billingaddress:t}},getParsedCustomer(){return{name:this.isCreditCard?this.customerCreditCardHolder:this.shippingRecipient,cpf:this.customerCPF,email:this.customerMail,birthDate:this.customerBirthdate,phone:this.customerPhone}},getParsedDeliveryData(){var{getSelectedHourDetails:e,getSelectedDateDetails:i}=this;return{delivery_hour:{value:this.deliveryHour,validator:e?.validator,has_priority:e?.has_priority},delivery_date:{value:this.deliveryDate,validator:i?.validator,has_priority:i?.has_priority}}},getOrderBaseData(){return{user_id:s,coupon_code:this.hasInvalidCoupon||this.hasNullCoupon?s:this.coupon?.code,delivery:{...this.getParsedDeliveryData,delivery_price:this.deliveryPrice}}},showInstallmentSection(){return this.isCreditCard&&0<A(this.installment??[])},getParsedInstallments(){var e=this.installment;return e?e.map(({installments:e,installment_value:i})=>({installments:e,installment_value:v.format(i)})):[]},hasNullCoupon(){return this.coupon===s},hasAppliedCoupon(){return V(this.coupon??{},"cupom_type")},hasInvalidCoupon(){return V(this.coupon??{},"error")},isCouponCodeValid(){var e=this.couponCode;return 4<A(E(e))&&!w(/[^A-Z\d]/,e)},getCreditCardToken(){var e,i;return this.isPagSeguroLoaded?([e,i]=this.customerCreditCardDate.split(a),window.PagSeguro.encryptCard({expMonth:e,expYear:"20".concat(i),holder:this.customerCreditCardHolder,securityCode:this.customerCreditCardCVV,number:S(this.customerCreditCardNumber),publicKey:"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxPIKWT6ettkFKqSyfoUpH/550Q8YQtRf7ZYJJbV3U7/4HBtamJT9If4wiLs2YlEfwTPWlB5Cl0jGmkBSQkjIDF+QTOSJviZYKgiuR7Bnavgt+idkcZsd5hM1I6u1uwOJJE3wSSXg+Nw70GZCeg7A6bmq9tOu1827En/ZFKWBXqv9Upc7q/Y6N0XMzZ3CL1j6ZlhnCalQzzaV9whijxK22lIL78gLEUcnmEO7CUX6DyfcdlA13MM4X538k2eYUosdnKafCEDNVcT+PPUeUdJZ0CpBWA9c/XtO0BIbTXHTsDuDlX0r7BF0vMFJMi0D9lkFCavY/kjZEQYhnXMtrWlUWwIDAQAB"})):{errors:[],hasErrors:!1,encryptedCard:s}},hasDeliveryDates(){var e,i=this.deliveryOptions;return e=i?.dates,Array.isArray(e)&&0<A(i?.dates)},hasDeliveryHour(){return this.deliveryDate!==s&&0<A(this.getParsedDeliveryHours)},getParsedDeliveryHours(){return this.hasDeliveryDates&&this.getSelectedDateDetails!==s?this.getSelectedDateDetails.periods.hours.map(({label:e,hour:i})=>({hour:i,label:e})):[]},quotationPayload(){var e,i,t;return![this.deliveryDate,this.deliveryHour].some(e=>e===s)&&(e=this.getParsedAddresses.shippingaddress.zipPostalCode,!!/^\d{5}\-\d{3}$/.test(e))&&({delivery_hour:i,delivery_date:t}=this.getParsedDeliveryData,{cep:e,delivery_hour:i,delivery_date:t})},getParsedDeliveryDates(){if(this.deliveryOptions===s)return[];let t=this.deliveryDate;return this.deliveryOptions.dates.map(({label:e,shift_days:i})=>({label:e,shift_days:i,selected:t===i}))},getSelectedDateDetails(){return!this.deliveryDate!==s&&this.deliveryOptions?.dates.find(({shift_days:e})=>e===this.deliveryDate)||s},getSelectedHourDetails(){return this.getSelectedDateDetails&&this.deliveryHour?this.getSelectedDateDetails.periods.hours.find(({hour:e})=>e===this.deliveryHour)??s:s},hasPriorityFee(){return!!(this.hasDeliveryHour&&this.getSelectedDateDetails&&this.getSelectedHourDetails)&&this.getSelectedDateDetails.has_priority&&this.getSelectedHourDetails.has_priority},priorityFee(){return this.hasPriorityFee?this.deliveryOptions?.priority_fee:0},priorityFeeFormatted(){return v.format(this.priorityFee)},hasSubsidy(){return!0===this.subsidy?.has&&0<this.getShippingPrice},subsidyDiscountPrice(){return!0===this.subsidy?.has?-1*Math.min(this.subsidy.value,this.getShippingPrice):0},subsidyDiscountPriceFormatted(){return v.format(this.subsidyDiscountPrice)},hasFreeShippingByCartPrice(){return 400<=this.getOrderSubtotal},creditCardAdditionalInfo(){let{installment:e,isSameAddress:i,getCreditCardToken:t,selectedInstallment:s,customerCreditCardHolder:r}=this;return{is_same_address:i,credit_card_info:{holderName:r,creditCardToken:t.encryptedCard??d,numberOfPayments:s,installmentValue:e?.find(({installments:e})=>e===s)?.installment_value??0}}}},watch:{billingCEP(e,i){this.captureAddress(n,e,i).then(e=>{e&&(this.deliveryPlaceAddressErrorMessage=s,this.deliveryPlace===m)&&(this.deliveryPlace=s)})},shippingCEP(e,i){this.deliveryDate=s,this.deliveryHour=s,this.captureAddress(r,e,i)},getOrderPrice:{immediate:!0,handler:function(){this.refreshInstallments()}},getCreditCardToken(e){e.hasErrors||this.refreshInstallments()},quotationPayload(e,i,t){if(e){var s,r,a,e=e.cep;if(/^\d{5}\-\d{3}$/.test(e)){let e=new AbortController;return i&&({cep:s,delivery_date:r,delivery_hour:a}=i),this.handleDeliveryQuotation(e),t(()=>e.abort())}}},getParsedAddresses(e,i){e&&i&&(e.shippingaddress.zipPostalCode===i.shippingaddress.zipPostalCode||!/^\d{5}\-\d{3}$/.test(e.shippingaddress.zipPostalCode)||this.isCreditCard&&this.deliveryPlace===s||this.handleSubsidy())}},directives:{maskDate:F(S,function(e){return e.replace(/^(\d{0,2})(\d{0,2})(\d{0,4})/,(e,i,t,s)=>[i,t,s].filter(Boolean).join(a))}),maskCpf:F(S,function(e){return e.replace(/^(\d{0,3})(\d{0,3})(\d{0,3})(\d{0,2})/,(e,i,t,s,r)=>{var a=[];return M(i,a,""+i),M(t,a,"."+t),M(s,a,"."+s),M(r,a,"-"+r),a.join(d)})}),maskPhone:F(S,function(e){var i=(e,i,t,s)=>{var r=[];return M(i,r,"("+i),M(t,r,") "+t),M(s,r,"-"+s),r.join(d)};return e.length<11?e.replace(/^(\d{0,2})(\d{0,4})(\d{0,4})/,i):e.replace(/^(\d{0,2})(\d{0,5})(\d{0,4})/,i)}),maskCreditCard:F(S,function(e){return e.replace(/^(\d{0,4})(\d{0,4})(\d{0,4})(\d{0,4})/,(e,i,t,s,r)=>{var a,d=[];for(a of[i,t,s,r])M(a,d,a);return d.join(" ")})}),maskCreditCardDate:F(S,function(e){return e.replace(/^(\d{0,2})(\d{0,2})/,(e,i,t)=>{var s,r=[];for(s of[i,t])M(s,r,s);return r.join(a)})}),maskNumberOnly:F(S),maskCep:F(S,function(e){return e.replace(/^(\d{0,5})(\d{0,3})/,(e,i,t)=>{var s,r=[];for(s of[i,t])M(s,r,s);return r.join("-")})}),upperCase:F(function(e){return e.toUpperCase()}),normalize:F(D),visitedField:{mounted(i,{value:t,instance:s}){var e=k(i,"blur",e=>{s.setVisitedField(t),g.delete(i)},{once:!0});g.set(i,e)},unmounted:T}}}).mount("#fechamentodopedido")})();