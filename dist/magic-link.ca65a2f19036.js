"use strict";(()=>{var A="; ";function a(e){let t=document.cookie.split(A).find(o=>{let{name:r}=E(o);return r===e});return t?E(t).value:!1}function E(e){let[t,o]=e.split("=");return{name:t,value:o}}function u(e,t,o={}){if(e.length===0)throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof t)||t.toString().length===0)throw new Error("'setCookie' should receive a valid cookie value");let r=[`${e}=${t}`];o?.expires&&o?.expires instanceof Date&&r.push("expires="+o.expires.toUTCString()),o.maxAge&&r.push(`maxAge=${o.maxAge}`),o?.sameSite&&typeof o?.sameSite=="string"&&r.push(`SameSite=${o?.sameSite}`),o?.path&&r.push(`path=${o?.path}`),o?.domain&&r.push(`domain=${o?.path}`),o?.httpOnly&&r.push("HttpOnly"),o?.secure&&r.push("Secure");let n=r.join(A);return document.cookie=n,n}var c="__Host-Talho-AuthToken",l="__Host-Talho-Session-Cookie",f="X-Talho-Session";function m(e){let t=this?.get(f);return t&&u(l,t,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+d(90))}),{message:e,succeeded:!1}}function S(e){let t=this?.get(f);return t&&u(l,t,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+d(90))}),{data:e,succeeded:!0}}function x(e=[],t="GET"){let o=new Headers({Accept:"application/json","Content-Type":"application/json"});for(let[s,p]of e)o.set(s,p);let r=a(l);r&&o.set(f,r);let n=a(c);return n&&o.set("Authorization",n),{method:t,headers:o}}function d(e){return 86400*1e3*e}var C=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});var O=null,T="oculto";function h(){return!!a(c)}function g(e,t=document){return t?t.querySelector(e):O}function y(e,...t){e&&e.classList.remove(...t)}function _(e,t){e&&(e.textContent=typeof t=="string"?t:t.toString())}function R(e){return JSON.stringify(e)}var L={AC:"Acre",AL:"Alagoas",AP:"Amap\xE1",AM:"Amazonas",BA:"Bahia",CE:"Cear\xE1",DF:"Distrito Federal",ES:"Esp\xEDrito Santo",GO:"Goi\xE1s",MA:"Maranh\xE3o",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Par\xE1",PB:"Para\xEDba",PR:"Paran\xE1",PE:"Pernambuco",PI:"Piau\xED",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rond\xF4nia",RR:"Roraima",SC:"Santa Catarina",SP:"S\xE3o Paulo",SE:"Sergipe",TO:"Tocantins"},M=Object.keys(L),v=Object.values(L);(function(){let e="/area-do-usuario/pedidos-de-compra";if(h()){location.href=e;return}async function t(s){let p="Houve uma falha ao validar o token. Por favor, tente novamente mais tarde.";try{let i=await fetch("https://xef5-44zo-gegm.b2.xano.io/api:uImEuFxO/auth/magic-login",{...x([],"POST"),body:R({magic_token:s})});if(!i.ok){let b=await i.json();return m.call(i.headers,b?.message??p)}let I=await i.json();return S.call(i.headers,I)}catch{return m(p)}}let o=new URLSearchParams(location.search),r=g("[data-wtf-recover-access-general-error-message]"),n=o.get("token");n&&t(n).then(s=>{if(!s.succeeded){let i=r&&g("div",r);return y(r,T),_(i,s.message)}u(c,s.data.authToken,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(s.data.expiration)}),location.href=e})})();})();
