"use strict";(()=>{(function(){"use strict";let i="oculto",d="mensagemdeerro";function r(t,e=document){return e.querySelector(t)}function l(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function u(t,...e){t.classList.add(...e)}function m(t,...e){t.classList.remove(...e)}function f(t,e,n){t.classList.toggle(e,n)}async function v(t){t.preventDefault(),t.stopPropagation();let e=t.target;if(!e)return;let n=[T,g].find(a=>!a(e).at(1));if(n){let[a]=n(e),c=`[data-${y(a)}]`;r(c,e)?.focus({preventScroll:!1});return}let s=await M({email:e?.email?.value,accepted_terms:e?.consent?.checked??!1});L(e,s),e.reset();let o=r(".w--redirected-checked",e);o&&m(o,"w--redirected-checked")}function L(t,e){let n=!e.succeeded,s=r("[data-wtf-error-optin-email]",t),o=r("[data-wtf-success-optin-email]",t);if(s&&f(s,i,!n),o&&f(o,i,n),n){let c=s&&r("div",s);c&&(c.textContent=e.message);return}let a=o&&r("div",o);a&&(a.textContent=e.data.message),setTimeout(()=>{s&&u(s,i),o&&u(o,i)},8e3)}function p(t){return{message:t,succeeded:!1}}async function M(t){let e="Houve uma falha ao enviar o e-mail, tente novamente em breve!";try{let n=await fetch("https://xef5-44zo-gegm.b2.xano.io/api:KAULUI1C/newsletter",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){let o=await n.json();return p(o?.message??e)}return{succeeded:!0,data:{message:(await n.json()).message}}}catch{return p(e)}}function E(t){return function(e){return[t,e]}}function y(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function w(t,e){let n=t.closest("[data-wtf-wrapper]");n&&f(n,d,e)}function T(t){let e=E("wtfEmail");if(!t)return e(!1);let n=r("[data-wtf-email]",t);if(!n)return e(!1);let s=/^(([\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+(\.[\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+)*)|("[\p{L}\p{N}\s!#$%&'*+\/=?^_`{|}~.-]+"))@(([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*\.)+[a-zA-Z]{2,63}|(\[(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\]))$/u.test(n.value);return w(n,!s),e(s)}function g(t){let e=E("wtfConsent");if(!t)return e(!1);let n=r("[data-wtf-consent]",t);if(!n)return e(!1);let s=n.checked;return w(n,!s),e(s)}let S=["#wf-form-Optin-Form-Mobile","#wf-form-Optin-Form-Desktop"],b=["name","data-name","data-wf-page-id","data-wf-element-id","data-turnstile-sitekey"];for(let t of S){let e=r(t);if(!e)continue;for(let s of b)e.removeAttribute(s);let n=e.parentNode;if(e.remove(),n&&n instanceof HTMLElement){m(n,"w-form"),n.insertAdjacentHTML("afterbegin",e.outerHTML);let s=r(t,n);if(!s)return;l(s,"submit",v,!1),u(n,"w-form"),r('input[type="submit"]',s)?.removeAttribute("disabled")}}document.querySelectorAll("form [data-wtf-email]").forEach(t=>{l(t,"blur",()=>T(t.closest("form")),!1),l(t,"input",function(){let e=t.closest("[data-wtf-wrapper]");e&&m(e,d)},!1)}),document.querySelectorAll("form [data-wtf-consent]").forEach(t=>{l(t,"input",()=>g(t.closest("form")),!1)})})();})();
