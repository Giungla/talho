!function(){"use strict";var e="user_name",t="phone",i="email",s="shipping_cep",r="billing_cep";function a(e){const t=O(document.cookie,"; ").find(t=>{const{name:i}=n(t);return i===e});return!!t&&n(t).value}function n(e){const[t,i]=O(e,"=",2);return{name:t,value:i}}var o="__Host-Talho-Session-Cookie",d="X-Talho-Session",l={redirect_to:encodeURIComponent(location.pathname+location.search)},h={path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+1e3*m*14)};function c(e){const t=e?.headers.get(d);t&&function(e,t,i={}){if(0===D(e))throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof t)||0===D(t.toString()))throw new Error("'setCookie' should receive a valid cookie value");const s=[`${e}=${t}`];G(i?.expires&&i?.expires instanceof Date,s,"expires="+i.expires.toUTCString()),G(i.maxAge,s,`maxAge=${i.maxAge}`),G(i?.sameSite&&"string"==typeof i?.sameSite,s,`SameSite=${i?.sameSite}`),G(i?.path,s,`path=${i?.path}`),G(i?.domain,s,`domain=${i?.domain}`),G(i?.httpOnly,s,"HttpOnly"),G(i?.secure,s,"Secure");const r=s.join("; ");document.cookie=r}(o,t,h)}function u(e,t=!1,i){return c(this),t||this&&401===this.status&&function(e="/acessos/entrar",t=l){location.href=b(e,t)}(),i?.(),{message:e,succeeded:!1}}function p(e,t){return c(this),t?.(),{data:e,succeeded:!0}}function g(e=[],t="GET"){const i="application/json",s=new Headers({Accept:i,"Content-Type":i});for(const[a,o]of e)s.set(a,o);const r=a(o);r&&s.set(d,r);const n=a("__Host-Talho-AuthToken");return n&&s.set("Authorization",n),{method:t,headers:s}}var m=86400,y=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"}),C=null;function v(e,t,i,s){if(e)return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)}function P(e){return i=!e,!!(t=function(e,t=document){return t?t.querySelector(e):C}("[data-wtf-loader]"))&&t.classList.toggle("oculto",i);var t,i}function b(e,t={}){const i=new URL(`${location.protocol}//${location.hostname}`),s=new URL(e,i);for(const[r,a]of Object.entries(t))s.searchParams.set(r,a);return s.toString()}function f(e){return JSON.stringify(e)}function V(e){return e.trim()}function S(e){return e.replace(/\D+/g,"")}function D(e){return e.length}function E(){return/^(([\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+(\.[\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+)*)|("[\p{L}\p{N}\s!#$%&'*+\/=?^_`{|}~.-]+"))@(([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*\.)+[a-zA-Z]{2,63}|(\[(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\]))$/u}function A(){return/^\(\d{2}\)\s\d{4,5}-\d{4}$/}function w(){return/^\d{5}-\d{3}$/}function N(){return/^(\w{2,})(\s+(\w+))+$/}function M(){return/^\d{3}\.\d{3}\.\d{3}-\d{2}$/}function _(){return/^\d{2}\/\d{2}\/\d{4}$/}function $(e,t){return("function"==typeof e?e():e).test(t)}function F(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,Z)}function R(e){return e.replace(/\s{2,}/g," ")}function O(e,t,i){return e.split(t,i)}function I(e){return e===C}function k(e,t=0){const i=Math.pow(10,t);return Math.round(e*i)/i}var H="talho_cart_items",j={AC:"Acre",AL:"Alagoas",AP:"Amapá",AM:"Amazonas",BA:"Bahia",CE:"Ceará",DF:"Distrito Federal",ES:"Espírito Santo",GO:"Goiás",MA:"Maranhão",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Pará",PB:"Paraíba",PR:"Paraná",PE:"Pernambuco",PI:"Piauí",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rondônia",RR:"Roraima",SC:"Santa Catarina",SP:"São Paulo",SE:"Sergipe",TO:"Tocantins"},B=Object.keys(j),T="/";function G(e,t,i){return e?t.push(i):-1}function L(e,t){return e.includes(t)}var x=new WeakMap,z=e=>{const t=x.get(e);t&&(t(),x.delete(e))};function U(...e){return{mounted(t,i){const s=i.arg??"input",r=v(t,s,i=>{if(!i.isTrusted)return;const s=i.target;s.value=e.reduce((e,t)=>t(e),s.value??Z),t.dispatchEvent(X)});x.set(t,r)},unmounted:z}}var X=new Event("input"),q=new Event("blur"),Q=[10,11];document.currentScript?.getAttribute("data-parameter-names");var Z="",J="https://xef5-44zo-gegm.b2.xano.io",{ref:W,createApp:K}=Vue,Y="shipping",ee="billing",te=`${J}/api:79PnTkh_`,ie=`${J}/api:5lp3Lw8X`,se=`${J}/api:24B7O9Aj`,re="ERROR_CODE_NOT_FOUND",ae="ERROR_CODE_BAD_REQUEST",ne={[re]:"O CEP indicado não foi localizado.",[ae]:"Não realizamos entregas na sua região."},oe=document.currentScript?.getAttribute("data-public-key"),de="same",le="diff",he="creditcard";function ce(e,t){return Object.hasOwn(e,t)}function ue(e,t,i){return{field:e,valid:t,...i&&{ignoreIf:i}}}async function pe({cep:e,deliveryMode:t}){const i="Não foi possível encontrar o endereço";if(8!==D(e=S(e)))return u(i);try{const s=await fetch(`${J}/api:jyidAW68/cepaddress/${e}/checkout`,{...g([],"POST"),body:f({deliveryMode:t})});if(!s.ok){const e=await s.json();return u.call(s,e?.code??i)}const r=await s.json();return p.call(s,r)}catch(s){return u(i)}}K({name:"TalhoCheckoutApp",setup:()=>({customerCPF:W(Z),customerMail:W(Z),customerPhone:W(Z),customerBirthdate:W(Z),customerCreditCardCVV:W(Z),customerCreditCardDate:W(Z),customerCreditCardNumber:W(Z),customerCreditCardHolder:W(Z),billingCEP:W(Z),billingAddress:W(Z),billingNumber:W(Z),billingComplement:W(Z),billingNeighborhood:W(Z),billingCity:W(Z),billingState:W(Z),shippingRecipient:W(Z),shippingCEP:W(Z),shippingAddress:W(Z),shippingNumber:W(Z),shippingComplement:W(Z),shippingNeighborhood:W(Z),shippingCity:W(Z),shippingState:W(Z),couponCode:W(Z),customerMailElement:W(C),customerCPFElement:W(C),customerPhoneElement:W(C),customerBirthdateElement:W(C),paymentMethodMessageElement:W(C),customerCreditCardCVVElement:W(C),customerCreditCardDateElement:W(C),customerCreditCardNumberElement:W(C),customerCreditCardHolderElement:W(C),billingCEPElement:W(C),billingAddressElement:W(C),billingNumberElement:W(C),billingNeighborhoodElement:W(C),billingCityElement:W(C),billingStateElement:W(C),deliveryPlaceMessageElement:W(C),shippingRecipientElement:W(C),shippingCEPElement:W(C),shippingAddressElement:W(C),shippingNumberElement:W(C),shippingNeighborhoodElement:W(C),shippingCityElement:W(C),shippingStateElement:W(C),deliveryDateMessageElement:W(C),deliveryHourMessageElement:W(C),installmentsMessageElement:W(C),couponCodeElement:W(C),deliveryPlaceAddressErrorMessage:W(C),deliveryBillingAddressErrorMessage:W(C),deliveryShippingAddressErrorMessage:W(C)}),data:()=>({user:C,errorMessage:C,hasPendingPayment:!1,isSubmitted:!1,productlist:C,visitedFields:[],selectedPayment:C,availablePayments:[{label:"Cartão de crédito",method:he},{label:"PIX",method:"pix"}],deliveryPlace:C,deliveryPlaces:[{token:de,label:"Mesmo endereço de cobrança do cartão"},{token:le,label:"Entregar em um endereço diferente"}],installment:C,selectedInstallment:C,isCouponPending:!1,coupon:C,isPagSeguroLoaded:!1,deliveryDate:C,deliveryHour:C,isDeliveryLoading:!1,deliveryPrice:C,deliveryOptions:C,priorityTax:C,subsidy:C,selectedBillingAddressId:C,selectedShippingAddressId:C}),created(){Promise.allSettled([this.getLoggedInUser().then(e=>{e.succeeded&&(this.user=e.data)}),this.refreshCart().then(()=>P(!1))]),window.addEventListener("storage",e=>{e.key===H&&this.refreshCart()})},methods:{setPreviousAddress(e,t){const i=this.user?.address_list.find(t=>t.id===e);if(!i)return;const{id:s,cep:r,address:a,number:n,city:o,complement:d,state:l,neighborhood:h}=i;this[`${t}CEP`]=r,this[`${t}Address`]=a,this[`${t}Number`]=n,this[`${t}Complement`]=d,this[`${t}City`]=o,this[`${t}State`]=l,this[`${t}Neighborhood`]=h,t!==Y?t===ee&&(this.selectedBillingAddressId=s):this.selectedShippingAddressId=s},async getLoggedInUser(){const e="Falha na captura do usuário";try{const t=await fetch(`${J}/api:TJEuMepe/user/checkout`,{...g([])});if(!t.ok){const i=await t.json();return u.call(t,i?.message??e,!0)}const i=await t.json();return p.call(t,i)}catch(t){return u(e)}},async getCart(){const e="Falha ao capturar os produtos";try{const t=await fetch(`${te}/cart/get`,{...g([])});if(!t.ok){const i=await t.json();return u.call(t,i?.message??e)}const i=await t.json();return p.call(t,i)}catch(t){return u(e)}},async refreshCart(){if(!this.hasPendingPayment)return this.getCart().then(e=>{e.succeeded&&(0!==D(e.data.items)?this.productlist=e.data:location.href=b("/",{reason:"empty_cart"}))})},async getInstallments(){const e="Falha ao capturar o parcelamento";try{const t=await fetch(`${ie}/calculatefees`,{...g([],"POST"),body:f({amount:this.getOrderPrice,cardBin:this.customerCreditCardNumber.replace(/\D+/g,Z).slice(0,8)})});if(!t.ok){const i=await t.json();return u.call(t,i?.message??e)}const i=await t.json();return p.call(t,i)}catch(t){return u(e)}},async refreshInstallments(){if(!this.isCreditCard||!this.isCreditCardGroupValid||this.getCreditCardToken.hasErrors)return;this.installment=C,this.selectedInstallment=C;const e=await this.getInstallments();e.succeeded&&(this.installment=e.data)},setSelectedInstallmentsCount(e){var t;this.selectedInstallment!==e&&(this.selectedInstallment=(t=e,Math.max(1,Math.min(2,t))))},setSelectedPaymentMethod(e){this.selectedPayment!==e&&(this.hasDeliveryDates||this.handleDeliveryOptions(),e!==he?this.clearCreditCardData():this.isPagSeguroLoaded||this.loadPagSeguro(),this.deliveryPlace=C,this.selectedPayment=e)},setVisitedField(e){return G(!L(this.visitedFields,e),this.visitedFields,e)},hasVisitRegistry(e){return L(this.visitedFields,e)},async handlePayment(e){if(e.preventDefault(),this.hasPendingPayment||this.isDeliveryLoading)return;if(this.triggerValidations(),!this.isSubmitted)return this.isSubmitted=!0,void Vue.nextTick(()=>this.handlePayment(e));const t=this.firstInvalidField;if(t)return i={block:"center",behavior:"smooth"},t.field.scrollIntoView(i),void("INPUT"===t.field.tagName&&setTimeout(()=>t.field.focus(),500));var i;this.hasPendingPayment=!P(!0);const s=await this.handlePostPayment(this.selectedPayment);if(!s.succeeded)return this.errorMessage=s.message,void(this.hasPendingPayment=!P(!1));const r={pix:"pix",creditcard:"confirmacao-do-pedido"}[this.selectedPayment];location.href=b(["/pagamento",r].join(T),{order:s.data.transactionid}),localStorage.removeItem(H)},async handlePostPayment(e){const t="Falha ao gerar o pedido";try{const i=await fetch(`${ie}/payment/process/${e}`,{...g([],"POST"),body:f({...this.getOrderBaseData,customer:{...this.getParsedCustomer,...this.getParsedAddresses},...e===he&&this.creditCardAdditionalInfo})});if(!i.ok){const e=await i.json();return u.call(i,e?.message??t)}const s=await i.json();return p.call(i,s)}catch(i){return u(t)}},triggerValidations(){const e=this.notIgnoredFields;for(const{field:t}of e)t?.dispatchEvent(q)},feedAddress(e,{uf:t,bairro:i,logradouro:s,localidade:r}){if(e===ee)return this.billingAddress=s,this.billingNeighborhood=i,this.billingCity=r,void(this.billingState=t);this.shippingAddress=s,this.shippingNeighborhood=i,this.shippingCity=r,this.shippingState=t},setDeliveryPlace(e){this.deliveryPlace!==e&&(e===de&&$(/^\d{5}\-\d{3}$/,this.billingCEP)&&this.isBillingAddressGroupValid?pe({cep:this.billingCEP,deliveryMode:!0}).then(e=>{e.succeeded||(this.deliveryPlaceAddressErrorMessage=ne?.[e.message]??e.message)}):this.deliveryPlaceAddressErrorMessage=C,this.deliveryPlace=e)},async captureAddress(e,t,i){if(!$(/^\d{5}-\d{3}$/,t)||t===i)return!1;const s=`${e}CEP`,r=await pe({cep:t,deliveryMode:e===Y});if(!r.succeeded){const{message:t}=r;return this[s]=Z,this.setVisitedField(s),this.deliveryShippingAddressErrorMessage=e===Y&&t!==re?ne?.[t]??ne[ae]:C,this.deliveryBillingAddressErrorMessage=e===ee&&t!==re?ne?.[t]??ne[ae]:C,!1}switch(e){case Y:this.deliveryShippingAddressErrorMessage=C;break;case ee:this.deliveryBillingAddressErrorMessage=C}return this.feedAddress(e,r.data),!0},async captureCoupon(){const e="Falha ao capturar o cupom indicado";try{const t=await fetch(`${ie}/get_coupon`,{...g([],"POST"),body:f({verify_amount:!0,coupon_code:this.couponCode,cpf:V(this.customerCPF),has_subsidy:this.subsidy?.has??!1,delivery_cep:this.getParsedAddresses.shippingaddress.zipPostalCode,has_selected_delivery:!I(this.deliveryHour)&&!I(this.deliveryDate)})});if(!t.ok){const i=await t.json();return u.call(t,i?.message??e)}const i=await t.json();return p.call(t,i)}catch(t){return u(e)}},async handleSearchCoupon(){if(this.isCouponPending)return;this.isCouponPending=!0;const e=await this.captureCoupon();this.isCouponPending=!1,e.succeeded?this.coupon=e.data:this.coupon={error:!0,message:e.message}},handleRemoveCoupon(){this.coupon=C,this.couponCode=Z},loadPagSeguro(){const e=document.createElement("script");e.async=!0,e.src="https://assets.pagseguro.com.br/checkout-sdk-js/rc/dist/browser/pagseguro.min.js",e.onload=()=>{this.isPagSeguroLoaded=!0},document.head.appendChild(e)},clearCreditCardData(){this.customerCreditCardHolder=Z,this.customerCreditCardNumber=Z,this.customerCreditCardDate=Z,this.customerCreditCardCVV=Z},async handleDeliveryOptions(){const e=await this.captureDeliveryOptions();e.succeeded&&(this.deliveryOptions=e.data)},async captureDeliveryOptions(){const e="Falha ao capturar as opções de entrega";try{const t=await fetch(`${se}/delivery`,{...g([])});if(!t.ok){const i=await t.json();return u.call(t,i?.message??e)}const i=await t.json();return p.call(t,i)}catch(t){return u(e)}},setDeliveryDate(e){const t=this.deliveryOptions?.dates?.find(({shift_days:t})=>t===e);t&&this.deliveryDate!==e&&(this.deliveryDate=t.shift_days,this.deliveryHour=C,this.deliveryPrice=C)},setDeliveryHour(e){this.deliveryHour!==e&&0!==this.getSelectedDateDetails?.periods.periods_count&&(this.deliveryHour=e)},async handleDeliveryQuotation(e){this.isDeliveryLoading=!0;const t=await this.captureDeliveryQuotation(e);if(!t.succeeded)return;const{total:i,validator:s}=t.data;this.deliveryPrice={value:i,validator:s},this.isDeliveryLoading=!1},async captureDeliveryQuotation(e){const t="Falha ao gerar uma cotação";try{const i=await fetch(`${J}/api:i6etHc7G/site/checkout-delivery`,{...g([],"POST"),signal:e.signal,body:f(this.quotationPayload)});if(!i.ok){const e=await i.json();return u.call(i,e?.message??t)}const s=await i.json();return p.call(i,s)}catch(i){return u(t)}},async handleSubsidy(){const e=this.getParsedAddresses.shippingaddress.zipPostalCode;if(!$(/^\d{5}\-\d{3}$/,e))return;const t=await this.verifyForSubsidy(S(e));this.subsidy=t.succeeded?t.data:C},async verifyForSubsidy(e){const t="Houve uma falha na verificação";try{const i=await fetch(`${se}/delivery/${e}/subsidy`,{...g([])});if(!i.ok){const e=await i.json();return u.call(i,e?.message??t)}const s=await i.json();return p.call(i,s)}catch(i){return u(t)}},async createAbandonmentCart(e){const t="Houve uma ao gerar o carrinho";try{const i=await fetch(`${J}/api:EuHZTAGr/abandonment/post`,{...g([],"POST"),keepalive:!0,priority:"high",body:f(e)});if(!i.ok){const e=await i.json();return u.call(i,e?.message??t)}const s=await i.json();return p.call(i,s)}catch(i){return u(t)}}},computed:{hasSelectedPaymentMethod(){return!I(this.selectedPayment)},isCreditCard(){return this.selectedPayment===he},getOrderSubtotal(){return this.productlist?.order_price??0},getOrderSubtotalFormatted(){return y.format(this.getOrderSubtotal)},getOrderPrice(){const e=[this.getOrderSubtotal,this.getShippingPrice,this.priorityFee,this.subsidyDiscountPrice,this.getCouponDiscountPrice];return G(this.hasPIXDiscount,e,this.PIXDiscountPrice),k(e.reduce((e,t)=>e+t,0),2)},getOrderPriceFormatted(){return y.format(this.getOrderPrice)},getShippingPrice(){return this.hasFreeShippingByCartPrice||I(this.deliveryPrice)?0:this.deliveryPrice.value/100},getShippingPriceFormatted(){return this.hasFreeShippingByCartPrice?"Frete grátis":y.format(this.getShippingPrice)},getCouponDiscountPrice(){if(this.hasNullCoupon||this.hasInvalidCoupon)return 0;const{value:e,is_percentage:t}=this.coupon,i=this.getParsedPriceForApplyDiscount;let s=t?Math.min(e/100,1)*(-1*i):-1*Math.min(i,e);return Math.round(100*Math.abs(s))/100*Math.sign(s)},getCouponDiscountPriceFormatted(){return y.format(this.getCouponDiscountPrice)},getParsedPriceForApplyDiscount(){if(this.hasNullCoupon||this.hasInvalidCoupon)return 0;const{cupom_type:e}=this.coupon,{getShippingPrice:t}=this;return e===Y&&this.hasSubsidy?Math.max(t+this.subsidyDiscountPrice,0):{product_id:0,shipping:t,subtotal:this.getOrderSubtotal}[e]},getParsedProducts(){const e=this.productlist?.items;return e?e.map(({name:e,imageUrl:t,quantity:i,price:s})=>({name:e,image:t,quantity:i,price:y.format(s),finalPrice:y.format(s*i),imageStyle:`background-image: url('${t}')`})):[]},isPersonalDataValid(){return!this.isSubmitted||[this.customerMailValidation.valid,this.customerBirthdateValidation.valid,this.customerCPFValidation.valid,this.customerPhoneValidation.valid].every(Boolean)},customerMailValidation(){return ue(this.customerMailElement,!this.hasVisitRegistry("customerMail")||$(E,this.customerMail))},customerBirthdateValidation(){const{customerBirthdate:e}=this;return ue(this.customerBirthdateElement,!this.hasVisitRegistry("customerBirthdate")||$(_,e)&&function(e){const[t,i,s]=O(e,T);return"Invalid Date"!==new Date(`${s}-${i}-${t}T00:00:00`).toString()}(e))},customerCPFValidation(){const{customerCPF:e}=this;return ue(this.customerCPFElement,!this.hasVisitRegistry("customerCPF")||$(M,this.customerCPF)&&function(e){if(11!==D(e=S(e))||$(/^(\d)\1{10}$/,e))return!1;const t=Q.map((t,i)=>{const s=i?10:9,r=11-[...e.slice(0,s)].map(Number).reduce((e,i,s)=>e+i*(t-s),0)%11;return r>9?0:r});return e.endsWith(t.join(Z))}(e))},customerPhoneValidation(){return ue(this.customerPhoneElement,!this.hasVisitRegistry("customerPhone")||$(A,this.customerPhone))},paymentMethodValidation(){return ue(this.paymentMethodMessageElement,!I(this.selectedPayment))},customerCreditCardHolderValidation(){return ue(this.customerCreditCardHolderElement,!this.hasVisitRegistry("customerCreditCardHolder")||$(N,R(F(V(this.customerCreditCardHolder)))),!this.isCreditCard)},customerCreditCardNumberValidation(){return ue(this.customerCreditCardNumberElement,!this.hasVisitRegistry("customerCreditCardNumber")||$(/^(\d{4})(\s\d{4}){2}(\s\d{3,4})$/,V(this.customerCreditCardNumber)),!this.isCreditCard)},customerCreditCardDateValidation(){const{customerCreditCardDate:e}=this;return ue(this.customerCreditCardDateElement,!this.hasVisitRegistry("customerCreditCardDate")||$(/^(1[012]|0[1-9])\/\d{2}$/,e)&&function(e){const t=O(e,T);if(2!==D(t))return!1;const[i,s]=t,r=parseInt(i,10),a=parseInt(s,10);if(isNaN(r)||isNaN(a)||r<1||r>12)return!1;const n=new Date;return new Date(2e3+(a<100?a:0),r,0,23,59,59)>n}(e),!this.isCreditCard)},customerCreditCardCVVValidation(){return ue(this.customerCreditCardCVVElement,!this.hasVisitRegistry("customerCreditCardCVV")||$(/^\d{3,4}$/,this.customerCreditCardCVV),!this.isCreditCard)},isCreditCardGroupValid(){return[this.customerCreditCardHolderValidation.valid,this.customerCreditCardNumberValidation.valid,this.customerCreditCardDateValidation.valid,this.customerCreditCardCVVValidation.valid].every(Boolean)},billingCEPValidation(){return ue(this.billingCEPElement,!this.hasVisitRegistry("billingCEP")||$(w,this.billingCEP),!this.isCreditCard)},billingAddressValidation(){return ue(this.billingAddressElement,!this.hasVisitRegistry("billingAddress")||D(V(this.billingAddress))>2,!this.isCreditCard)},billingNumberValidation(){return ue(this.billingNumberElement,!this.hasVisitRegistry("billingNumber")||D(this.billingNumber)>0,!this.isCreditCard)},billingNeighborhoodValidation(){return ue(this.billingNeighborhoodElement,!this.hasVisitRegistry("billingNeighborhood")||D(this.billingNeighborhood)>0,!this.isCreditCard)},billingCityValidation(){return ue(this.billingCityElement,!this.hasVisitRegistry("billingCity")||D(this.billingCity)>2,!this.isCreditCard)},billingStateValidation(){return ue(this.billingStateElement,!this.hasVisitRegistry("billingState")||L(B,this.billingState),!this.isCreditCard)},isBillingAddressGroupValid(){return I(this.deliveryBillingAddressErrorMessage)&&[this.billingCEPValidation,this.billingAddressValidation,this.billingNumberValidation,this.billingNeighborhoodValidation,this.billingCityValidation,this.billingStateValidation].every(e=>e.valid)},deliveryPlaceValidation(){return ue(this.deliveryPlaceMessageElement,this.hasSelectedAddress&&I(this.deliveryPlaceAddressErrorMessage),!this.isCreditCard)},shippingRecipientValidation(){return ue(this.shippingRecipientElement,!this.hasVisitRegistry("shippingRecipient")||$(/^(\w{2,})(\s+(\w+))+$/,R(F(V(this.shippingRecipient)))),!this.shouldValidateShippingAddress)},shippingCEPValidation(){return ue(this.shippingCEPElement,!this.hasVisitRegistry("shippingCEP")||$(w,this.shippingCEP),!this.shouldValidateShippingAddress)},shippingAddressValidation(){return ue(this.shippingAddressElement,!this.hasVisitRegistry("shippingAddress")||D(V(this.shippingAddress))>2,!this.shouldValidateShippingAddress)},shippingNumberValidation(){return ue(this.shippingNumberElement,!this.hasVisitRegistry("shippingNumber")||D(V(this.shippingNumber))>0,!this.shouldValidateShippingAddress)},shippingNeighborhoodValidation(){return ue(this.shippingNeighborhoodElement,!this.hasVisitRegistry("shippingNeighborhood")||D(V(this.shippingNeighborhood))>3,!this.shouldValidateShippingAddress)},shippingCityValidation(){return ue(this.shippingCityElement,!this.hasVisitRegistry("shippingCity")||D(V(this.shippingCity))>2,!this.shouldValidateShippingAddress)},shippingStateValidation(){return ue(this.shippingStateElement,!this.hasVisitRegistry("shippingState")||L(B,this.shippingState),!this.shouldValidateShippingAddress)},isShippingAddressGroupValid(){return I(this.deliveryShippingAddressErrorMessage)&&[this.shippingCEPValidation,this.shippingAddressValidation,this.shippingNumberValidation,this.shippingNeighborhoodValidation,this.shippingCityValidation,this.shippingStateValidation].every(e=>e.valid)},deliveryDatesGroupValidation(){return ue(this.deliveryDateMessageElement,!I(this.deliveryDate),!this.paymentMethodValidation.valid)},deliveryHoursGroupValidation(){return ue(this.deliveryHourMessageElement,!I(this.deliveryHour),!this.deliveryDatesGroupValidation.valid)},installmentGroupValidation(){return ue(this.installmentsMessageElement,!I(this.selectedInstallment),!this.isCreditCard||!this.paymentMethodValidation.valid)},notIgnoredFields(){return[this.customerMailValidation,this.customerBirthdateValidation,this.customerCPFValidation,this.customerPhoneValidation,this.paymentMethodValidation,this.customerCreditCardHolderValidation,this.customerCreditCardNumberValidation,this.customerCreditCardDateValidation,this.customerCreditCardCVVValidation,this.billingCEPValidation,this.billingAddressValidation,this.billingNumberValidation,this.billingNeighborhoodValidation,this.billingCityValidation,this.billingStateValidation,this.deliveryPlaceValidation,this.shippingRecipientValidation,this.shippingCEPValidation,this.shippingAddressValidation,this.shippingNumberValidation,this.shippingNeighborhoodValidation,this.shippingCityValidation,this.shippingStateValidation,this.deliveryDatesGroupValidation,this.deliveryHoursGroupValidation,this.installmentGroupValidation].filter(({ignoreIf:e})=>L([!1,void 0],e))},firstInvalidField(){return this.notIgnoredFields.find(({valid:e})=>!e)??C},hasSelectedAddress(){return!I(this.deliveryPlace)},isSameAddress(){return this.deliveryPlace===de},isDiffAddress(){return this.deliveryPlace===le},shouldValidateShippingAddress(){return!this.isCreditCard||this.showShippingAddressSelector&&!this.isSameAddress},showShippingAddressSelector(){return!this.isCreditCard||this.isCreditCard&&this.hasSelectedAddress},getParsedAddresses(){const e=e=>j?.[e]??Z,t=e=>V(e).replace(/-+/g,Z)||"N/A",i={zipPostalCode:this.shippingCEP,street:this.shippingAddress,number:this.shippingNumber,complement:t(this.shippingComplement),neighbourhood:this.shippingNeighborhood,city:this.shippingCity,state:e(this.shippingState)},s={zipPostalCode:this.billingCEP,street:this.billingAddress,number:this.billingNumber,complement:t(this.billingComplement),neighbourhood:this.billingNeighborhood,city:this.billingCity,state:e(this.billingState)};return this.isCreditCard?{billingaddress:s,shippingaddress:this.isSameAddress?s:i}:{shippingaddress:i,billingaddress:i}},getParsedCustomer(){return{name:this.isCreditCard?this.customerCreditCardHolder:this.shippingRecipient,cpf:this.customerCPF,email:this.customerMail,birthDate:this.customerBirthdate,phone:this.customerPhone}},getParsedDeliveryData(){const{getSelectedHourDetails:e,getSelectedDateDetails:t}=this;return{delivery_hour:{value:this.deliveryHour,validator:e?.validator,has_priority:e?.has_priority},delivery_date:{value:this.deliveryDate,validator:t?.validator,has_priority:t?.has_priority}}},getOrderBaseData(){return{user_id:C,coupon_code:this.hasInvalidCoupon||this.hasNullCoupon?C:this.coupon?.code,delivery:{...this.getParsedDeliveryData,delivery_price:this.deliveryPrice}}},showInstallmentSection(){return this.isCreditCard&&D(this.installment??[])>0},getParsedInstallments(){const{installment:e}=this;return e?e.map(({installments:e,installment_value:t})=>({installments:e,installment_value:y.format(t)})):[]},hasNullCoupon(){return I(this.coupon)},hasAppliedCoupon(){return ce(this.coupon??{},"cupom_type")},hasInvalidCoupon(){return ce(this.coupon??{},"error")},isCouponCodeValid(){const{couponCode:e}=this;return D(V(e))>4&&!$(/[^A-Z\d]/,e)},getCreditCardToken(){if(!this.isPagSeguroLoaded)return{errors:[],hasErrors:!1,encryptedCard:C};const[e,t]=O(this.customerCreditCardDate,T);return window.PagSeguro.encryptCard({expMonth:e,expYear:"20".concat(t),holder:this.customerCreditCardHolder,securityCode:this.customerCreditCardCVV,number:S(this.customerCreditCardNumber),publicKey:oe})},hasDeliveryDates(){const{deliveryOptions:e}=this;return t=e?.dates,Array.isArray(t)&&D(e?.dates)>0;var t},hasDeliveryHour(){return!I(this.deliveryDate)&&D(this.getParsedDeliveryHours)>0},getParsedDeliveryHours(){return!this.hasDeliveryDates||I(this.getSelectedDateDetails)?[]:this.getSelectedDateDetails.periods.hours.map(({label:e,hour:t})=>({hour:t,label:e}))},quotationPayload(){if([this.deliveryDate,this.deliveryHour].some(e=>I(e)))return!1;const e=this.getParsedAddresses.shippingaddress.zipPostalCode;if(!$(/^\d{5}\-\d{3}$/,e))return!1;const{delivery_hour:t,delivery_date:i}=this.getParsedDeliveryData;return{cep:e,delivery_hour:t,delivery_date:i}},getParsedDeliveryDates(){if(I(this.deliveryOptions))return[];const e=this.deliveryDate;return this.deliveryOptions.dates.map(({label:t,shift_days:i})=>({label:t,shift_days:i,selected:e===i}))},getSelectedDateDetails(){if(!this.deliveryDate===C)return C;const e=this.deliveryOptions?.dates.find(({shift_days:e})=>e===this.deliveryDate);return e||C},getSelectedHourDetails(){return this.getSelectedDateDetails&&this.deliveryHour?this.getSelectedDateDetails.periods.hours.find(({hour:e})=>e===this.deliveryHour)??C:C},hasPriorityFee(){return!!(this.hasDeliveryHour&&this.getSelectedDateDetails&&this.getSelectedHourDetails)&&this.getSelectedDateDetails.has_priority&&this.getSelectedHourDetails.has_priority},priorityFee(){return this.hasPriorityFee?this.deliveryOptions?.priority_fee:0},priorityFeeFormatted(){return y.format(this.priorityFee)},hasSubsidy(){return!0===this.subsidy?.has&&this.getShippingPrice>0},subsidyDiscountPrice(){return!0===this.subsidy?.has?-1*Math.min(this.subsidy.value,this.getShippingPrice):0},subsidyDiscountPriceFormatted(){return y.format(this.subsidyDiscountPrice)},hasFreeShippingByCartPrice(){return this.getOrderSubtotal>=400},creditCardAdditionalInfo(){const{installment:e,isSameAddress:t,getCreditCardToken:i,selectedInstallment:s,customerCreditCardHolder:r}=this;return{is_same_address:t,credit_card_info:{holderName:r,creditCardToken:i.encryptedCard??Z,numberOfPayments:s,installmentValue:e?.find(({installments:e})=>e===s)?.installment_value??0}}},hasPIXDiscount(){return"pix"===this.selectedPayment&&(this.deliveryOptions?.pix_discount??0)>0},PIXDiscountPrice(){return this.hasPIXDiscount?k((this.deliveryOptions?.pix_discount??0)/100*-this.getOrderSubtotal,2):0},PIXDiscountPriceFormatted(){return y.format(this.PIXDiscountPrice)},userAddresses(){const e=this.user;return e&&0!==D(e.address_list)?e.address_list.map(({address:e,number:t,cep:i,...s})=>({...s,address:e,number:t,cep:i,complete:`${e}, ${t} ${i}`})):[]}},watch:{billingCEP(e,t){this.captureAddress(ee,e,t).then(e=>{e&&(this.deliveryPlaceAddressErrorMessage=C,this.deliveryPlace===de&&(this.deliveryPlace=C))})},shippingCEP(e,t){this.deliveryDate=C,this.deliveryHour=C,this.captureAddress(Y,e,t)},getOrderPrice:{immediate:!0,handler:function(){this.refreshInstallments()}},getCreditCardToken(e){e.hasErrors||this.refreshInstallments()},quotationPayload(e,t,i){if(!e)return;const{cep:s,delivery_hour:r,delivery_date:a}=e;if(!$(/^\d{5}\-\d{3}$/,s))return;const n=new AbortController;if(!t)return this.handleDeliveryQuotation(n),i(()=>n.abort());const{cep:o,delivery_date:d,delivery_hour:l}=t;return this.handleDeliveryQuotation(n),i(()=>n.abort())},getParsedAddresses(e,t){e&&t&&e.shippingaddress.zipPostalCode!==t.shippingaddress.zipPostalCode&&$(/^\d{5}\-\d{3}$/,e.shippingaddress.zipPostalCode)&&(this.isCreditCard&&I(this.deliveryPlace)||this.handleSubsidy())},user(e){e&&(this.customerPhone=e.telephone??"",this.customerCPF=e.cpf??"",this.customerBirthdate=e.birthday?.split("-").reverse().join("/")??"",this.customerMail=e.email??"")}},directives:{trim:U(V),removeDuplicatedSpaces:U(R),maskDate:U(S,function(e){return e.replace(/^(\d{0,2})(\d{0,2})(\d{0,4})/,(e,t,i,s)=>[t,i,s].filter(Boolean).join(T))}),maskCpf:U(S,function(e){return e.replace(/^(\d{0,3})(\d{0,3})(\d{0,3})(\d{0,2})/,(e,t,i,s,r)=>{const a=[];return G(t,a,`${t}`),G(i,a,`.${i}`),G(s,a,`.${s}`),G(r,a,`-${r}`),a.join(Z)})}),maskPhone:U(S,function(e){const t=(e,t,i,s)=>{const r=[];return G(t,r,`(${t}`),G(i,r,`) ${i}`),G(s,r,`-${s}`),r.join(Z)};return D(e)<11?e.replace(/^(\d{0,2})(\d{0,4})(\d{0,4})/,t):e.replace(/^(\d{0,2})(\d{0,5})(\d{0,4})/,t)}),maskCreditCard:U(S,function(e){return e.replace(/^(\d{0,4})(\d{0,4})(\d{0,4})(\d{0,4})/,(e,t,i,s,r)=>{const a=[];for(const n of[t,i,s,r])G(n,a,n);return a.join(" ")})}),maskCreditCardDate:U(S,function(e){return e.replace(/^(\d{0,2})(\d{0,2})/,(e,t,i)=>{const s=[];for(const r of[t,i])G(r,s,r);return s.join(T)})}),maskNumberOnly:U(S),maskCep:U(S,function(e){return e.replace(/^(\d{0,5})(\d{0,3})/,(e,t,i)=>{const s=[];for(const r of[t,i])G(r,s,r);return s.join("-")})}),upperCase:U(function(e){return e.toUpperCase()}),normalize:U(F),visitedField:{mounted(e,{value:t,instance:i}){const s=v(e,"blur",()=>{i.setVisitedField(t),x.delete(e)},{once:!0});x.set(e,s)},unmounted:z},captureAbandonment:{mounted(a,n){x.set(a,v(a,"change",o=>{if(!o.isTrusted||!n.arg)return;const d=n.arg,l={[i]:E,[t]:A,[e]:N,[s]:w,[r]:w},h=V(a.value),c=l?.[d]??null,u=d===i?R(F(h)):h;c&&$(c,u)&&n.instance.createAbandonmentCart({field:d,value:h})}))},unmounted:z}}}).mount("#fechamentodopedido"),window.addEventListener("pageshow",e=>{e.persisted&&window.location.reload()})}();