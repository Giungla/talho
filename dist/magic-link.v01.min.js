(()=>{let n="__Host-Talho-AuthToken",i="/area-do-usuario/pedidos-de-compra",s="; ";function c(e,t=document){return t.querySelector(e)}function a(e){var[e,t]=e.split("=");return{name:e,value:t}}function e(){var t,e;return t=n,!!(e=document.cookie.split(s).find(e=>{e=a(e).name;return e===t}))&&a(e).value}if(e())location.href=i;else{var t=new URLSearchParams(location.search);let r=c("[data-wtf-recover-access-general-error-message]");t=t.get("token");function o(e){return{message:e,succeeded:!1}}t&&(async e=>{var t="Houve uma falha ao validar o token. Por favor, tente novamente mais tarde.";try{var a=await fetch("https://xef5-44zo-gegm.b2.xano.io/api:uImEuFxO/auth/magic-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({magic_token:e})});return a.ok?{data:await a.json(),succeeded:!0}:o((await a.json())?.message??t)}catch(e){return o(t)}})(t).then(e=>{if(!e.succeeded)o=r&&c("div",r),t=r,a=["oculto"],t&&t.classList.remove(...a),o&&(o.textContent=e.message);else{var t=n,a=e.data.authToken,o={path:"/",secure:!0,sameSite:"Strict",expires:new Date(e.data.expiration)};if(0===t.length)throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof a)||0===a.toString().length)throw new Error("'setCookie' should receive a valid cookie value");t=[t+"="+a],o?.expires&&o?.expires instanceof Date&&t.push("expires="+o.expires.toUTCString()),o?.sameSite&&"string"==typeof o?.sameSite&&t.push("SameSite="+o?.sameSite),o?.path&&t.push("path="+o?.path),o?.domain&&t.push("domain="+o?.path),o?.httpOnly&&t.push("HttpOnly"),o?.secure&&t.push("Secure"),a=t.join(s),document.cookie=a,location.href=i}})}})();