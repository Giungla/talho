(()=>{let s="oculto",i="https://xef5-44zo-gegm.b2.xano.io/api:79PnTkh_",d=new Proxy({quantity:1,product:null,selectedVariation:null},{get(a,e){switch(e){case"variationsCount":return a.product?.variations.length??0;case"hasPriceDifference":var{price:r,full_price:t}=d.prices;return r!==t;case"prices":{let{product:e,selectedVariation:t}=a;return e&&d.hasSelectedVariation?(r=e.variations.find(e=>e.id===t))?u(r.price,r.full_price):u():u()}case"BRLPrices":var{price:t,full_price:r}=d.prices;return u(c.format(t),c.format(r));case"computedFinalPrices":var{quantity:t,prices:r}=d,i=r.price*t,r=r.full_price*t;return{price:{price:i,full_price:r},currency:{price:c.format(i),full_price:c.format(r)}};case"hasSelectedVariation":return null!==a.selectedVariation;default:return Reflect.get(a,e)}},set(e,t,a){var r,i,e=Reflect.set(e,t,a);switch(t){case"quantity":q(p,String(a??1)),(l=d.product)&&d.hasSelectedVariation&&(l=e=>w("[data-wtf-price-value]",e),{BRLPrices:n,hasPriceDifference:r,computedFinalPrices:i}=d,q(l(f),n.price),q(l(y),n.full_price),q(l(h),i.currency.price),k(f,s,!r),k(y,s,!r));break;case"selectedVariation":if(m&&v&&d.product){var{selectedVariation:c,product:n}=d,o=document.createDocumentFragment();for(let e of n?.variations){var u=document.createElement("div");((e,t)=>{e&&e.classList.add(...t)})(u,["text-block"]),k(u,"selecionado",c===e.id),q(u,e.label),g(u,"click",()=>{var t;t=e.id,d.product?.variations.some(({id:e})=>e===t)&&(d.selectedVariation=t)}),o.appendChild(u)}m.replaceChildren(o)}Reflect.set(d,"quantity",1);break;case"product":var l=a;Reflect.set(d,"selectedVariation",l?.variations[0].id)}return e}}),e=w("[data-wtf-quantity-minus]"),t=w("[data-wtf-quantity-plus]"),p=w("[data-wtf-quantity-value]"),f=w("[data-wtf-price]"),y=w("[data-wtf-full-price]"),h=w("[data-wtf-total]"),m=w("[data-wtf-sku-list]"),v=w("[data-wtf-sku-item]"),a=w("[data-wtf-comprar]"),c=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});function w(e,t=document){return t?t.querySelector(e):null}function g(e,t,a,r){e&&e.addEventListener(t,a,r)}function q(e,t){e&&(e.textContent=t)}function k(e,t,a){e&&e.classList.toggle(t,a)}function n(e){return{message:e,succeeded:!1}}function o(e){return{data:e,succeeded:!0}}function u(e=0,t=0){return{price:e,full_price:t}}function r(e){e+=d.quantity,e=Math.max(1,Math.min(e,10));e!==d.quantity&&(d.quantity=e)}async function l(e){e.preventDefault();var{quantity:e,product:t,selectedVariation:a}=d;if(a&&t){e=await(async e=>{var t="Falha ao adicionar o produto";try{var a=await fetch(i+"/cart/handle",{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({item:e,operation:"add"})});return a.ok?o(await a.json()):n((await a.json())?.message??t)}catch(e){return n("[CATCH] "+t)}})({quantity:e,sku_id:a,reference_id:t.slug});if(!e.succeeded)return alert("A adição falhou");d.quantity=1;var r,a=w("#carrinho-flutuante");t="style",(r=a)&&r.removeAttribute(t),r=a,t=[s],r&&r.classList.remove(...t),console.log(e.data)}}(async()=>{var t="Houve uma falha ao capturar o produto";try{var e=location.pathname.split("/"),a=await fetch(i+"/product/single-product-page",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({quantity:1,reference_id:e[e.length-1]})});return a.ok?o(await a.json()):n((await a.json())?.message??t)}catch(e){return n(t)}})().then(e=>{e.succeeded&&(d.product=e.data)}).then(()=>{g(t,"click",()=>r(1)),g(e,"click",()=>r(-1)),g(a,"click",l)})})();