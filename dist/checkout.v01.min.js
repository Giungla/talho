(()=>{let{ref:e,createApp:t,defineComponent:r}=Vue,a={headers:{Accept:"application/json","Content-Type":"application/json"}},n=new WeakMap,d=new Event("input"),u="creditcard",i=(u,new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"}));function s(e){return e.replace(/\D+/g,"")}function o(...r){return{mounted(t){var e=((e,t,r,a)=>{if(e)return e.addEventListener(t,r,a),()=>e.removeEventListener(t,r,a)})(t,"input",e=>{e.isTrusted&&((e=e.target).value=r.reduce((e,t)=>t(e),e.value??""),t.dispatchEvent(d))});n.set(t,e)},unmounted(e){n.get(e)?.()}}}function c(e){return{message:e,succeeded:!1}}t(r({name:"TalhoCheckoutApp",setup(){return{customerCPF:e(""),customerMail:e(""),customerPhone:e(""),customerBirthdate:e(""),customerCreditCardCVV:e(""),customerCreditCardDate:e(""),customerCreditCardNumber:e(""),customerCreditCardHolder:e("")}},data(){return{productlist:null,selectedPayment:null,availablePayments:[{label:"Cartão de crédito",method:u},{label:"PIX",method:"pix"}],deliveryPlace:null,deliveryPlaces:[{token:"same",label:"Mesmo endereço de cobrança do cartão"},{token:"diff",label:"Entregar em um endereço diferente"}]}},mounted(){this.getCart().then(e=>{e.succeeded&&(this.productlist=e.data)})},methods:{async getCart(){var t="Falha ao capturar os produtos";try{var e=await fetch("https://xef5-44zo-gegm.b2.xano.io/api:79PnTkh_/cart/get",{...a,credentials:"include"});return e.ok?{data:await e.json(),succeeded:!0}:c((await e.json())?.message??t)}catch(e){return c(t)}},setSelectedPaymentMethod(e){this.selectedPayment!==e&&(this.selectedPayment=e)}},computed:{isCreditCard(){return this.selectedPayment===u},getOrderPrice(){return this.productlist?.order_price??0},getOrderPriceFormatted(){return i.format(this.getOrderPrice)},getShippingPrice(){return 0},getShippingPriceFormatted(){return i.format(this.getShippingPrice)},getParsedProducts(){var e=this.productlist?.items;return Array.isArray(e)?this.productlist?.items.map(({name:e,imageUrl:t,quantity:r,price:a})=>({name:e,image:t,quantity:r,price:i.format(a),finalPrice:i.format(a*r)})):[]}},directives:{maskDate:o(s,function(e){return e.replace(/^(\d{0,2})(\d{0,2})(\d{0,4})/,(e,t,r,a)=>[t,r,a].filter(Boolean).join("/"))}),maskCpf:o(s,function(e){return e.replace(/^(\d{0,3})(\d{0,3})(\d{0,3})(\d{0,2})/,(e,t,r,a,n)=>{var d=[];return t&&d.push(""+t),r&&d.push("."+r),a&&d.push("."+a),n&&d.push("-"+n),d.join("")})}),maskPhone:o(s,function(e){var t=(e,t,r,a)=>{var n=[];return t&&n.push("("+t),r&&n.push(") "+r),a&&n.push("-"+a),n.join("")};return e.length<11?e.replace(/^(\d{0,2})(\d{0,4})(\d{0,4})/,t):e.replace(/^(\d{0,2})(\d{0,5})(\d{0,4})/,t)}),maskCreditCard:o(s,function(e){return e.replace(/^(\d{0,4})(\d{0,4})(\d{0,4})(\d{0,4})/,(e,t,r,a,n)=>{var d=[];return t&&d.push(t),r&&d.push(r),a&&d.push(a),n&&d.push(n),d.join(" ")})}),maskCreditCardDate:o(s,function(e){return e.replace(/^(\d{0,2})(\d{0,2})/,(e,t,r)=>{var a=[];return t&&a.push(t),r&&a.push(r),a.join("/")})}),maskNumberOnly:o(s),maskCep:o(s,function(e){return e.replace(/^(\d{0,5})(\d{0,3})/,(e,t,r)=>{var a=[];return t&&a.push(t),r&&a.push(r),a.join("-")})}),upperCase:o(function(e){return e.toUpperCase()})}})).mount("#fechamentodopedido")})();