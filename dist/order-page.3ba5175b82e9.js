!function(){"use strict";function e(e){const r=s((o=document.cookie,o.replace(/\s{2,}/g," ")),"; ").find(r=>{const{name:o}=t(r);return o===e});var o;return!!r&&t(r).value}function t(e){const[t,...r]=s(e,"=");return{name:t,value:a(r)>0&&decodeURIComponent(r.join("="))}}function r(e,t,r={}){if(0===a(e))throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof t)||0===a(t.toString()))throw new Error("'setCookie' should receive a valid cookie value");const o=[`${e}=${encodeURIComponent(t)}`];v(r?.expires&&r?.expires instanceof Date,o,"expires="+r.expires?.toUTCString()),v(r.maxAge,o,`maxAge=${r.maxAge}`),v(r?.sameSite&&"string"==typeof r?.sameSite,o,`SameSite=${r?.sameSite}`),v(r?.path,o,`path=${r?.path}`),v(r?.domain,o,`domain=${r?.domain}`),v(r?.httpOnly,o,"HttpOnly"),v(r?.secure,o,"Secure");const n=o.join("; ");return document.cookie=n,n}var o=null;function n(e,t=document){return t?t.querySelector(e):o}function i(e,t={}){const r=new URL(`${location.protocol}//${location.hostname}`),o=new URL(e,r);for(const[n,i]of Object.entries(t))o.searchParams.set(n,i);return o.toString()}function a(e){return e.length}function s(e,t,r){return e.split(t,r)}var c="https://xef5-44zo-gegm.b2.xano.io",d="/",u="|",h="__Host-Talho-Session-Cookie",p="X-Talho-Session",m={redirect_to:encodeURIComponent(location.pathname+location.search)},l={path:d,secure:!0,sameSite:"Strict",expires:new Date(Date.now()+12096e5)};function f(e){const t=e?.headers.get(p);t&&r(h,t,l)}function g(e,t=!1,r){return f(this),t||this&&401===this.status&&function(e="/acessos/entrar",t=m){location.href=i(e,t)}(),r?.(),{message:e,succeeded:!1}}function y(e,t){return f(this),t?.(),{data:e,succeeded:!0}}function _(t=[],r="GET"){const o="application/json",n=new Headers({Accept:o,"Content-Type":o});for(const[e,s]of t)n.set(e,s);const i=e(h);i&&n.set(p,i);const a=e("__Host-Talho-AuthToken");return a&&n.set("Authorization",a),{method:r,headers:n}}var b=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});function v(e,t,r){return e?t.push(r):-1}new Event("input"),new Event("blur");var w="_fbc|_fbp",S=document.currentScript?.getAttribute("data-parameter-names");function P(e){return`talho_${e}`}function x(){const t=[];for(const r of s(S,u)){const o=e(P(r));v(o,t,[r,o])}return t}var{createApp:O}=window.Vue,k="-",D="reason";O({name:"TalhoOrderPage",data:()=>({order:o}),async created(){const e=new URLSearchParams(location.search).get("order");if(!e)return void(location.href=i(d,{[D]:"trasactionid_not_found"}));const t=await this.getOrder(e);var r;t.succeeded?(this.order=t.data,(r=n("[data-wtf-loader]"))&&r.classList.toggle("oculto",!0),this.logPurchase(e,3)):location.href=i(d,{[D]:"order_not_found"})},methods:{async getOrder(e){const t="Falha ao capturar o pedido";try{const r=await fetch(`${c}/api:5lp3Lw8X/order-details/${e}`,{..._()});if(!r.ok){const e=await r.json();return g.call(r,e?.message??t)}const o=await r.json();return y.call(r,o)}catch(r){return g(t)}},async logPurchase(t,o=0){try{const r=await fetch(`${c}/api:uMv7xbDN/log/purchase`,{..._([...x(),...s(w,u).reduce((t,r)=>{const o=e(r);return o?[...t,[r.replace("_",""),o]]:t},[])],"POST"),keepalive:!0,priority:"high",body:(n={transactionid:t},JSON.stringify(n))});if(!r.ok)return o>0?this.logPurchase(t,o-1):void 0;r.json().then(()=>{})}catch(i){}finally{!function(){const e=new Date(Date.now()-1),t={path:d,secure:!1,expires:e,domain:location.host.replace(/^www/,"")};for(const o of s(S,u))r(P(o),d,{...t,sameSite:"Lax"}),r(o,d,{...t,sameSite:"Lax"});for(const o of s(w,u))r(o,d,t)}()}var n}},computed:{isPIXPayment(){return"pix"===this.order?.payment_method},hasPIXDiscount(){return(this.order?.pix_discount_percentual??0)>0},getDiscountPIXPrice(){return b.format((this.order?.pix_discount_price??0)/100*-1)},name(){return this.order?.name??k},email(){return this.order?.email??k},cpf(){return this.order?.cpf_cnpj??k},phone(){return this.order?.phone??k},shipping(){const{number:e=k,cep:t=k,address:r=k,state:o=k,city:n=k,complement:i=k,neighborhood:a=k,user_name:s=k}=this.order?.delivery.address??{};return{user_name:s,cep:t,address:r,number:e,complement:i,neighborhood:a,city:n,state:o}},billing(){const{cep:e=k,address:t=k,number:r=k,complement:o=k,neighborhood:n=k,city:i=k,state:a=k}=this.order?.billing_address??{};return{cep:e,address:t,number:r,complement:o,neighborhood:n,city:i,state:a}},hasOrderDiscount(){return e=this.order?.discount_code,!(e===o);var e},getOrderSubtotalPriceFormatted(){const e=this.order?.subtotal??0;return b.format(e/100)},getOrderPriceFormatted(){const e=this.order?.total;return b.format("number"==typeof e?e/100:0)},getOrderShipping(){const e=this.order?.delivery.quotation_price;return"number"==typeof e?e/100:0},getOrderShippingPriceFormatted(){return b.format(this.getOrderShipping)},getOrderDiscountPriceFormatted(){return b.format((this.order?.discount??0)/100*-1)},getParsedProducts(){const{order_items:e=[]}=this.order??{};return e.map(({name:e,product_id:t,unit_price:r,quantity:o,image:n})=>({imageStyle:`background-image: url('${n}');`,quantity:o,title:e,key:t,unit_amount:b.format(r/100),final_price:b.format(r*o/100)}))},hasPriority(){return this.order?.delivery.has_priority??!1},getPriorityFee(){return this.hasPriority?this.order?.delivery.priority_price/100:0},getPriorityFeePriceFormatted(){return b.format(this.getPriorityFee)},hasSubsidy(){return this.order?.delivery.has_subsidy??!1},getDeliverySubsidy(){return this.hasSubsidy?-1*Math.min(this.getOrderShipping,this.order?.delivery.subsidy_price/100):0},getDeliverySubsidyPriceFormatted(){return b.format(this.getDeliverySubsidy)},hasFreeShippingByCartPrice(){return this.order?.delivery.has_freeship_by_cart_price??!1}}}).mount(n("#orderapp")),window.addEventListener("pageshow",e=>{e.persisted&&window.location.reload()})}();