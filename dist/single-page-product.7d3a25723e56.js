!function(){"use strict";var t="__Host-Talho-Session-Cookie",e="X-Talho-Session";function n(n){const a=n?.headers.get(e);a&&function(t,e,n={}){if(0===w(t))throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof e)||0===w(e.toString()))throw new Error("'setCookie' should receive a valid cookie value");const a=[`${t}=${e}`];n?.expires&&n?.expires instanceof Date&&a.push("expires="+n.expires.toUTCString()),n.maxAge&&a.push(`maxAge=${n.maxAge}`),n?.sameSite&&"string"==typeof n?.sameSite&&a.push(`SameSite=${n?.sameSite}`),n?.path&&a.push(`path=${n?.path}`),n?.domain&&a.push(`domain=${n?.path}`),n?.httpOnly&&a.push("HttpOnly"),n?.secure&&a.push("Secure");const o=a.join(g);document.cookie=o}(t,a,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+1e3*S*90)})}function a(t){return n(this),this&&401===this.status&&(location.href=function(t,e={}){const n=new URL(`${location.protocol}//${location.hostname}`),a=new URL(t,n);for(const[o,r]of Object.entries(e))a.searchParams.set(o,r);return a.toString()}("/acessos/entrar",{redirect_to:encodeURIComponent(location.pathname+location.search)})),{message:t,succeeded:!1}}function o(t){return n(this),{data:t,succeeded:!0}}function r(n=[],a="GET"){const o=new Headers({Accept:"application/json","Content-Type":"application/json"});for(const[t,e]of n)o.set(t,e);const r=y(t);r&&o.set(e,r);const i=y("__Host-Talho-AuthToken");return i&&o.set("Authorization",i),{method:a,headers:o}}var i=null,c="oculto";function s(t,e=document){return e?e.querySelector(t):i}function u(t,e,n,a){if(t)return t.addEventListener(e,n,a),()=>t.removeEventListener(e,n,a)}function d(t,e){t&&t.removeAttribute(e)}function l(t,...e){t&&t.classList.add(...e)}function f(t,...e){t&&t.classList.remove(...e)}function p(t,e,n){return!!t&&t.classList.toggle(e,n)}function h(t,e){t&&(t.textContent="string"==typeof e?e:e.toString())}function m(t){return JSON.stringify(t)}function w(t){return t.length}function v(t){return t===i}var g="; ";function y(t){const e=document.cookie.split(g).find(e=>{const{name:n}=k(e);return n===t});return!!e&&k(e).value}function k(t){const[e,n]=t.split("=");return{name:e,value:n}}var S=86400,_=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});function b(t,e,n){return Math.max(t,Math.min(e,n))}var q="https://xef5-44zo-gegm.b2.xano.io",C=`${q}/api:79PnTkh_`,x="click",T="POST",$="{count}",L=[`Temos apenas ${$} unidade disponível.`,`Temos apenas ${$} unidades disponíveis.`],R={quantity:1,stockCount:0,product:i,selectedVariation:i},j=location.pathname.split("/"),P=new Proxy(R,{get(t,e){switch(e){case"variationsCount":return w(t.product?.variations??[]);case"hasPriceDifference":{const{price:t,full_price:e}=P.prices;return t!==e}case"prices":{const{product:e,selectedVariation:n}=t;if(!e||!P.hasSelectedVariation)return K();const a=e.variations.find(t=>t.id===n);return a?K(a.price,a.full_price):K()}case"BRLPrices":{const{price:t,full_price:e}=P.prices;return K(_.format(t),_.format(e))}case"computedFinalPrices":{const{quantity:t,prices:e}=P,n=e.price*t,a=e.full_price*t;return{price:{price:n,full_price:a},currency:{price:_.format(n),full_price:_.format(a)}}}case"hasSelectedVariation":return!v(t.selectedVariation);default:return Reflect.get(t,e)}},set(t,e,n){const a=Reflect.set(t,e,n);switch(e){case"quantity":h(E,String(n??1)),function(){if(!P.product||!P.hasSelectedVariation)return;const t=t=>s("[data-wtf-price-value]",t),{BRLPrices:e,hasPriceDifference:n,computedFinalPrices:a}=P;h(t(F),e.price),h(t(M),e.full_price),h(t(O),a.currency.price),p(F,c,!n),p(M,c,!n)}();break;case"selectedVariation":!function(){if(!B||!U||!P.product)return;const{selectedVariation:t,product:e}=P,n=document.createDocumentFragment(),a=s("[data-wtf-weight-selector]"),o=P.variationsCount<2;if(o)return a?.remove();p(a,c,o);for(const r of e?.variations){const e=document.createElement("div"),a=t===r.id;l(e,"text-block"),p(e,"selecionado",a),h(e,X(r.label,/\./g,",")),a||u(e,x,()=>W(r.id)),n.appendChild(e)}B.replaceChildren(n)}(),Reflect.set(P,"quantity",1);break;case"stockCount":!function(){const{stockCount:t}=P,e=t<1;if(p(s("[data-wtf-shipping]"),c,e),p(s("[data-wtf-quantity-selector]"),c,e),p(N,c,e),p(D,c,t>0),p(V,c,t>10||e))return;const n=w(L)-1;h(s("div",V),X(L[b(0,n,t-1)],$,t.toString()))}(),Q(0);break;case"product":{const t=n;Reflect.set(P,"stockCount",t?.stock_quantity??0),Reflect.set(P,"selectedVariation",t?.variations[0].id??i)}}return a}}),V=s("[data-wtf-error-message-sku-maximum]"),D=s("[data-wtf-error-message-invetory]"),H=s("[data-wtf-quantity-minus]"),A=s("[data-wtf-quantity-plus]"),E=s("[data-wtf-quantity-value]"),F=s("[data-wtf-price]"),M=s("[data-wtf-full-price]"),O=s("[data-wtf-total]"),B=s("[data-wtf-sku-list]"),U=s("[data-wtf-sku-item]"),I=s("[data-wtf-shipping-button]"),z=s("[data-wtf-shipping-form]"),G=s("[data-wtf-shipping-value]"),N=s("[data-wtf-comprar]"),J=s("[data-wtf-error-message-shipping]");function X(t,e,n){return t.replace(e,n)}function K(t=0,e=0){return{price:t,full_price:e}}function Q(t){const e=t+P.quantity,n=b(1,Math.min(P.stockCount,10),e);n!==P.quantity&&(P.quantity=n)}function W(t){const e=P.product?.variations.some(({id:e})=>e===t);e&&(P.selectedVariation=t)}async function Y(t){t.preventDefault();const{quantity:e,product:n,selectedVariation:i}=P;if(!i||!n||0===P.stockCount)return;const c=await async function(t){const e="Falha ao adicionar o produto";try{const n=await fetch(`${C}/cart/handle`,{...r([],T),body:m({item:t,operation:"add"})});if(!n.ok){const t=await n.json();return a.call(n,t?.message??e)}const i=await n.json();return o.call(n,i)}catch(n){return a(`[CATCH] ${e}`)}}({quantity:e,sku_id:i,reference_id:n.slug});if(!c.succeeded)return alert("A adição falhou");P.quantity=1,l(s("#carrinho-flutuante"),"carrinhoflutuante--visible"),localStorage.setItem("talho_cart_items",m(c.data))}function Z(t){return t.replace(/^(\d{0,5})(\d{0,3})/,(t,e,n)=>{const a=[];for(const o of[e,n])o&&a.push(o);return a.join("-")})}function tt(){const t=s("form",z);if(!t)return;const e=["name","method","data-name","aria-label","data-wf-page-id","data-wf-element-id","data-turnstile-sitekey"];for(const a of e)d(t,a);f(z,"w-form"),t.parentElement.innerHTML=t.outerHTML;const n=s("#shipping-cep-form");n&&(u(n,"input",t=>{t.stopPropagation();const e=t.target,n=e.value.replace(/\D+/g,"");"cep"===e.name&&e.value!==Z(n)&&t.isTrusted&&(e.value=Z(n),e.dispatchEvent(new Event("input")))}),u(n,"submit",async t=>{t.preventDefault();const e=n.cep.value,i=await async function(t){const e="Houve uma falha ao gerar a cotação";try{const n=await fetch(`${q}/api:i6etHc7G/site/product-delivery`,{...r([],T),body:m(t)});if(!n.ok){const t=await n.json();return a.call(n,t?.message??e)}const i=await n.json();return o.call(n,i)}catch(n){return a(e)}}({cep:e,reference_id:j[w(j)-1]});if(p(J,c,i.succeeded),i.succeeded)switch(i.data.type){case"quotation":return et(i.data.data);case"locationlist":return void i.data.data}else h(s("div",J),i.message)}))}function et(t){l(I,c),l(z,c),f(G,c);const e=Math.max(t.total/100-(t.has_subsidy?t.subsidy_value:0),0);h(s("[data-wtf-quotation-price]",G),0===e?"Frete grátis":_.format(e)),u(s("[data-wtf-quotation-reload]",G),x,t=>{f(z,c),l(G,c)},{once:!0})}(async function(t){const e="Houve uma falha ao capturar o produto";try{const n=await fetch(`${C}/product/single-product-page`,{...r([],T),body:m({quantity:1,reference_id:t})});if(!n.ok){const t=await n.json();return a.call(n,t?.message??e)}const i=await n.json();return o.call(n,i)}catch(n){return a(e)}})(j[w(j)-1]).then(t=>{if(!t.succeeded)return;P.product=t.data.product;const e=t.data.delivery;v(e)||(tt(),et(e))}).then(()=>{u(A,x,()=>Q(1)),u(H,x,()=>Q(-1)),u(N,x,Y),u(I,x,t=>{t.preventDefault(),l(I,c),f(z,c),tt()},{once:!0})})}();