(()=>{let{ref:e,createApp:O}=Vue,d="",a="/",s=null,r="error",n="shipping",o="billing",l="https://xef5-44zo-gegm.b2.xano.io",h=(l,l+"/api:5lp3Lw8X"),u=l+"/api:24B7O9Aj",t={headers:{Accept:"application/json","Content-Type":"application/json"}},c={method:"POST",...t},p="talho_cart_items",g={AC:"Acre",AL:"Alagoas",AP:"Amapá",AM:"Amazonas",BA:"Bahia",CE:"Ceará",DF:"Distrito Federal",ES:"Espírito Santo",GO:"Goiás",MA:"Maranhão",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Pará",PB:"Paraíba",PR:"Paraná",PE:"Pernambuco",PI:"Piauí",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rondônia",RR:"Roraima",SC:"Santa Catarina",SP:"São Paulo",SE:"Sergipe",TO:"Tocantins"},i=Object.keys(g),j=[10,11],m=new WeakMap,H=new Event("input"),C="same",y="diff",v="pix",P="creditcard",b=(v,P,new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"}));function V(e){return i="[data-wtf-loader]",t=document,t=t?t.querySelector(i):s,i="oculto",e=!e,!!t&&t.classList.toggle(i,e);var i,t}function f(e,i){var t,s,r=new URL(location.protocol+"//"+location.hostname),a=new URL(e,r);for([t,s]of Object.entries(i))a.searchParams.set(t,s);return a.toString()}function D(e,i){return Object.hasOwn(e,i)}function S(e){return JSON.stringify(e)}function E(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,d)}function A(e){return e.replace(/\D+/g,d)}function N(e){return e.trim()}function M(e){return e.length}function w(e,i,t){return e?i.push(t):-1}function F(e,i){return e.includes(i)}function R(e,i){return e.test(i)}function I(...t){return{mounted(i){var e=T(i,"input",e=>{e.isTrusted&&((e=e.target).value=t.reduce((e,i)=>i(e),e.value??d),i.dispatchEvent(H))});m.set(i,e)},unmounted:L}}function _(e,i,t){return{field:e,valid:i,...t&&{ignoreIf:t}}}function k(e){return{message:e,succeeded:!1}}function B(e){return{data:e,succeeded:!0}}function T(e,i,t,s){if(e)return e.addEventListener(i,t,s),()=>e.removeEventListener(i,t,s)}async function G({cep:e,deliveryMode:i}){var t="Não foi possível encontrar o endereço";if(8!==(e=A(e)).length)return k(t);try{var s=await fetch(l+`/api:jyidAW68/cepaddress/${e}/checkout`,{...c,credentials:"include",body:S({deliveryMode:i})});return s.ok?B(await s.json()):k((await s.json())?.message??t)}catch(e){return k(t)}}let L=e=>{var i=m.get(e);i&&(i(),m.delete(e))};O({name:"TalhoCheckoutApp",setup(){return{customerCPF:e(d),customerMail:e(d),customerPhone:e(d),customerBirthdate:e(d),customerCreditCardCVV:e(d),customerCreditCardDate:e(d),customerCreditCardNumber:e(d),customerCreditCardHolder:e(d),billingCEP:e(d),billingAddress:e(d),billingNumber:e(d),billingComplement:e(d),billingNeighborhood:e(d),billingCity:e(d),billingState:e(d),shippingRecipient:e(d),shippingCEP:e(d),shippingAddress:e(d),shippingNumber:e(d),shippingComplement:e(d),shippingNeighborhood:e(d),shippingCity:e(d),shippingState:e(d),couponCode:e(d),customerMailElement:e(s),customerCPFElement:e(s),customerPhoneElement:e(s),customerBirthdateElement:e(s),paymentMethodMessageElement:e(s),customerCreditCardCVVElement:e(s),customerCreditCardDateElement:e(s),customerCreditCardNumberElement:e(s),customerCreditCardHolderElement:e(s),billingCEPElement:e(s),billingAddressElement:e(s),billingNumberElement:e(s),billingNeighborhoodElement:e(s),billingCityElement:e(s),billingStateElement:e(s),deliveryPlaceMessageElement:e(s),shippingRecipientElement:e(s),shippingCEPElement:e(s),shippingAddressElement:e(s),shippingNumberElement:e(s),shippingNeighborhoodElement:e(s),shippingCityElement:e(s),shippingStateElement:e(s),deliveryDateMessageElement:e(s),deliveryHourMessageElement:e(s),installmentsMessageElement:e(s),couponCodeElement:e(s),deliveryPlaceAddressErrorMessage:e(s),deliveryBillingAddressErrorMessage:e(s),deliveryShippingAddressErrorMessage:e(s)}},data(){return{hasPendingPayment:!1,isSubmitted:!1,productlist:s,visitedFields:[],selectedPayment:s,availablePayments:[{label:"Cartão de crédito",method:P},{label:"PIX",method:v}],deliveryPlace:s,deliveryPlaces:[{token:C,label:"Mesmo endereço de cobrança do cartão"},{token:y,label:"Entregar em um endereço diferente"}],installment:s,selectedInstallment:s,isCouponPending:!1,coupon:s,isPagSeguroLoaded:!1,deliveryDate:s,deliveryHour:s,isDeliveryLoading:!1,deliveryPrice:s,deliveryOptions:s,priorityTax:s,subsidy:s}},created(){this.refreshCart().then(()=>V(!1)),window.addEventListener("storage",e=>{e.key===p&&this.refreshCart()})},methods:{async getCart(){var i="Falha ao capturar os produtos";try{var e=await fetch("https://xef5-44zo-gegm.b2.xano.io/api:79PnTkh_/cart/get",{...t,credentials:"include"});return e.ok?B(await e.json()):k((await e.json())?.message??i)}catch(e){return k(i)}},async refreshCart(){return this.getCart().then(e=>{e.succeeded&&(0===e.data.items.length?location.href=f("/",{reason:"empty_cart"}):this.productlist=e.data)})},async getInstallments(){var i="Falha ao capturar o parcelamento";try{var e=await fetch(h+"/calculatefees",{...c,cache:"force-cache",credentials:"include",body:S({amount:this.getOrderPrice,cardBin:this.customerCreditCardNumber.replace(/\D+/g,d).slice(0,8)})});return e.ok?B(await e.json()):k((await e.json())?.message??i)}catch(e){return k(i)}},async refreshInstallments(){var e;this.isCreditCard&&this.isCreditCardGroupValid&&!this.getCreditCardToken.hasErrors&&(this.installment=s,this.selectedInstallment=s,(e=await this.getInstallments()).succeeded)&&(this.installment=e.data)},setSelectedInstallmentsCount(e){var i,t;this.selectedInstallment!==e&&(this.selectedInstallment=(i=1,t=2,Math.max(i,Math.min(t,e))))},setSelectedPaymentMethod(e){this.selectedPayment!==e&&(this.hasDeliveryDates||this.handleDeliveryOptions(),e!==P?this.clearCreditCardData():this.isPagSeguroLoaded||this.loadPagSeguro(),this.deliveryPlace=s,this.selectedPayment=e)},setVisitedField(e){return w(!F(this.visitedFields,e),this.visitedFields,e)},hasVisitRegistry(e){return F(this.visitedFields,e)},async handlePayment(e){if(e.preventDefault(),!this.hasPendingPayment&&!this.isDeliveryLoading)if(this.triggerValidations(),this.isSubmitted){let e=this.firstInvalidField;var i,t;e?(i=e.field,t={block:"center",behavior:"smooth"},i.scrollIntoView(t),"INPUT"===e.field.tagName&&setTimeout(()=>e.field.focus(),500)):(this.hasPendingPayment=V(!0),(i=await(0,{pix:this.handleProcessPIX,creditcard:this.handleProcessCreditCard,error:async()=>k("Houve uma falha no envio de seu pedido")}[this.selectedPayment??r])?.()).succeeded?(localStorage.removeItem(p),t=this.isCreditCard?"confirmacao-do-pedido":"pix",location.href=f(["/pagamento",t].join(a),{order:i.data.transactionid})):(this.hasPendingPayment=!V(!1),alert("Pagamento falhou")))}else this.isSubmitted=!0,Vue.nextTick(()=>this.handlePayment(e))},async handleProcessPIX(){var i="Falha ao gerar o pedido";try{var e=await fetch(h+"/process_pix",{...c,credentials:"include",body:S({...this.getOrderBaseData,customer:{...this.getParsedCustomer,...this.getParsedAddresses}})});return e.ok?B(await e.json()):k((await e.json())?.message??i)}catch(e){return k(i)}},async handleProcessCreditCard(){var t="Falha ao gerar o pedido";try{let i=this.selectedInstallment;var e=await fetch(h+"/process_creditcard",{...c,credentials:"include",body:S({...this.getOrderBaseData,customer:{...this.getParsedCustomer,...this.getParsedAddresses},is_same_address:this.isSameAddress,credit_card_info:{holderName:this.customerCreditCardHolder,creditCardToken:this.getCreditCardToken.encryptedCard??d,numberOfPayments:i,installmentValue:this.installment?.find(({installments:e})=>e===i)?.installment_value??0}})});return e.ok?B(await e.json()):k((await e.json())?.message??t)}catch(e){return k(t)}},triggerValidations(){var e;for({field:e}of this.notIgnoredFields)e?.dispatchEvent(new Event("blur"))},feedAddress(e,{uf:i,bairro:t,logradouro:s,localidade:r}){e===o?(this.billingAddress=s,this.billingNeighborhood=t,this.billingCity=r,this.billingState=i):(this.shippingAddress=s,this.shippingNeighborhood=t,this.shippingCity=r,this.shippingState=i)},setDeliveryPlace(e){this.deliveryPlace!==e&&(e===C&&/^\d{5}\-\d{3}$/.test(this.billingCEP)&&this.isBillingAddressGroupValid?G({cep:this.billingCEP,deliveryMode:!0}).then(e=>{e.succeeded||(this.deliveryPlaceAddressErrorMessage=e.message)}):this.deliveryPlaceAddressErrorMessage=s,this.deliveryPlace=e)},async captureAddress(e,i,t){if(!R(/^\d{5}-\d{3}$/,i)||i===t)return!1;t=e+"CEP",i=await G({cep:i,deliveryMode:e===n});if(!i.succeeded)return this[t]=d,this.setVisitedField(t),e===n&&(this.deliveryShippingAddressErrorMessage=i.message),e===o&&(this.deliveryBillingAddressErrorMessage=i.message),!1;switch(e){case n:this.deliveryShippingAddressErrorMessage=s;break;case o:this.deliveryBillingAddressErrorMessage=s}return this.feedAddress(e,i.data),!0},async captureCoupon(){var i="Falha ao capturar o cupom indicado";try{var e=await fetch(h+"/get_coupon",{...c,credentials:"include",body:S({verify_amount:!0,coupon_code:this.couponCode,cpf:this.customerCPF&&s,has_subsidy:this.subsidy?.has??!1,delivery_cep:this.getParsedAddresses.shippingaddress.zipPostalCode,has_selected_delivery:this.deliveryHour!==s&&this.deliveryDate!==s})});return e.ok?B(await e.json()):k((await e.json())?.message??i)}catch(e){return k(i)}},async handleSearchCoupon(){var e;this.isCouponPending||(this.isCouponPending=!0,e=await this.captureCoupon(),this.isCouponPending=!1,e.succeeded?this.coupon=e.data:this.coupon={error:!0,message:e.message})},handleRemoveCoupon(){this.coupon=s,this.couponCode=d},loadPagSeguro(){var e=document.createElement("script");e.async=!0,e.src="https://assets.pagseguro.com.br/checkout-sdk-js/rc/dist/browser/pagseguro.min.js",e.onload=()=>{this.isPagSeguroLoaded=!0},document.head.appendChild(e)},clearCreditCardData(){this.customerCreditCardHolder=d,this.customerCreditCardNumber=d,this.customerCreditCardDate=d,this.customerCreditCardCVV=d},async handleDeliveryOptions(){var e=await this.captureDeliveryOptions();e.succeeded&&(this.deliveryOptions=e.data)},async captureDeliveryOptions(){var i="Falha ao capturar as opções de entrega";try{var e=await fetch(u+"/delivery",{credentials:"include",headers:{Accept:"application/json"}});return e.ok?B(await e.json()):k((await e.json())?.message??i)}catch(e){return k(i)}},setDeliveryDate(i){var e=this.deliveryOptions?.dates?.find(({shift_days:e})=>e===i);e&&this.deliveryDate!==i&&(this.deliveryDate=e.shift_days,this.deliveryHour=s,this.deliveryPrice=s)},setDeliveryHour(e){this.deliveryHour!==e&&0!==this.getSelectedDateDetails?.periods.periods_count&&(this.deliveryHour=e)},async captureDeliveryQuotation(e){var i="Falha ao gerar uma cotação";try{var t=await fetch(l+"/api:i6etHc7G/site/checkout-delivery",{...c,credentials:"include",signal:e.signal,body:S(this.quotationPayload)});return t.ok?B(await t.json()):k((await t.json())?.message??i)}catch(e){return k(i)}},async handleSubsidy(){var e=this.getParsedAddresses.shippingaddress.zipPostalCode;/^\d{5}\-\d{3}$/.test(e)&&(e=await this.verifyForSubsidy(A(e)),this.subsidy=e.succeeded?e.data:s)},async verifyForSubsidy(e){var i="Houve uma falha na verificação";try{var t=await fetch(u+`/delivery/${e}/subsidy`,{credentials:"include",headers:{Accept:"application/json"}});return t.ok?B(await t.json()):k((await t.json())?.message??i)}catch(e){return k(i)}}},computed:{hasSelectedPaymentMethod(){return this.selectedPayment!==s},isCreditCard(){return this.selectedPayment===P},getOrderSubtotal(){return this.productlist?.order_price??0},getOrderSubtotalFormatted(){return b.format(this.getOrderSubtotal)},getOrderPrice(){return[this.getOrderSubtotal,this.getShippingPrice,this.priorityFee,this.subsidyDiscountPrice,this.getCouponDiscountPrice].reduce((e,i)=>e+i,0)},getOrderPriceFormatted(){return b.format(this.getOrderPrice)},getShippingPrice(){return this.hasFreeShippingByCartPrice||this.deliveryPrice===s?0:this.deliveryPrice.value/100},getShippingPriceFormatted(){return this.hasFreeShippingByCartPrice?"Frete grátis":b.format(this.getShippingPrice)},getCouponDiscountPrice(){var e,i,t,s;return this.hasNullCoupon||this.hasInvalidCoupon?0:({value:e,cupom_type:i,is_percentage:s}=this.coupon,t=this.getParsedPriceForApplyDiscount,s=s?Math.min(e/100,1)*(-1*t):-1*Math.min(t,e),this.hasSubsidy&&i===n?Math.max(this.getShippingPrice+this.subsidyDiscountPrice,0):s)},getCouponDiscountPriceFormatted(){return b.format(this.getCouponDiscountPrice)},getParsedPriceForApplyDiscount(){var e;return this.hasNullCoupon||this.hasInvalidCoupon?0:(e=this.coupon.cupom_type,{subtotal:this.getOrderSubtotal,shipping:this.getShippingPrice,product_id:0}[e])},getParsedProducts(){var e=this.productlist?.items;return e?e.map(({name:e,imageUrl:i,quantity:t,price:s})=>({name:e,image:i,quantity:t,price:b.format(s),finalPrice:b.format(s*t)})):[]},isPersonalDataValid(){return!this.isSubmitted||[this.customerMailValidation.valid,this.customerBirthdateValidation.valid,this.customerCPFValidation.valid,this.customerPhoneValidation.valid].every(Boolean)},customerMailValidation(){return _(this.customerMailElement,!this.hasVisitRegistry("customerMail")||R(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,this.customerMail))},customerBirthdateValidation(){var e=this.customerBirthdate;return _(this.customerBirthdateElement,!this.hasVisitRegistry("customerBirthdate")||R(/^\d{2}\/\d{2}\/\d{4}$/,e)&&(e=>{var[e,i,t]=e.split(a);return"Invalid Date"!==new Date(t+`-${i}-${e}T00:00:00`).toString()})(e))},customerCPFValidation(){var i,e=this.customerCPF;return _(this.customerCPFElement,!this.hasVisitRegistry("customerCPF")||R(/^\d{3}\.\d{3}\.\d{3}-\d{2}$/,this.customerCPF)&&11===(i=A(i=e)).length&&!/^(\d)\1{10}$/.test(i)&&(e=j.map((s,e)=>{e=11-[...i.slice(0,e?10:9)].map(Number).reduce((e,i,t)=>e+i*(s-t),0)%11;return 9<e?0:e}),i.endsWith(e.join(d))))},customerPhoneValidation(){return _(this.customerPhoneElement,!this.hasVisitRegistry("customerPhone")||R(/\(\d{2}\)\s\d{4,5}-\d{4}/,this.customerPhone))},paymentMethodValidation(){return _(this.paymentMethodMessageElement,this.selectedPayment!==s)},customerCreditCardHolderValidation(){return _(this.customerCreditCardHolderElement,!this.hasVisitRegistry("customerCreditCardHolder")||/^(\w{2,})(\s+(\w+))+$/.test(E(N(this.customerCreditCardHolder).replace(/\s{2,}/g," "))),!this.isCreditCard)},customerCreditCardNumberValidation(){return _(this.customerCreditCardNumberElement,!this.hasVisitRegistry("customerCreditCardNumber")||R(/^(\d{4})(\s\d{4}){2}(\s\d{3,4})$/,N(this.customerCreditCardNumber)),!this.isCreditCard)},customerCreditCardDateValidation(){var e,i=this.customerCreditCardDate;return _(this.customerCreditCardDateElement,!this.hasVisitRegistry("customerCreditCardDate")||R(/^(1[012]|0[1-9])\/\d{2}$/,i)&&2===(i=(i=i).split(a)).length&&([i,e]=i,i=parseInt(i,10),e=parseInt(e,10),!(isNaN(i)||isNaN(e)||i<1||12<i))&&new Date<new Date(2e3+(e<100?e:0),i,0,23,59,59),!this.isCreditCard)},customerCreditCardCVVValidation(){return _(this.customerCreditCardCVVElement,!this.hasVisitRegistry("customerCreditCardCVV")||R(/^\d{3}$/,this.customerCreditCardCVV),!this.isCreditCard)},isCreditCardGroupValid(){return[this.customerCreditCardHolderValidation.valid,this.customerCreditCardNumberValidation.valid,this.customerCreditCardDateValidation.valid,this.customerCreditCardCVVValidation.valid].every(Boolean)},billingCEPValidation(){return _(this.billingCEPElement,!this.hasVisitRegistry("billingCEP")||R(/^\d{5}-\d{3}$/,this.billingCEP),!this.isCreditCard)},billingAddressValidation(){return _(this.billingAddressElement,!this.hasVisitRegistry("billingAddress")||2<M(N(this.billingAddress)),!this.isCreditCard)},billingNumberValidation(){return _(this.billingNumberElement,!this.hasVisitRegistry("billingNumber")||0<M(this.billingNumber),!this.isCreditCard)},billingNeighborhoodValidation(){return _(this.billingNeighborhoodElement,!this.hasVisitRegistry("billingNeighborhood")||0<M(this.billingNeighborhood),!this.isCreditCard)},billingCityValidation(){return _(this.billingCityElement,!this.hasVisitRegistry("billingCity")||2<M(this.billingCity),!this.isCreditCard)},billingStateValidation(){return _(this.billingStateElement,!this.hasVisitRegistry("billingState")||F(i,this.billingState),!this.isCreditCard)},isBillingAddressGroupValid(){return this.deliveryBillingAddressErrorMessage===s&&[this.billingCEPValidation,this.billingAddressValidation,this.billingNumberValidation,this.billingNeighborhoodValidation,this.billingCityValidation,this.billingStateValidation].every(e=>e.valid)},deliveryPlaceValidation(){return _(this.deliveryPlaceMessageElement,this.hasSelectedAddress&&this.deliveryPlaceAddressErrorMessage===s,!this.isCreditCard)},shippingRecipientValidation(){return _(this.shippingRecipientElement,!this.hasVisitRegistry("shippingRecipient")||R(/^(\w{2,})(\s+(\w+))+$/,E(N(this.shippingRecipient)).replace(/\s{2,}/g," ")),!this.shouldValidateShippingAddress)},shippingCEPValidation(){return _(this.shippingCEPElement,!this.hasVisitRegistry("shippingCEP")||R(/^\d{5}-\d{3}$/,this.shippingCEP),!this.shouldValidateShippingAddress)},shippingAddressValidation(){return _(this.shippingAddressElement,!this.hasVisitRegistry("shippingAddress")||2<M(N(this.shippingAddress)),!this.shouldValidateShippingAddress)},shippingNumberValidation(){return _(this.shippingNumberElement,!this.hasVisitRegistry("shippingNumber")||0<M(N(this.shippingNumber)),!this.shouldValidateShippingAddress)},shippingNeighborhoodValidation(){return _(this.shippingNeighborhoodElement,!this.hasVisitRegistry("shippingNeighborhood")||3<M(N(this.shippingNeighborhood)),!this.shouldValidateShippingAddress)},shippingCityValidation(){return _(this.shippingCityElement,!this.hasVisitRegistry("shippingCity")||2<M(N(this.shippingCity)),!this.shouldValidateShippingAddress)},shippingStateValidation(){return _(this.shippingStateElement,!this.hasVisitRegistry("shippingState")||F(i,this.shippingState),!this.shouldValidateShippingAddress)},isShippingAddressGroupValid(){return this.deliveryShippingAddressErrorMessage===s&&[this.shippingCEPValidation,this.shippingAddressValidation,this.shippingNumberValidation,this.shippingNeighborhoodValidation,this.shippingCityValidation,this.shippingStateValidation].every(e=>e.valid)},deliveryDatesGroupValidation(){return _(this.deliveryDateMessageElement,this.deliveryDate!==s,!this.paymentMethodValidation.valid)},deliveryHoursGroupValidation(){return _(this.deliveryHourMessageElement,this.deliveryHour!==s,!this.deliveryDatesGroupValidation.valid)},installmentGroupValidation(){return _(this.installmentsMessageElement,this.selectedInstallment!==s,!this.isCreditCard||!this.paymentMethodValidation.valid)},notIgnoredFields(){return[this.customerMailValidation,this.customerBirthdateValidation,this.customerCPFValidation,this.customerPhoneValidation,this.paymentMethodValidation,this.customerCreditCardHolderValidation,this.customerCreditCardNumberValidation,this.customerCreditCardDateValidation,this.customerCreditCardCVVValidation,this.billingCEPValidation,this.billingAddressValidation,this.billingNumberValidation,this.billingNeighborhoodValidation,this.billingCityValidation,this.billingStateValidation,this.deliveryPlaceValidation,this.shippingRecipientValidation,this.shippingCEPValidation,this.shippingAddressValidation,this.shippingNumberValidation,this.shippingNeighborhoodValidation,this.shippingCityValidation,this.shippingStateValidation,this.deliveryDatesGroupValidation,this.deliveryHoursGroupValidation,this.installmentGroupValidation].filter(({ignoreIf:e})=>F([!1,void 0],e))},firstInvalidField(){return this.notIgnoredFields.find(({valid:e})=>!e)??s},hasSelectedAddress(){return this.deliveryPlace!==s},isSameAddress(){return this.deliveryPlace===C},isDiffAddress(){return this.deliveryPlace===y},shouldValidateShippingAddress(){return!this.isCreditCard||this.showShippingAddressSelector&&!this.isSameAddress},showShippingAddressSelector(){return!this.isCreditCard||(this.isCreditCard,this.hasSelectedAddress)},getParsedAddresses(){var e=e=>g[e]??d,i=e=>N(e).replace(/-+/g,d)||"N/A",t={zipPostalCode:this.shippingCEP,street:this.shippingAddress,number:this.shippingNumber,complement:i(this.shippingComplement),neighbourhood:this.shippingNeighborhood,city:this.shippingCity,state:e(this.shippingState)},i={zipPostalCode:this.billingCEP,street:this.billingAddress,number:this.billingNumber,complement:i(this.billingComplement),neighbourhood:this.billingNeighborhood,city:this.billingCity,state:e(this.billingState)};return this.isCreditCard?{billingaddress:i,shippingaddress:this.isSameAddress?i:t}:{shippingaddress:t,billingaddress:t}},getParsedCustomer(){return{name:this.isCreditCard?this.customerCreditCardHolder:this.shippingRecipient,cpf:this.customerCPF,email:this.customerMail,birthDate:this.customerBirthdate,phone:this.customerPhone}},getParsedDeliveryData(){var{getSelectedHourDetails:e,getSelectedDateDetails:i}=this;return{delivery_hour:{value:this.deliveryHour,validator:e?.validator,has_priority:e?.has_priority},delivery_date:{value:this.deliveryDate,validator:i?.validator,has_priority:i?.has_priority}}},getOrderBaseData(){return{user_id:s,coupon_code:this.hasInvalidCoupon||this.hasNullCoupon?s:this.coupon?.code,delivery:{...this.getParsedDeliveryData,delivery_price:this.deliveryPrice}}},showInstallmentSection(){return this.isCreditCard&&0<M(this.installment??[])},getParsedInstallments(){var e=this.installment;return e?e.map(({installments:e,installment_value:i})=>({installments:e,installment_value:b.format(i)})):[]},hasNullCoupon(){return this.coupon===s},hasAppliedCoupon(){return D(this.coupon??{},"cupom_type")},hasInvalidCoupon(){return D(this.coupon??{},r)},isCouponCodeValid(){var e=this.couponCode;return 4<M(N(e))&&!R(/[^A-Z\d]/,e)},getCreditCardToken(){var e,i;return this.isPagSeguroLoaded?([e,i]=this.customerCreditCardDate.split(a),window.PagSeguro.encryptCard({expMonth:e,expYear:"20".concat(i),holder:this.customerCreditCardHolder,securityCode:this.customerCreditCardCVV,number:A(this.customerCreditCardNumber),publicKey:"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxPIKWT6ettkFKqSyfoUpH/550Q8YQtRf7ZYJJbV3U7/4HBtamJT9If4wiLs2YlEfwTPWlB5Cl0jGmkBSQkjIDF+QTOSJviZYKgiuR7Bnavgt+idkcZsd5hM1I6u1uwOJJE3wSSXg+Nw70GZCeg7A6bmq9tOu1827En/ZFKWBXqv9Upc7q/Y6N0XMzZ3CL1j6ZlhnCalQzzaV9whijxK22lIL78gLEUcnmEO7CUX6DyfcdlA13MM4X538k2eYUosdnKafCEDNVcT+PPUeUdJZ0CpBWA9c/XtO0BIbTXHTsDuDlX0r7BF0vMFJMi0D9lkFCavY/kjZEQYhnXMtrWlUWwIDAQAB"})):{errors:[],hasErrors:!1,encryptedCard:s}},hasDeliveryDates(){var e,i=this.deliveryOptions;return e=i?.dates,Array.isArray(e)&&0<M(i?.dates)},hasDeliveryHour(){return this.deliveryDate!==s&&0<M(this.getParsedDeliveryHours)},getParsedDeliveryHours(){return this.hasDeliveryDates&&this.getSelectedDateDetails!==s?this.getSelectedDateDetails.periods.hours.map(({label:e,hour:i})=>({hour:i,label:e})):[]},quotationPayload(){var e,i,t;return![this.deliveryDate,this.deliveryHour].some(e=>e===s)&&(e=this.getParsedAddresses.shippingaddress.zipPostalCode,!!/^\d{5}\-\d{3}$/.test(e))&&({delivery_hour:i,delivery_date:t}=this.getParsedDeliveryData,{cep:e,delivery_hour:i,delivery_date:t})},getParsedDeliveryDates(){if(this.deliveryOptions===s)return[];let t=this.deliveryDate;return this.deliveryOptions.dates.map(({label:e,shift_days:i})=>({label:e,shift_days:i,selected:t===i}))},getSelectedDateDetails(){return!this.deliveryDate!==s&&this.deliveryOptions?.dates.find(({shift_days:e})=>e===this.deliveryDate)||s},getSelectedHourDetails(){return this.getSelectedDateDetails&&this.deliveryHour?this.getSelectedDateDetails.periods.hours.find(({hour:e})=>e===this.deliveryHour)??s:s},hasPriorityFee(){return!!(this.hasDeliveryHour&&this.getSelectedDateDetails&&this.getSelectedHourDetails)&&this.getSelectedDateDetails.has_priority&&this.getSelectedHourDetails.has_priority},priorityFee(){return this.hasPriorityFee?this.deliveryOptions?.priority_fee:0},priorityFeeFormatted(){return b.format(this.priorityFee)},hasSubsidy(){return!0===this.subsidy?.has&&0<this.getShippingPrice},subsidyDiscountPrice(){return!0===this.subsidy?.has?-1*Math.min(this.subsidy.value,this.getShippingPrice):0},subsidyDiscountPriceFormatted(){return b.format(this.subsidyDiscountPrice)},hasFreeShippingByCartPrice(){return 400<=this.getOrderSubtotal}},watch:{billingCEP(e,i){this.captureAddress(o,e,i).then(e=>{e&&(this.deliveryPlaceAddressErrorMessage=s,this.deliveryPlace===C)&&(this.deliveryPlace=s)})},shippingCEP(e,i){this.deliveryDate=s,this.deliveryHour=s,this.captureAddress(n,e,i)},getOrderPrice:{immediate:!0,handler:function(){this.refreshInstallments()}},getCreditCardToken(e){e.hasErrors||this.refreshInstallments()},quotationPayload(e,i,t){if(e){e=e.cep;if(/^\d{5}\-\d{3}$/.test(e)){let e=new AbortController;return i?(i.cep,this.isDeliveryLoading=!0,this.captureDeliveryQuotation(e).then(e=>{var i;e.succeeded&&({total:e,validator:i}=e.data,this.deliveryPrice={value:e,validator:i},this.isDeliveryLoading=!1)})):(this.isDeliveryLoading=!0,this.captureDeliveryQuotation(e).then(e=>{var i;e.succeeded&&({total:e,validator:i}=e.data,this.deliveryPrice={value:e,validator:i},this.isDeliveryLoading=!1)})),t(()=>e.abort())}}},getParsedAddresses(e,i){e&&i&&(e.shippingaddress.zipPostalCode===i.shippingaddress.zipPostalCode||!/^\d{5}\-\d{3}$/.test(e.shippingaddress.zipPostalCode)||this.isCreditCard&&this.deliveryPlace===s||this.handleSubsidy())}},directives:{maskDate:I(A,function(e){return e.replace(/^(\d{0,2})(\d{0,2})(\d{0,4})/,(e,i,t,s)=>[i,t,s].filter(Boolean).join(a))}),maskCpf:I(A,function(e){return e.replace(/^(\d{0,3})(\d{0,3})(\d{0,3})(\d{0,2})/,(e,i,t,s,r)=>{var a=[];return w(i,a,""+i),w(t,a,"."+t),w(s,a,"."+s),w(r,a,"-"+r),a.join(d)})}),maskPhone:I(A,function(e){var i=(e,i,t,s)=>{var r=[];return w(i,r,"("+i),w(t,r,") "+t),w(s,r,"-"+s),r.join(d)};return e.length<11?e.replace(/^(\d{0,2})(\d{0,4})(\d{0,4})/,i):e.replace(/^(\d{0,2})(\d{0,5})(\d{0,4})/,i)}),maskCreditCard:I(A,function(e){return e.replace(/^(\d{0,4})(\d{0,4})(\d{0,4})(\d{0,4})/,(e,i,t,s,r)=>{var a,d=[];for(a of[i,t,s,r])w(a,d,a);return d.join(" ")})}),maskCreditCardDate:I(A,function(e){return e.replace(/^(\d{0,2})(\d{0,2})/,(e,i,t)=>{var s,r=[];for(s of[i,t])w(s,r,s);return r.join(a)})}),maskNumberOnly:I(A),maskCep:I(A,function(e){return e.replace(/^(\d{0,5})(\d{0,3})/,(e,i,t)=>{var s,r=[];for(s of[i,t])w(s,r,s);return r.join("-")})}),upperCase:I(function(e){return e.toUpperCase()}),normalize:I(E),visitedField:{mounted(i,{value:t,instance:s}){var e=T(i,"blur",e=>{s.setVisitedField(t),m.delete(i)},{once:!0});m.set(i,e)},unmounted:L}}}).mount("#fechamentodopedido")})();