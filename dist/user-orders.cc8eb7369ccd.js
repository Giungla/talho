"use strict";(()=>{var j="; ";function y(e){let t=document.cookie.split(j).find(o=>{let{name:u}=G(o);return u===e});return t?G(t).value:!1}function G(e){let[t,o]=e.split("=");return{name:t,value:o}}function $(e,t,o={}){if(e.length===0)throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof t)||t.toString().length===0)throw new Error("'setCookie' should receive a valid cookie value");let u=[`${e}=${t}`];o?.expires&&o?.expires instanceof Date&&u.push("expires="+o.expires.toUTCString()),o.maxAge&&u.push(`maxAge=${o.maxAge}`),o?.sameSite&&typeof o?.sameSite=="string"&&u.push(`SameSite=${o?.sameSite}`),o?.path&&u.push(`path=${o?.path}`),o?.domain&&u.push(`domain=${o?.path}`),o?.httpOnly&&u.push("HttpOnly"),o?.secure&&u.push("Secure");let f=u.join(j);return document.cookie=f,f}var Se=401,N="__Host-Talho-AuthToken",z="__Host-Talho-Session-Cookie",B="X-Talho-Session";function ye(e){!e||e.status!==Se||(location.href=J("/acessos/entrar",{redirect_to:encodeURIComponent(location.pathname)}))}function ie(e){let t=e?.headers.get(B);t&&$(z,t,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+V(90))})}function T(e){return ie(this),ye(this),{message:e,succeeded:!1}}function _(e){return ie(this),{data:e,succeeded:!0}}function C(e=[],t="GET"){let o=new Headers({Accept:"application/json","Content-Type":"application/json"});for(let[S,F]of e)o.set(S,F);let u=y(z);u&&o.set(B,u);let f=y(N);return f&&o.set("Authorization",f),{method:t,headers:o}}function V(e){return 86400*1e3*e}var P=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});var O=null,E="oculto";function Y(){return!!y(N)}function s(e,t=document){return t?t.querySelector(e):O}function b(e,t,o,u){if(e)return e.addEventListener(t,o,u),()=>e.removeEventListener(t,o,u)}function I(e,t,o){e&&e.setAttribute(t,o)}function v(e,t){e&&e.removeAttribute(t)}function k(e,...t){e&&e.classList.add(...t)}function R(e,...t){e&&e.classList.remove(...t)}function H(e,t,o){return e?e.classList.toggle(t,o):!1}function l(e,t){e&&(e.textContent=typeof t=="string"?t:t.toString())}function J(e,t={}){let o=new URL(`${location.protocol}//${location.hostname}`),u=new URL(e,o);for(let[f,S]of Object.entries(t))u.searchParams.set(f,S);return u.toString()}function L(e){return JSON.stringify(e)}function X(e){return e.length}var W="talho_cart_items";var Z={AC:"Acre",AL:"Alagoas",AP:"Amap\xE1",AM:"Amazonas",BA:"Bahia",CE:"Cear\xE1",DF:"Distrito Federal",ES:"Esp\xEDrito Santo",GO:"Goi\xE1s",MA:"Maranh\xE3o",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Par\xE1",PB:"Para\xEDba",PR:"Paran\xE1",PE:"Pernambuco",PI:"Piau\xED",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rond\xF4nia",RR:"Roraima",SC:"Santa Catarina",SP:"S\xE3o Paulo",SE:"Sergipe",TO:"Tocantins"},Re=Object.keys(Z),he=Object.values(Z);var D="https://xef5-44zo-gegm.b2.xano.io";(function(){let e="disabled",t="carrinhoflutuante--visible",o=`${D}/api:79PnTkh_`,u=new Set;function f(...r){return Math.max(...r)}if(!Y()){location.href="/acessos/entrar";return}let S=new Proxy({list:[]},{get(r,n){let a=X(r.list);switch(n){case"hasOrders":return a>0;case"ordersCount":return a;default:return r[n]}},set(r,n,a){let i=Reflect.set(r,n,a);if(!i)return i;switch(n){case"list":fe();break}return!0}});async function F(){let r="Falha ao buscar os pedidos";try{let n=await fetch(`${D}/api:TJEuMepe/user/orders`,{...C()});if(!n.ok){let i=await n.json();return T.call(n,i?.message??r)}let a=await n.json();return _.call(n,a)}catch{return T(r)}}async function ue({comment:r,rating:n,product_id:a}){let i="Falha ao gerar a avalia\xE7\xE3o, tente novamente mais tarde.";try{let c=await fetch(`${D}/api:9ixgU7Er/ratings/${a}/create`,{...C([],"POST"),body:L({rating:n,comment:r})});if(!c.ok){let m=await c.json();return T.call(c,m?.message??i)}let x=await c.json();return _.call(c,x)}catch{return T(i)}}async function ce(r){let n="Falha ao adicionar o produto";try{let a=await fetch(`${o}/cart/handle`,{...C([],"POST"),body:L({item:r,operation:"add"})});if(!a.ok){let c=await a.json();return T.call(a,c?.message??n)}let i=await a.json();return _.call(a,i)}catch{return T(`[CATCH] ${n}`)}}function h(r,...n){r&&r.replaceChildren(...n.filter(Boolean))}function g(r){if(r)return r.remove()}let de=s("[data-wtf-has-no-orders]"),Q=s("[data-wtf-order-template]"),w=s("[data-wtf-orders-container]"),q=s("[data-wtf-product-item]",w),K=s("[data-wtf-evaluated]"),ee=s("[data-wtf-not-rated]"),te=s("[data-wtf-evaluation-form]");for(let r of[K,ee,te,q])g(r);function le(){return document.createDocumentFragment()}async function pe({sku_id:r,slug:n}){if(u.has(n))return;u.add(n);let a=await ce({sku_id:r,quantity:1,reference_id:n});if(!a.succeeded){u.delete(n);return}k(s("#carrinho-flutuante"),t),localStorage.setItem(W,L(a.data)),u.delete(n)}function fe(){let{list:r,hasOrders:n}=S;if(!w||!Q||!q)return;H(de,E,n),H(w,E,!n);let a=le();for(let i of r){let c=Q.cloneNode(!0);l(s("[data-wtf-order-total]",c),i.total),l(s("[data-wtf-order-status]",c),i.status),l(s("[data-wtf-created-at]",c),i.created_at),l(s("[data-wtf-payment-method]",c),i.payment_method),l(s("[data-wtf-transaction-id]",c),i.transaction_id);let x=s("[data-wtf-product-list]",c);for(let{name:m,slug:p,product_id:M,sku_id:Te,quantity:ge,unit_price:ne,image:xe,review:U,has_stock:Ae}of i.order_items){let A=q.cloneNode(!0),oe=s("[data-wtf-review-area]",A);I(s("[data-wtf-product-anchor]",A),"href",`/produtos/${p}`);let ae=s("[data-wtf-buy-again-cta]",A);if(Ae?b(ae,"click",()=>pe({sku_id:Te,slug:p})):g(ae),l(s("[data-wtf-product-name]",A),m),l(s("[data-wtf-product-price]",A),P.format(ne/100)),l(s("[data-wtf-product-subtotal]",A),P.format(ne*ge/100)),U===void 0){let d=ee?.cloneNode(!0)??O,se=te?.cloneNode(!0)??O;R(d,E),i.pago?(b(s("[data-wtf-not-rated-cta]",d),"click",()=>{me(M,d,se)},{once:!0}),g(s("[data-wtf-not-rated-unpaid]",d))):(g(s("[data-wtf-not-rated-paid]",d)),g(s("[data-wtf-not-rated-cta]",d))),h(oe,d,se)}else{let d=K?.cloneNode(!0);l(s("[data-wtf-evaluated-comment]",d),U.comment),re(d,U.rating),R(d,E),h(oe,d)}x.insertAdjacentElement("afterbegin",A)}a.appendChild(c)}h(w,a)}function re(r,n){if(!r)return;let a=s("[data-wtf-evaluated-star-section]",r);if(!a)return;let i=f(a.childElementCount-f(1,n),0);for(let c=0;c++<i;)g(a.lastElementChild)}function me(r,n,a){if(!n||!a)return;k(n,E),R(a,E);let i=s("form",a),c=i?.parentElement;if(!i||!c)return;let x=["id","name","method","data-name","aria-label","data-wf-page-id","data-wf-element-id","data-turnstile-sitekey"];for(let p of x)v(i,p);g(i),h(c),c.insertAdjacentHTML("afterbegin",i.outerHTML);let m=s("form",a);v(s('[type="submit"]',m),e),b(m,"submit",async p=>{if(p.preventDefault(),p.stopPropagation(),!p.isTrusted||!p.submitter)return;I(p.submitter,e,e);let M=await ue({product_id:r,comment:m.comment.value,rating:parseInt(m.rating.value)});if(!M.succeeded){v(p.submitter,e);return}Ee(M.data,m)})}function Ee(r,n){if(!n)return;let a=n.closest("[data-wtf-review-area]");if(!a)return;let i=K?.cloneNode(!0);i&&(re(i,r.rating),l(s("[data-wtf-evaluated-comment]",i),r.comment),R(i,E),h(a,i))}F().then(r=>{r.succeeded&&(S.list=r.data)})})();})();
