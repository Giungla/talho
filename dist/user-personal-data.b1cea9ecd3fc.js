!function(){"use strict";var e="",t="/";function n(e,t,n){return e?t.push(n):-1}function a(e,t){return e===t}function o(e){const t=D((n=document.cookie,n.replace(/\s{2,}/g," ")),"; ").find(t=>{const{name:n}=r(t);return n===e});var n;return!!t&&r(t).value}function r(e){const[t,...n]=D(e,"=");return{name:t,value:S(n)>0&&decodeURIComponent(n.join("="))}}var c="__Host-Talho-Session-Cookie",s="X-Talho-Session",i={redirect_to:encodeURIComponent(location.pathname+location.search)},u={path:t,secure:!0,sameSite:"Strict",expires:new Date(Date.now()+12096e5)};function d(e){const t=e?.headers.get(s);t&&function(e,t,a={}){if(0===S(e))throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof t)||0===S(t.toString()))throw new Error("'setCookie' should receive a valid cookie value");const o=[`${e}=${encodeURIComponent(t)}`];n(a?.expires&&a?.expires instanceof Date,o,"expires="+a.expires?.toUTCString()),n(a.maxAge,o,`maxAge=${a.maxAge}`),n(a?.sameSite&&"string"==typeof a?.sameSite,o,`SameSite=${a?.sameSite}`),n(a?.path,o,`path=${a?.path}`),n(a?.domain,o,`domain=${a?.domain}`),n(a?.httpOnly,o,"HttpOnly"),n(a?.secure,o,"Secure");const r=o.join("; ");document.cookie=r}(c,t,u)}function f(e,t=!1,n){return d(this),t||this&&401===this.status&&function(e="/acessos/entrar",t=i){location.href=function(e,t={}){const n=new URL(`${location.protocol}//${location.hostname}`),a=new URL(e,n);for(const[o,r]of Object.entries(t))a.searchParams.set(o,r);return a.toString()}(e,t)}(),n?.(),{message:e,succeeded:!1}}function l(e,t){return d(this),t?.(),{data:e,succeeded:!0}}function p(e=[],t="GET"){const n="application/json",a=new Headers({Accept:n,"Content-Type":n});for(const[o,c]of e)a.set(o,c);const r=o(c);r&&a.set(s,r);const i=o("__Host-Talho-AuthToken");return i&&a.set("Authorization",i),{method:t,headers:a}}var m="oculto";function h(e,t=document){return t?t.querySelector(e):null}function v(e,t,n,a){if(e)return e.addEventListener(t,n,a),()=>e.removeEventListener(t,n,a)}function w(e,t){e&&e.removeAttribute(t)}function g(e,...t){e&&e.classList.add(...t)}function $(e,...t){e&&e.classList.remove(...t)}function b(e,t,n){return!!e&&e.classList.toggle(t,n)}function y(e,t){e&&(e.textContent="string"==typeof t?t:t.toString())}function T(t){return t.replace(/\D+/g,e)}function S(e){return e.length}function k(){return/^\(\d{2}\)\s\d{4,5}-\d{4}$/}function j(){return/^\d{3}\.\d{3}\.\d{3}-\d{2}$/}function U(){return/^\d{2}\/\d{2}\/\d{4}$/}function C(e,t){return("function"==typeof e?e():e).test(t)}function x(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,e).replace(/[\u200B-\u200D\uFEFF]/g,e).replace(/[\u2060\u034F]/g,e)}function D(e,t,n){return e.split(t,n)}function N(e){return null===e}function L(e){return void 0===e}var A=[10,11];function _(t){if(11!==S(t=T(t))||C(/^(\d)\1{10}$/,t))return!1;const n=A.map((e,n)=>{const a=n?10:9,o=11-[...t.slice(0,a)].map(Number).reduce((t,n,a)=>t+n*(e-a),0)%11;return o>9?0:o});return t.endsWith(n.join(e))}!function(){const o="https://xef5-44zo-gegm.b2.xano.io/api:TJEuMepe";function r(t,n){b(t,m,!n),y(t,n??e)}function c(e){Object.assign(s,e),function(){if(!Z)return;v(Z,"click",()=>{$(J,m),g(Z,m)},{once:!0});const e=[[M,s.cpf],[R,s.name],[B,s.birthday],[I,s.telephone],[z,s.last_name]];for(const[t,n]of e)G(t,n),t!==M||N(t)||b(t.closest("[data-wtf-wrapper]"),m,!N(n)&&!L(n)&&_(n));$(Z,m),g(J,m)}()}const s=new Proxy({cpf:e,name:e,email:e,birthday:e,telephone:e,isFormVisible:!1},{get(e,t){const n=Reflect.get(e,t);return"fullName"===t?`${e?.name} ${e?.last_name}`:n},set(t,n,a,o){const c=Reflect.set(t,n,a);switch(n){case"name":case"last_name":r(E,o?.fullName??e);break;case"birthday":r(P,a);break;case"telephone":r(O,a);break;case"cpf":r(F,a);break;case"email":r(H,a);break;case"points":r(A,a)}return c}}),i=["name","method","data-name","aria-label","data-wf-page-id","data-wf-element-id","data-turnstile-sitekey"],u=h("#wf-form-update-user-data");if(u){for(const t of i)w(u,t);const e=u.parentElement;w(h('[type="submit"]',u),"disabled"),$(e,"w-form"),u.remove(),e.insertAdjacentHTML("beforeend",u.outerHTML)}const d=h("#wf-form-update-user-data");v(d,"submit",async n=>{n.preventDefault(),n.stopPropagation();const a=d.hasOwnProperty("cpf"),r=[K,Q,te,ne];a&&r.splice(2,0,ee);const s=r.find(e=>!1===e().at(1));if(s){const e=s().at(0).replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return void h(`[data-${e}]`,d)?.focus({preventScroll:!1})}const i={birthday:D(B?.value??e,t).reverse().join("-"),cpf:M?.value,name:R?.value,telephone:I?.value,last_name:z?.value};a&&Object.assign(i,{cpf:M?.value});const u=await async function(e){const t="Houve uma falha ao salvar seus dados. Tente novamente mais tarde.";try{const a=await fetch(`${o}/user/edit`,{...p([],"PUT"),body:(n=e,JSON.stringify(n))});if(!a.ok){const e=await a.json();return f.call(a,e?.message??t)}const r=await a.json();return l.call(a,r)}catch(a){return f(t)}var n}(i);!function(e,t){const n=!t.succeeded,a=h("[data-wtf-user-update-error-message]",e),o=h("[data-wtf-user-update-success-message]",e);b(a,m,!n),b(o,m,n),n?y(a&&h("div",a),t.message):setTimeout(()=>g(o,m),8e3)}(d,u),u.succeeded&&(window?.refreshOrders?.(),c(u.data))});const A=h("[data-wtf-score]"),E=h("[data-wtf-name]"),H=h("[data-wtf-email]"),O=h("[data-wtf-phone]"),F=h("[data-wtf-cpf]"),P=h("[data-wtf-birthday]"),R=h("[data-wtf-name-update]"),z=h("[data-wtf-last-name-update]"),I=h("[data-wtf-phone-update]"),M=h("[data-wtf-cpf-update]"),B=h("[data-wtf-birthday-update]"),Z=h("[data-wtf-edit-account-data]"),J=h("[data-wtf-update-account-data]"),q=[{field:R,validator:K},{field:z,validator:Q},{field:M,validator:ee},{field:I,validator:te},{field:B,validator:ne}];for(const{field:e,validator:t}of q)e&&(v(e,"blur",t),v(e,"input",()=>X(e,!0)));function G(e,t){e&&"INPUT"===e.tagName&&(e.value=t??"")}function V(e){return function(e){return e.trim()}(e).replace(/\s+/g," ")}function W(e){return function(t){return[e,t]}}function X(e,t){b(e.closest("[data-wtf-wrapper]"),"mensagemdeerro",!t)}function Y(e){return C(/^[a-zA-Z\s]+$/,e)}function K(){const e=W("wtfNameUpdate");if(!R)return e(!1);const t=V(x(R.value)),n=S(t)>1&&Y(t);return X(R,n),e(n)}function Q(){const e=W("wtfLastNameUpdate");if(!z)return e(!1);const t=V(x(z.value)),n=S(t)>0&&Y(t);return X(z,n),e(n)}function ee(){const e=W("wtfCpfUpdate");if(!M)return e(!1);const t=C(j,M.value)&&_(M.value);return X(M,t),e(t)}function te(){const e=W("wtfPhoneUpdate");if(!I)return e(!1);const t=C(k,I.value);return X(I,t),e(t)}function ne(){const e=W("wtfBirthdayUpdate");if(!B)return e(!1);const n=B.value;if(!function(e){const[n,o,r]=D(e,t),c=new Date(`${r}-${o}-${n}T00:00:00`);if(a(c.toString(),"Invalid Date"))return!1;const s=a(c.getUTCDate(),Number(n)),i=a(c.getUTCMonth()+1,Number(o)),u=a(c.getUTCFullYear(),Number(r));return s&&i&&u}(n))return e(!1);const o=C(U,n),[r,c,s]=D(n,t),i=new Date(`${s}-${c}-${r}T00:00:00.000Z`).getTime(),u=o&&Date.now()>i;return X(B,u),e(u)}I&&(v(I,"input",()=>{I.value=function(t){const a=(t,a,o,r)=>{const c=[];return n(a,c,`(${a}`),n(o,c,`) ${o}`),n(r,c,`-${r}`),c.join(e)};return S(t)<11?t.replace(/^(\d{0,2})(\d{0,4})(\d{0,4})/,a):t.replace(/^(\d{0,2})(\d{0,5})(\d{0,4})/,a)}(T(I.value))}),M&&(v(M,"input",()=>{M.value=T(M.value).replace(/^(\d{0,3})(\d{0,3})(\d{0,3})(\d{0,2})/,(t,a,o,r,c)=>{const s=[];return n(a,s,`${a}`),n(o,s,`.${o}`),n(r,s,`.${r}`),n(c,s,`-${c}`),s.join(e)})}),B&&(v(B,"input",()=>{B.value=T(B.value).replace(/^(\d{0,2})(\d{0,2})(\d{0,4})/,(e,n,a,o)=>[n,a,o].filter(Boolean).join(t))}),async function(){const e="Houve uma falha ao carregar seus dados. Tente novamente mais tarde.";try{const t=await fetch(`${o}/user/get`,{...p()});if(!t.ok){const n=await t.json();return f.call(t,n?.message??e)}const n=await t.json();return l.call(t,n)}catch(t){return f(e)}}().then(e=>{e.succeeded&&c(e.data)}))))}()}();