"use strict";(()=>{var P="; ";function g(e){let t=document.cookie.split(P).find(r=>{let{name:a}=N(r);return a===e});return t?N(t).value:!1}function N(e){let[t,r]=e.split("=");return{name:t,value:r}}function E(e,t,r={}){if(e.length===0)throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof t)||t.toString().length===0)throw new Error("'setCookie' should receive a valid cookie value");let a=[`${e}=${t}`];r?.expires&&r?.expires instanceof Date&&a.push("expires="+r.expires.toUTCString()),r.maxAge&&a.push(`maxAge=${r.maxAge}`),r?.sameSite&&typeof r?.sameSite=="string"&&a.push(`SameSite=${r?.sameSite}`),r?.path&&a.push(`path=${r?.path}`),r?.domain&&a.push(`domain=${r?.path}`),r?.httpOnly&&a.push("HttpOnly"),r?.secure&&a.push("Secure");let l=a.join(P);return document.cookie=l,l}var A="__Host-Talho-AuthToken",x="__Host-Talho-Session-Cookie",L="X-Talho-Session";function f(e){let t=this?.get(L);return t&&E(x,t,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+I(90))}),{message:e,succeeded:!1}}function b(e){let t=this?.get(L);return t&&E(x,t,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+I(90))}),{data:e,succeeded:!0}}function v(e=[],t="GET"){let r=new Headers({Accept:"application/json","Content-Type":"application/json"});for(let[h,M]of e)r.set(h,M);let a=g(x);a&&r.set(L,a);let l=g(A);return l&&r.set("Authorization",l),{method:t,headers:r}}function I(e){return 86400*1e3*e}var re=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});var X=null,O="oculto";function k(){return!!g(A)}function u(e,t=document){return t?t.querySelector(e):X}function S(e,t,r,a){if(e)return e.addEventListener(t,r,a),()=>e.removeEventListener(t,r,a)}function R(e,t){e&&e.removeAttribute(t)}function D(e,...t){e&&e.classList.add(...t)}function U(e,...t){e&&e.classList.remove(...t)}function C(e,t,r){return e?e.classList.toggle(t,r):!1}function H(e,t){e&&(e.textContent=typeof t=="string"?t:t.toString())}function G(e){return JSON.stringify(e)}function F(e){return e.length}function K(){return/^(([\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+(\.[\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+)*)|("[\p{L}\p{N}\s!#$%&'*+\/=?^_`{|}~.-]+"))@(([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*\.)+[a-zA-Z]{2,63}|(\[(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\]))$/u}function _(e,t){e&&e.focus(t)}var q={AC:"Acre",AL:"Alagoas",AP:"Amap\xE1",AM:"Amazonas",BA:"Bahia",CE:"Cear\xE1",DF:"Distrito Federal",ES:"Esp\xEDrito Santo",GO:"Goi\xE1s",MA:"Maranh\xE3o",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Par\xE1",PB:"Para\xEDba",PR:"Paran\xE1",PE:"Pernambuco",PI:"Piau\xED",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rond\xF4nia",RR:"Roraima",SC:"Santa Catarina",SP:"S\xE3o Paulo",SE:"Sergipe",TO:"Tocantins"},ne=Object.keys(q),se=Object.values(q);var V="https://xef5-44zo-gegm.b2.xano.io";(function(){let e="disabled",t="mensagemdeerro",r="/area-do-usuario/pedidos-de-compra",a="redirect_to",l="[data-wtf-general-error-message]",h={preventScroll:!1};async function M(o){let n="Houve uma falha ao realizar o login. Por favor, tente novamente mais tarde.";try{let s=await fetch(`${V}/api:t3reRXiD/auth/login`,{...v([],"POST"),body:G(o)});if(!s.ok){let c=await s.json();return f.call(s.headers,c?.message??n)}let i=await s.json();return b.call(s.headers,i)}catch{return f(n)}}async function J(){let o="Houve uma falha na autoriza\xE7\xE3o Google. Por favor, tente novamente mais tarde.",n=new URL(`${V}/api:h_RKfex8/oauth/google/init`);n.searchParams.set("redirect_uri",location.origin.concat("/acessos/google-social-login"));try{let s=await fetch(n,{...v()});if(!s.ok){let c=await s.json();return f.call(s.headers,c?.message??o)}let i=await s.json();return b.call(s.headers,i)}catch{return f(o)}}function Y(o){return o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function $(){let n=new URL(location.href).searchParams.get(a);return n?decodeURIComponent(n):r}if(k()){location.href=$();return}let T=u("#wf-form-login"),W=["name","method","aria-label","data-wf-page-id","data-wf-element-id","data-turnstile-sitekey"];if(T){for(let n of W)R(T,n);let o=T.parentNode;U(o,"w-form"),T.remove(),o.insertAdjacentHTML("afterbegin",T.outerHTML)}let d=u("#wf-form-login"),j=new URLSearchParams(location.search),p=u("[data-wtf-user]"),m=u("[data-wtf-password]"),y=u('[type="submit"]',d),Z=u("[data-wtf-google]");j.has("email")?(p&&(p.value=j.get("email")??""),_(m,h)):_(p,h);function z(o){return function(n){return[o,n]}}function w(o,n){if(!o)return;let s=o.closest("[data-wtf-wrapper]");C(s,t,!n)}function Q(o){o&&D(u(l,o),O)}function ee(o,n){let s=!n.succeeded,i=u(l,o);if(C(i,O,!s),!s)return;let c=i&&u("div",i);H(c,n.message)}function te(){let o=z("wtfUser");if(!p)return o(!1);let n=K().test(p.value);return w(p,n),o(n)}function oe(){let o=z("wtfPassword");if(!m)return o(!1);let n=F(m.value)>7;return w(m,n),o(n)}S(Z,"click",function(o){o.preventDefault(),J().then(n=>{n.succeeded&&(location.href=n.data.authUrl)})},{once:!0});let B=[{field:p,validator:te},{field:m,validator:oe}];for(let{field:o,validator:n}of B)S(o,"blur",n),S(o,"input",()=>w(o,!0));if(!d){console.warn("[WithTheFlow] Form was not founded at this page");return}S(d,"submit",async o=>{y?.setAttribute(e,e),o.preventDefault(),o.stopPropagation(),Q(d);let s=B.map(({validator:c})=>c).find(c=>c().at(1)===!1);if(s){let c=Y(s().at(0));return _(u(`[data-${c}]`,d),h),R(y,e)}let i=await M({email:p?.value,password:m?.value});if(i.succeeded){E(A,i.data.authToken,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(i.data.expiration)}),location.href=$();return}ee(d,f(i.message)),R(y,e)}),R(y,e)})();})();
