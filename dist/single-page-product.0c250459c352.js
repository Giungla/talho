"use strict";(()=>{var O="; ";function A(t){let n=document.cookie.split(O).find(e=>{let{name:o}=N(e);return o===t});return n?N(n).value:!1}function N(t){let[n,e]=t.split("=");return{name:n,value:e}}function M(t,n,e={}){if(t.length===0)throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof n)||n.toString().length===0)throw new Error("'setCookie' should receive a valid cookie value");let o=[`${t}=${n}`];e?.expires&&e?.expires instanceof Date&&o.push("expires="+e.expires.toUTCString()),e.maxAge&&o.push(`maxAge=${e.maxAge}`),e?.sameSite&&typeof e?.sameSite=="string"&&o.push(`SameSite=${e?.sameSite}`),e?.path&&o.push(`path=${e?.path}`),e?.domain&&o.push(`domain=${e?.path}`),e?.httpOnly&&o.push("HttpOnly"),e?.secure&&o.push("Secure");let r=o.join(O);return document.cookie=r,r}var st=401,w="__Host-Talho-AuthToken",I="__Host-Talho-Session-Cookie",k="X-Talho-Session";function it(t){!t||t.status!==st||(location.href=H("/acessos/entrar",{redirect_to:encodeURIComponent(location.pathname)}))}function $(t){let n=t?.headers.get(k);n&&M(I,n,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+D(90))})}function f(t){return $(this),it(this),{message:t,succeeded:!1}}function h(t){return $(this),{data:t,succeeded:!0}}function _(t=[],n="GET"){let e=new Headers({Accept:"application/json","Content-Type":"application/json"});for(let[s,u]of t)e.set(s,u);let o=A(I);o&&e.set(k,o);let r=A(w);return r&&e.set("Authorization",r),{method:n,headers:e}}function D(t){return 86400*1e3*t}var g=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});var S=null,c="oculto";function a(t,n=document){return n?n.querySelector(t):S}function p(t,n,e,o){if(t)return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function V(t,n){t&&t.removeAttribute(n)}function m(t,...n){t&&t.classList.add(...n)}function E(t,...n){t&&t.classList.remove(...n)}function l(t,n,e){return t?t.classList.toggle(n,e):!1}function d(t,n){t&&(t.textContent=typeof n=="string"?n:n.toString())}function H(t,n={}){let e=new URL(`${location.protocol}//${location.hostname}`),o=new URL(t,e);for(let[r,s]of Object.entries(n))o.searchParams.set(r,s);return o.toString()}function y(t){return JSON.stringify(t)}function P(t){return t.length}function C(t){return t===S}function v(t,n,e){return Math.max(t,Math.min(n,e))}var q="talho_cart_items";var F={AC:"Acre",AL:"Alagoas",AP:"Amap\xE1",AM:"Amazonas",BA:"Bahia",CE:"Cear\xE1",DF:"Distrito Federal",ES:"Esp\xEDrito Santo",GO:"Goi\xE1s",MA:"Maranh\xE3o",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Par\xE1",PB:"Para\xEDba",PR:"Paran\xE1",PE:"Pernambuco",PI:"Piau\xED",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rond\xF4nia",RR:"Roraima",SC:"Santa Catarina",SP:"S\xE3o Paulo",SE:"Sergipe",TO:"Tocantins"},ct=Object.keys(F),ut=Object.values(F);var U="https://xef5-44zo-gegm.b2.xano.io";var lt="selecionado",pt="carrinhoflutuante--visible",nt=`${U}/api:79PnTkh_`,T="click",dt=1,ft=10,Q="POST",K="{count}",z=[`Temos apenas ${K} unidade dispon\xEDvel.`,`Temos apenas ${K} unidades dispon\xEDveis.`],mt={quantity:1,stockCount:0,product:S,selectedVariation:S},L=location.pathname.split("/"),i=new Proxy(mt,{get(t,n){switch(n){case"variationsCount":return P(t.product?.variations??[]);case"hasPriceDifference":{let{price:e,full_price:o}=i.prices;return e!==o}case"prices":{let{product:e,selectedVariation:o}=t;if(!e||!i.hasSelectedVariation)return b();let r=e.variations.find(s=>s.id===o);return r?b(r.price,r.full_price):b()}case"BRLPrices":{let{price:e,full_price:o}=i.prices;return b(g.format(e),g.format(o))}case"computedFinalPrices":{let{quantity:e,prices:o}=i,r=o.price*e,s=o.full_price*e;return{price:{price:r,full_price:s},currency:{price:g.format(r),full_price:g.format(s)}}}case"hasSelectedVariation":return!C(t.selectedVariation);default:return Reflect.get(t,n)}},set(t,n,e){let o=Reflect.set(t,n,e);switch(n){case"quantity":d(yt,String(e??1)),vt();break;case"selectedVariation":Ct(),Reflect.set(i,"quantity",1);break;case"stockCount":xt(),B(0);break;case"product":{let r=e;Reflect.set(i,"stockCount",r?.stock_quantity??0),Reflect.set(i,"selectedVariation",r?.variations[0].id??S)}}return o}}),Y=a("[data-wtf-error-message-sku-maximum]"),gt=a("[data-wtf-error-message-invetory]"),St=a("[data-wtf-quantity-minus]"),Et=a("[data-wtf-quantity-plus]"),yt=a("[data-wtf-quantity-value]"),J=a("[data-wtf-price]"),X=a("[data-wtf-full-price]"),Pt=a("[data-wtf-total]"),W=a("[data-wtf-sku-list]"),Tt=a("[data-wtf-sku-item]"),G=a("[data-wtf-shipping-button]"),R=a("[data-wtf-shipping-form]"),x=a("[data-wtf-shipping-value]"),ot=a("[data-wtf-comprar]"),Z=a("[data-wtf-error-message-shipping]");function rt(t,n,e){return t.replace(n,e)}function b(t=0,n=0){return{price:t,full_price:n}}async function At(t){let n="Houve uma falha ao capturar o produto";try{let e=await fetch(`${nt}/product/single-product-page`,{..._([],Q),body:y({quantity:1,reference_id:t})});if(!e.ok){let r=await e.json();return f.call(e,r?.message??n)}let o=await e.json();return h.call(e,o)}catch{return f(n)}}function B(t){let n=t+i.quantity,e=Math.min(i.stockCount,ft),o=v(dt,e,n);o!==i.quantity&&(i.quantity=o)}function ht(t){i.product?.variations.some(({id:e})=>e===t)&&(i.selectedVariation=t)}async function _t(t){t.preventDefault();let{quantity:n,product:e,selectedVariation:o}=i;if(!o||!e||i.stockCount===0)return;let r=await Rt({quantity:n,sku_id:o,reference_id:e.slug});if(!r.succeeded)return alert("A adi\xE7\xE3o falhou");i.quantity=1,m(a("#carrinho-flutuante"),pt),localStorage.setItem(q,y(r.data))}async function Rt(t){let n="Falha ao adicionar o produto";try{let e=await fetch(`${nt}/cart/handle`,{..._([],Q),body:y({item:t,operation:"add"})});if(!e.ok){let r=await e.json();return f.call(e,r?.message??n)}let o=await e.json();return h.call(e,o)}catch{return f(`[CATCH] ${n}`)}}function Ct(){if(!W||!Tt||!i.product)return;let{selectedVariation:t,product:n}=i,e=document.createDocumentFragment(),o=a("[data-wtf-weight-selector]"),r=i.variationsCount<2;if(r)return o?.remove();l(o,c,r);for(let s of n?.variations){let u=document.createElement("div"),j=t===s.id;m(u,"text-block"),l(u,lt,j),d(u,rt(s.label,/\./g,",")),j||p(u,T,()=>ht(s.id)),e.appendChild(u)}W.replaceChildren(e)}function vt(){if(!i.product||!i.hasSelectedVariation)return;let n=s=>a("[data-wtf-price-value]",s),{BRLPrices:e,hasPriceDifference:o,computedFinalPrices:r}=i;d(n(J),e.price),d(n(X),e.full_price),d(n(Pt),r.currency.price),l(J,c,!o),l(X,c,!o)}function xt(){let{stockCount:t}=i,n=t<1;if(l(a("[data-wtf-shipping]"),c,n),l(a("[data-wtf-quantity-selector]"),c,n),l(ot,c,n),l(gt,c,t>0),l(Y,c,t>10||n))return;let o=P(z)-1;d(a("div",Y),rt(z[v(0,o,t-1)],K,t.toString()))}function tt(t){return t.replace(/^(\d{0,5})(\d{0,3})/,(n,e,o)=>{let r=[];for(let s of[e,o])s&&r.push(s);return r.join("-")})}function et(){let t=a("form",R);if(!t)return;let n=["name","method","data-name","aria-label","data-wf-page-id","data-wf-element-id","data-turnstile-sitekey"];for(let r of n)V(t,r);E(R,"w-form");let e=t.parentElement;e.innerHTML=t.outerHTML;let o=a("#shipping-cep-form");o&&(p(o,"input",r=>{r.stopPropagation();let s=r.target,u=s.value.replace(/\D+/g,"");s.name!=="cep"||s.value===tt(u)||!r.isTrusted||(s.value=tt(u),s.dispatchEvent(new Event("input")))}),p(o,"submit",async r=>{r.preventDefault();let s=o.cep.value,u=await Lt({cep:s,reference_id:L[P(L)-1]});if(l(Z,c,u.succeeded),!u.succeeded){d(a("div",Z),u.message);return}switch(u.data.type){case"quotation":return at(u.data.data);case"locationlist":return bt(u.data.data)}}))}function at(t){m(G,c),m(R,c),E(x,c);let n=Math.max(t.total/100-(t.has_subsidy?t.subsidy_value:0),0);d(a("[data-wtf-quotation-price]",x),n===0?"Frete gr\xE1tis":g.format(n)),p(a("[data-wtf-quotation-reload]",x),T,e=>{E(R,c),m(x,c)},{once:!0})}function bt(t){console.log(t.length," localiza\xE7\xF5es recebidas")}async function Lt(t){let n="Houve uma falha ao gerar a cota\xE7\xE3o";try{let e=await fetch(`${U}/api:i6etHc7G/site/product-delivery`,{..._([],Q),body:y(t)});if(!e.ok){let r=await e.json();return f.call(e,r?.message??n)}let o=await e.json();return h.call(e,o)}catch{return f(n)}}At(L[P(L)-1]).then(t=>{if(!t.succeeded)return;i.product=t.data.product;let n=t.data.delivery;C(n)||(et(),at(n))}).then(()=>{p(Et,T,()=>B(1)),p(St,T,()=>B(-1)),p(ot,T,_t),p(G,T,t=>{t.preventDefault(),m(G,c),E(R,c),et()},{once:!0})});})();
