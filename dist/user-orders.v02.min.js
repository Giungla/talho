(()=>{let g=null,y="disabled",b="oculto",_="talho_cart_items",k="carrinhoflutuante--visible",T="https://xef5-44zo-gegm.b2.xano.io",j=T+"/api:79PnTkh_",C=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"}),A=new Set;function N(t){return JSON.stringify(t)}function e(t,a,e){return t.split(a,e)}function n(...t){return Math.max(...t)}function a(t){var[t,a]=e(t,"=");return{name:t,value:a}}r="__Host-Talho-AuthToken";var r,t=!!(t=e(document.cookie,"; ").find(t=>{t=a(t).name;return t===r}))&&a(t).value;let E={Accept:"application/json","Content-Type":"application/json"},L={...E,Authorization:t};if(t){let o=new Proxy({list:[]},{get(t,a){var e=t.list.length;switch(a){case"hasOrders":return 0<e;case"ordersCount":return e;default:return t[a]}},set(t,a,e){t=Reflect.set(t,a,e);if(!t)return t;if("list"===a){var{list:e,hasOrders:t}=o;if(c&&d&&w){O(i,b,t),O(c,b,!t);var s,r=document.createDocumentFragment();for(s of e){var n=d.cloneNode(!0),u=(x(M("[data-wtf-order-total]",n),s.total),x(M("[data-wtf-order-status]",n),s.status),x(M("[data-wtf-created-at]",n),s.created_at),x(M("[data-wtf-payment-method]",n),s.payment_method),x(M("[data-wtf-transaction-id]",n),s.transaction_id),M("[data-wtf-product-list]",n));for(let{name:t,slug:a,product_id:d,sku_id:e,quantity:r,unit_price:n,image:o,review:i,has_stock:c}of s.order_items){var l=w.cloneNode(!0),f=M("[data-wtf-review-area]",l),m=(H(M("[data-wtf-product-anchor]",l),"href","/produtos/"+a),M("[data-wtf-buy-again-cta]",l));if(c?q(m,"click",()=>(async({sku_id:t,slug:a})=>{A.has(a)||(A.add(a),(t=await(async t=>{var a="Falha ao adicionar o produto";try{var e=await fetch(j+"/cart/handle",{method:"POST",headers:E,credentials:"include",body:N({item:t,operation:"add"})});return e.ok?B(await e.json()):I((await e.json())?.message??a)}catch(t){return I("[CATCH] "+a)}})({sku_id:t,quantity:1,reference_id:a})).succeeded&&(S(M("#carrinho-flutuante"),k),localStorage.setItem(_,N(t.data))),A.delete(a))})({sku_id:e,slug:a})):z(m),x(M("[data-wtf-product-name]",l),t),x(M("[data-wtf-product-price]",l),C.format(n/100)),x(M("[data-wtf-product-subtotal]",l),C.format(n*r/100)),void 0===i){let n=h?.cloneNode(!0)??g,i=v?.cloneNode(!0)??g;F(n,b),s.pago?(q(M("[data-wtf-not-rated-cta]",n),"click",()=>{var t,o=d,a=n,e=i;if(a&&e){S(a,b),F(e,b);var r=M("form",e),a=r?.parentElement;if(r&&a){for(t of["id","name","method","data-name","aria-label","data-wf-page-id","data-wf-element-id","data-turnstile-sitekey"])P(r,t);z(r),R(a),a.insertAdjacentHTML("afterbegin",r.outerHTML);let n=M("form",e);P(M('[type="submit"]',n),y),q(n,"submit",async t=>{var a,e,r;t.preventDefault(),t.stopPropagation(),t.isTrusted&&t.submitter&&(H(t.submitter,y,y),(a=await(async({comment:t,rating:a,product_id:e})=>{var r="Falha ao gerar a avaliação, tente novamente mais tarde.";try{var n=await fetch(T+`/api:9ixgU7Er/ratings/${e}/create`,{method:"POST",headers:L,body:N({rating:a,comment:t})});return n.ok?B(await n.json()):I((await n.json())?.message??r)}catch(t){return I(r)}})({product_id:o,comment:n.comment.value,rating:parseInt(n.rating.value)})).succeeded?(a=a.data,(e=n)&&(e=e.closest("[data-wtf-review-area]"))&&(r=p?.cloneNode(!0))&&(D(r,a.rating),x(M("[data-wtf-evaluated-comment]",r),a.comment),F(r,b),R(e,r))):P(t.submitter,y))})}}},{once:!0}),z(M("[data-wtf-not-rated-unpaid]",n))):(z(M("[data-wtf-not-rated-paid]",n)),z(M("[data-wtf-not-rated-cta]",n))),R(f,n,i)}else{m=p?.cloneNode(!0);x(M("[data-wtf-evaluated-comment]",m),i.comment),D(m,i.rating),F(m,b),R(f,m)}u.insertAdjacentElement("afterbegin",l)}r.appendChild(n)}R(c,r)}}return!0}}),i=M("[data-wtf-has-no-orders]"),d=M("[data-wtf-order-template]"),c=M("[data-wtf-orders-container]"),w=M("[data-wtf-product-item]",c),p=M("[data-wtf-evaluated]"),h=M("[data-wtf-not-rated]"),v=M("[data-wtf-evaluation-form]");for(var s of[p,h,v,w])z(s);function x(t,a){t&&(t.textContent=a)}function S(t,...a){t&&t.classList.add(...a)}function F(t,...a){t&&t.classList.remove(...a)}function O(t,a,e){t&&t.classList.toggle(a,e)}function P(t,a){t&&t.removeAttribute(a)}function H(t,a,e){t&&t.setAttribute(a,e)}function M(t,a=document){return a?a.querySelector(t):g}function q(t,a,e,r){t&&t.addEventListener(a,e,r)}function B(t){return{data:t,succeeded:!0}}function I(t){return{message:t,succeeded:!1}}function R(t,...a){t&&t.replaceChildren(...a.filter(Boolean))}function z(t){t&&t.remove()}function D(t,a){if(t){var e=M("[data-wtf-evaluated-star-section]",t);if(e){var r=n(e.childElementCount-n(1,a),0);for(let t=0;t++<r;)z(e.lastElementChild)}}}(async()=>{var a="Falha ao buscar os pedidos";try{var t=await fetch(T+"/api:TJEuMepe/user/orders",{headers:L});return t.ok?B(await t.json()):I((await t.json())?.message??a)}catch(t){return I(a)}})().then(t=>{t.succeeded&&(o.list=t.data)})}else location.href="/acessos/entrar"})();