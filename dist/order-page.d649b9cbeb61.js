!function(){"use strict";var e="__Host-Talho-Session-Cookie",t="X-Talho-Session";function r(r){const o=r?.headers.get(t);o&&function(e,t,r={}){if(0===d(e))throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof t)||0===d(t.toString()))throw new Error("'setCookie' should receive a valid cookie value");const o=[`${e}=${t}`];r?.expires&&r?.expires instanceof Date&&o.push("expires="+r.expires.toUTCString()),r.maxAge&&o.push(`maxAge=${r.maxAge}`),r?.sameSite&&"string"==typeof r?.sameSite&&o.push(`SameSite=${r?.sameSite}`),r?.path&&o.push(`path=${r?.path}`),r?.domain&&o.push(`domain=${r?.path}`),r?.httpOnly&&o.push("HttpOnly"),r?.secure&&o.push("Secure");const i=o.join(u);document.cookie=i}(e,o,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+1e3*m*90)})}function o(e){return r(this),this&&401===this.status&&(location.href=c("/acessos/entrar",{redirect_to:encodeURIComponent(location.pathname+location.search)})),{message:e,succeeded:!1}}function i(e){return r(this),{data:e,succeeded:!0}}function n(r=[],o="GET"){const i=new Headers({Accept:"application/json","Content-Type":"application/json"});for(const[e,t]of r)i.set(e,t);const n=h(e);n&&i.set(t,n);const s=h("__Host-Talho-AuthToken");return s&&i.set("Authorization",s),{method:o,headers:i}}var s=null;function a(e,t=document){return t?t.querySelector(e):s}function c(e,t={}){const r=new URL(`${location.protocol}//${location.hostname}`),o=new URL(e,r);for(const[i,n]of Object.entries(t))o.searchParams.set(i,n);return o.toString()}function d(e){return e.length}var u="; ";function h(e){const t=document.cookie.split(u).find(t=>{const{name:r}=p(t);return r===e});return!!t&&p(t).value}function p(e){const[t,r]=e.split("=");return{name:t,value:r}}var m=86400,l=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"}),{createApp:g}=window.Vue,y="-";g({name:"TalhoOrderPage",data:()=>({order:s}),async created(){const e=new URLSearchParams(location.search).get("order");if(!e)return void(location.href=c("/"));const t=await this.getOrder(e);var r;t.succeeded?(this.order=t.data,(r=a("[data-wtf-loader]"))&&r.classList.toggle("oculto",!0)):location.href=c("/")},methods:{async getOrder(e){const t="Falha ao capturar o pedido";try{const r=await fetch(`https://xef5-44zo-gegm.b2.xano.io/api:5lp3Lw8X/order-details/${e}`,{...n()});if(!r.ok){const e=await r.json();return o.call(r,e?.message??t)}const s=await r.json();return i.call(r,s)}catch(r){return o(t)}}},computed:{isPIXPayment(){return"pix"===this.order?.payment_method},hasPIXDiscount(){return(this.order?.pix_discount_percentual??0)>0},getDiscountPIXPrice(){return l.format((this.order?.pix_discount_price??0)/100*-1)},name(){return this.order?.name??y},email(){return this.order?.email??y},cpf(){return this.order?.cpf_cnpj??y},phone(){return this.order?.phone??y},shipping(){const{number:e=y,cep:t=y,address:r=y,state:o=y,city:i=y,complement:n=y,neighborhood:s=y,user_name:a=y}=this.order?.delivery.address??{};return{user_name:a,cep:t,address:r,number:e,complement:n,neighborhood:s,city:i,state:o}},billing(){const{cep:e=y,address:t=y,number:r=y,complement:o=y,neighborhood:i=y,city:n=y,state:s=y}=this.order?.billing_address??{};return{cep:e,address:t,number:r,complement:o,neighborhood:i,city:n,state:s}},hasOrderDiscount(){return e=this.order?.discount_code,!(e===s);var e},getOrderSubtotalPriceFormatted(){const e=this.order?.subtotal??0;return l.format(e/100)},getOrderPriceFormatted(){const e=this.order?.total;return l.format("number"==typeof e?e/100:0)},getOrderShipping(){const e=this.order?.delivery.quotation_price;return"number"==typeof e?e/100:0},getOrderShippingPriceFormatted(){return l.format(this.getOrderShipping)},getOrderDiscountPriceFormatted(){return l.format((this.order?.discount??0)/100*-1)},getParsedProducts(){const{order_items:e=[]}=this.order??{};return e.map(({name:e,product_id:t,unit_price:r,quantity:o})=>({quantity:o,title:e,key:t,unit_amount:l.format(r/100),final_price:l.format(r*o/100)}))},hasPriority(){return this.order?.delivery.has_priority??!1},getPriorityFee(){return this.hasPriority?this.order?.delivery.priority_price/100:0},getPriorityFeePriceFormatted(){return l.format(this.getPriorityFee)},hasSubsidy(){return this.order?.delivery.has_subsidy??!1},getDeliverySubsidy(){return this.hasSubsidy?-1*Math.min(this.getOrderShipping,this.order?.delivery.subsidy_price/100):0},getDeliverySubsidyPriceFormatted(){return l.format(this.getDeliverySubsidy)}}}).mount(a("#orderapp")),window.addEventListener("pageshow",e=>{e.persisted&&window.location.reload()})}();