!function(){"use strict";var e="__Host-Talho-Session-Cookie",t="X-Talho-Session";function r(r){const o=r?.headers.get(t);o&&function(e,t,r={}){if(0===a(e))throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof t)||0===a(t.toString()))throw new Error("'setCookie' should receive a valid cookie value");const o=[`${e}=${t}`];r?.expires&&r?.expires instanceof Date&&o.push("expires="+r.expires.toUTCString()),r.maxAge&&o.push(`maxAge=${r.maxAge}`),r?.sameSite&&"string"==typeof r?.sameSite&&o.push(`SameSite=${r?.sameSite}`),r?.path&&o.push(`path=${r?.path}`),r?.domain&&o.push(`domain=${r?.path}`),r?.httpOnly&&o.push("HttpOnly"),r?.secure&&o.push("Secure");const n=o.join(c);document.cookie=n}(e,o,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+1e3*h*14)})}function o(e){return r(this),this&&401===this.status&&(location.href=function(e,t={}){const r=new URL(`${location.protocol}//${location.hostname}`),o=new URL(e,r);for(const[n,s]of Object.entries(t))o.searchParams.set(n,s);return o.toString()}("/acessos/entrar",{redirect_to:encodeURIComponent(location.pathname+location.search)})),{message:e,succeeded:!1}}function n(e){return r(this),{data:e,succeeded:!0}}function s(r=[],o="GET"){const n="application/json",s=new Headers({Accept:n,"Content-Type":n});for(const[e,t]of r)s.set(e,t);const i=d(e);i&&s.set(t,i);const a=d("__Host-Talho-AuthToken");return a&&s.set("Authorization",a),{method:o,headers:s}}var i=null;function a(e){return e.length}var c="; ";function d(e){const t=document.cookie.split(c).find(t=>{const{name:r}=u(t);return r===e});return!!t&&u(t).value}function u(e){const[t,r]=e.split("=");return{name:t,value:r}}var h=86400,{createApp:p}=Vue,l="transactionid",m="pix",f="creditcard",y={[m]:"PIX",[f]:"Cartão de crédito"};p({name:"TalhoOrderNoteApp",setup:()=>({}),data:()=>({order:i}),async created(){const e=new URLSearchParams(location.search).get(l);if(!e)return;const t=await this.getOrder(e);t.succeeded&&(this.order=t.data)},methods:{async getOrder(e){const t="Não foi possível encontrar o pedido";try{const r=await fetch(`https://xef5-44zo-gegm.b2.xano.io/api:jiIoKYhH/order/delivery-prepare?${l}=${e}`,{...s()});if(!r.ok){const e=await r.json();return o.call(r,e?.message??t)}const i=await r.json();return n.call(r,i)}catch(r){return o(t)}}},computed:{company(){return this.order?.company??i},customer(){return this.order?.customer??i},items(){return this.order?.items??i},itemsCount(){return a(this.items??[])},cOrder(){if(!this.order)return i;const{date:e,time:t,total:r,number:o,shipping:n,subtotal:s,discounts:a,change_for:c,notes_short:d,observations:u,payment_method:h}=this.order.order;return{date:e,time:t,total:r,number:o,shipping:n,subtotal:s,discounts:a,change_for:c,notes_short:d,observations:u,payment_method:y?.[h]}},deliveryDate(){if(!this.order)return i;const{order:e}=this.order;return`${e.delivery_date} ${e.delivery_hour}`},priorityTax(){const e=this.order?.order;return e&&e.has_priority?e?.priority_price:i},subsidyDiscount(){const e=this.order?.order;return e&&e.has_subsidy?e?.subsidy_price:i},pixDiscount(){const e=this.order?.order;return e&&"pix"===e.payment_method?{discountPrice:e.pix_discount_price,discountPercentual:e.pix_discount_percentual}:i},hasPaid(){return this.order?.order.paid??!1},deliveredAt(){return this.order?.order.delivered_at??i}},watch:{},directives:{}}).mount("#note-order"),window.addEventListener("pageshow",e=>{e.persisted&&window.location.reload()})}();