"use strict";(()=>{var H="; ";function g(e){let t=document.cookie.split(H).find(n=>{let{name:a}=D(n);return a===e});return t?D(t).value:!1}function D(e){let[t,n]=e.split("=");return{name:t,value:n}}function _(e,t,n={}){if(e.length===0)throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof t)||t.toString().length===0)throw new Error("'setCookie' should receive a valid cookie value");let a=[`${e}=${t}`];n?.expires&&n?.expires instanceof Date&&a.push("expires="+n.expires.toUTCString()),n.maxAge&&a.push(`maxAge=${n.maxAge}`),n?.sameSite&&typeof n?.sameSite=="string"&&a.push(`SameSite=${n?.sameSite}`),n?.path&&a.push(`path=${n?.path}`),n?.domain&&a.push(`domain=${n?.path}`),n?.httpOnly&&a.push("HttpOnly"),n?.secure&&a.push("Secure");let d=a.join(H);return document.cookie=d,d}var v="__Host-Talho-AuthToken",w="__Host-Talho-Session-Cookie",L="X-Talho-Session";function C(e){let t=this?.get(L);return t&&_(w,t,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+O(90))}),{message:e,succeeded:!1}}function F(e){let t=this?.get(L);return t&&_(w,t,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+O(90))}),{data:e,succeeded:!0}}function U(e=[],t="GET"){let n=new Headers({Accept:"application/json","Content-Type":"application/json"});for(let[I,x]of e)n.set(I,x);let a=g(w);a&&n.set(L,a);let d=g(v);return d&&n.set("Authorization",d),{method:t,headers:n}}function O(e){return 86400*1e3*e}var se=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});var W=null,E="oculto";function q(){return!!g(v)}function c(e,t=document){return t?t.querySelector(e):W}function y(e,t,n,a){if(e)return e.addEventListener(t,n,a),()=>e.removeEventListener(t,n,a)}function $(e,t,n){e&&e.setAttribute(t,n)}function S(e,t){e&&e.removeAttribute(t)}function V(e,...t){e&&e.classList.add(...t)}function G(e,...t){e&&e.classList.remove(...t)}function A(e,t,n){return e?e.classList.toggle(t,n):!1}function h(e){A(c("[data-wtf-loader]"),E,!e)}function M(e,t){e&&(e.textContent=typeof t=="string"?t:t.toString())}function K(e){return JSON.stringify(e)}function j(e){return e.length}function P(e,t){e&&e.focus(t)}var z={AC:"Acre",AL:"Alagoas",AP:"Amap\xE1",AM:"Amazonas",BA:"Bahia",CE:"Cear\xE1",DF:"Distrito Federal",ES:"Esp\xEDrito Santo",GO:"Goi\xE1s",MA:"Maranh\xE3o",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Par\xE1",PB:"Para\xEDba",PR:"Paran\xE1",PE:"Pernambuco",PI:"Piau\xED",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rond\xF4nia",RR:"Roraima",SC:"Santa Catarina",SP:"S\xE3o Paulo",SE:"Sergipe",TO:"Tocantins"},ae=Object.keys(z),ie=Object.values(z);var Y="https://xef5-44zo-gegm.b2.xano.io";(function(){let e="mensagemdeerro",t="disabled",n="[data-wtf-wrapper]",a={preventScroll:!1};if(!q()){let r=encodeURIComponent(location.pathname);location.href=`/acessos/entrar?redirect_to=${r}`;return}function d(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function I(r,o){if(!r)return;let s=!o.succeeded,i=c("[data-wtf-error-update-password]",r),u=c("[data-wtf-success-update-password]",r);if(A(i,E,!s),A(u,E,s),!s){u&&setTimeout(()=>V(u,E),8e3);return}let p=i&&c("div",i);M(p,o.message)}function x(r){return function(o){return[r,o]}}function N(r,o){let s=r.closest(n);A(s,e,!o)}async function Q(r){let o="Houve uma falha ao atualizar sua senha. Por favor, tente novamente mais tarde.";try{let s=await fetch(`${Y}/api:TJEuMepe/user/change-password`,{...U([],"PUT"),body:K(r)});if(!s.ok){let u=await s.json();return C.call(s.headers,u?.message??o)}let i=await s.json();return F.call(s.headers,i)}catch{return C(o)}}let T=c("#wf-form-update-password"),ee=["name","method","data-name","aria-label","data-wf-page-id","data-wf-element-id","data-turnstile-sitekey"];if(T){for(let o of ee)S(T,o);let r=T.parentElement;G(r,"w-form"),T.remove(),r.insertAdjacentHTML("afterbegin",T.outerHTML)}let f=c("[data-wtf-password]"),m=c("[data-wtf-confirm-password]");function te(r){return o=>o.test(r)}let B=[{field:f,validator:ne},{field:m,validator:Z}];for(let{field:r,validator:o}of B)r&&(y(r,"blur",o),y(r,"input",()=>N(r,!0)));function re(r){let o=te(r);return{hasNumber:o(/\d/),hasLowercase:o(/[a-z]/),hasUppercase:o(/[A-Z]/),hasMinLength:o(/.{8,}/),hasSpecialChar:o(/[!@#$%^&*()_+{}\[\]:;<>,.?\/~\\-]/)}}function oe({hasNumber:r,hasLowercase:o,hasUppercase:s,hasMinLength:i,hasSpecialChar:u}){let p=(b,k)=>`Sua senha deve conter pelo menos ${b} ${k}`;return i?r?u?o?s?!1:p(1,"letra mai\xFAscula"):p(1,"letra min\xFAscula"):p(1,"caractere especial"):p(1,"n\xFAmero"):p(8,"caracteres")}function J(r,o){if(!r)return;let s=c("[data-wtf-field-error] div",r.closest(n));M(s,o)}function X(r,o){return r&&o&&r?.value===o?.value}function ne(){let r=x("wtfPassword");if(!f)return r(!1);let{hasNumber:o,hasMinLength:s,hasLowercase:i,hasUppercase:u,hasSpecialChar:p}=re(f.value),b=o&&i&&u&&p&&s,k=oe({hasNumber:o,hasLowercase:i,hasUppercase:u,hasMinLength:s,hasSpecialChar:p});return J(f,k||""),N(f,b),j(m?.value??"")>0&&X(f,m)&&Z(),r(b)}function Z(){let r=x("wtfConfirmPassword"),o=X(f,m);return J(m,o?"":"As senhas informadas n\xE3o conferem"),m&&N(m,o),r(o)}let l=c("#wf-form-update-password"),R=c('[type="submit"]',l);S(R,t),l&&(y(l,"submit",async r=>{r.preventDefault(),r.stopPropagation(),$(R,t,t);let o=B.map(({validator:i})=>i).find(i=>i().at(1)===!1);if(o){let i=d(o().at(0)),u=c(`[data-${i}]`,l);return P(u,a),setTimeout(()=>{u?.dispatchEvent(new FocusEvent("blur")),P(u,a)},0),S(R,t)}h(!0);let s=await Q({password:l?.password.value,confirm_password:l?.confirm_password.value});if(I(l,s),S(R,t),!s.succeeded)return h(!1);l.reset(),h(!1)}),h(!1))})();})();
