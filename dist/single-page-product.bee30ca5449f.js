!function(){"use strict";var t="__Host-Talho-Session-Cookie",e="X-Talho-Session";function a(a){const n=a?.headers.get(e);n&&function(t,e,a={}){if(0===w(t))throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof e)||0===w(e.toString()))throw new Error("'setCookie' should receive a valid cookie value");const n=[`${t}=${e}`];a?.expires&&a?.expires instanceof Date&&n.push("expires="+a.expires.toUTCString()),a.maxAge&&n.push(`maxAge=${a.maxAge}`),a?.sameSite&&"string"==typeof a?.sameSite&&n.push(`SameSite=${a?.sameSite}`),a?.path&&n.push(`path=${a?.path}`),a?.domain&&n.push(`domain=${a?.path}`),a?.httpOnly&&n.push("HttpOnly"),a?.secure&&n.push("Secure");const r=n.join(y);document.cookie=r}(t,n,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+1e3*_*14)})}function n(t,e=!1){return a(this),e&&this&&401===this.status&&(location.href=function(t,e={}){const a=new URL(`${location.protocol}//${location.hostname}`),n=new URL(t,a);for(const[r,o]of Object.entries(e))n.searchParams.set(r,o);return n.toString()}("/acessos/entrar",{redirect_to:encodeURIComponent(location.pathname+location.search)})),{message:t,succeeded:!1}}function r(t){return a(this),{data:t,succeeded:!0}}function o(a=[],n="GET"){const r="application/json",o=new Headers({Accept:r,"Content-Type":r});for(const[t,e]of a)o.set(t,e);const i=g(t);i&&o.set(e,i);const c=g("__Host-Talho-AuthToken");return c&&o.set("Authorization",c),{method:n,headers:o}}var i=null,c="oculto";function s(t,e=document){return e?e.querySelector(t):i}function u(t,e,a,n){if(t)return t.addEventListener(e,a,n),()=>t.removeEventListener(e,a,n)}function l(t,e){t&&t.removeAttribute(e)}function d(t,...e){t&&t.classList.add(...e)}function f(t,...e){t&&t.classList.remove(...e)}function p(t,e,a){return!!t&&t.classList.toggle(e,a)}function h(t,e){t&&(t.textContent="string"==typeof e?e:e.toString())}function m(t){return JSON.stringify(t)}function w(t){return t.length}function v(t){return t===i}var y="; ";function g(t){const e=document.cookie.split(y).find(e=>{const{name:a}=k(e);return a===t});return!!e&&k(e).value}function k(t){const[e,a]=t.split("=");return{name:e,value:a}}var _=86400,S=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"}),b="https://xef5-44zo-gegm.b2.xano.io",q=`${b}/api:79PnTkh_`,x="click",C="POST",T={quantity:1,stockCount:0,product:i,selectedVariation:i},$=location.pathname.split("/"),L=new Proxy(T,{get(t,e){switch(e){case"variationsCount":return w(t.product?.variations??[]);case"hasPriceDifference":{const{price:t,full_price:e}=L.prices;return t!==e}case"prices":{const{product:e,selectedVariation:a}=t;if(!e||!L.hasSelectedVariation)return z();const n=e.variations.find(t=>t.id===a);return n?z(n.price,n.full_price):z()}case"BRLPrices":{const{price:t,full_price:e}=L.prices;return z(S.format(t),S.format(e))}case"computedFinalPrices":{const{quantity:t,prices:e}=L,a=e.price*t,n=e.full_price*t;return{price:{price:a,full_price:n},currency:{price:S.format(a),full_price:S.format(n)}}}case"hasSelectedVariation":return!v(t.selectedVariation);default:return Reflect.get(t,e)}},set(t,e,a){const n=Reflect.set(t,e,a);switch(e){case"quantity":h(V,String(a??1)),function(){if(!L.product||!L.hasSelectedVariation)return;const t=t=>s("[data-wtf-price-value]",t),{BRLPrices:e,hasPriceDifference:a,computedFinalPrices:n}=L;h(t(j),e.price),h(t(D),e.full_price),h(t(H),n.currency.price),p(j,c,!a),p(D,c,!a)}();break;case"selectedVariation":!function(){if(!A||!E||!L.product)return;const{selectedVariation:t,product:e}=L,a=document.createDocumentFragment(),n=s("[data-wtf-weight-selector]");L.variationsCount,p(n,c,!1);for(const r of e?.variations){const e=document.createElement("div"),n=t===r.id;d(e,"text-block"),p(e,"selecionado",n),h(e,I(r.label,/\./g,",")),n||u(e,x,()=>N(r.id)),a.appendChild(e)}A.replaceChildren(a)}(),Reflect.set(L,"quantity",1);break;case"stockCount":G(0);break;case"product":{const t=a;Reflect.set(L,"stockCount",t?.stock_quantity??0),Reflect.set(L,"selectedVariation",t?.variations[0].id??i)}}return n}});s("[data-wtf-error-message-sku-maximum]"),s("[data-wtf-error-message-invetory]");var R=s("[data-wtf-quantity-minus]"),P=s("[data-wtf-quantity-plus]"),V=s("[data-wtf-quantity-value]"),j=s("[data-wtf-price]"),D=s("[data-wtf-full-price]"),H=s("[data-wtf-total]"),A=s("[data-wtf-sku-list]"),E=s("[data-wtf-sku-item]"),F=s("[data-wtf-shipping-button]"),M=s("[data-wtf-shipping-form]"),O=s("[data-wtf-shipping-value]"),B=s("[data-wtf-comprar]"),U=s("[data-wtf-error-message-shipping]");function I(t,e,a){return t.replace(e,a)}function z(t=0,e=0){return{price:t,full_price:e}}function G(t){const e=(a=t+L.quantity,Math.max(1,Math.min(10,a)));var a;e!==L.quantity&&(L.quantity=e)}function N(t){const e=L.product?.variations.some(({id:e})=>e===t);e&&(L.selectedVariation=t)}async function J(t){t.preventDefault();const{quantity:e,product:a,selectedVariation:i}=L;if(!i||!a)return;const c=await async function(t){const e="Falha ao adicionar o produto";try{const a=await fetch(`${q}/cart/handle`,{...o([],C),body:m({item:t,operation:"add"})});if(!a.ok){const t=await a.json();return n.call(a,t?.message??e)}const i=await a.json();return r.call(a,i)}catch(a){return n(`[CATCH] ${e}`)}}({quantity:e,sku_id:i,reference_id:a.slug});if(!c.succeeded)return alert("A adição falhou");L.quantity=1,d(s("#carrinho-flutuante"),"carrinhoflutuante--visible"),localStorage.setItem("talho_cart_items",m(c.data))}function X(t){return t.replace(/^(\d{0,5})(\d{0,3})/,(t,e,a)=>{const n=[];for(const r of[e,a])r&&n.push(r);return n.join("-")})}function K(){const t=s("form",M);if(!t)return;const e=["name","method","data-name","aria-label","data-wf-page-id","data-wf-element-id","data-turnstile-sitekey"];for(const n of e)l(t,n);f(M,"w-form"),t.parentElement.innerHTML=t.outerHTML;const a=s("#shipping-cep-form");a&&(u(a,"input",t=>{t.stopPropagation();const e=t.target,a=e.value.replace(/\D+/g,"");"cep"===e.name&&e.value!==X(a)&&t.isTrusted&&(e.value=X(a),e.dispatchEvent(new Event("input")))}),u(a,"submit",async t=>{t.preventDefault();const e=a.cep.value,i=await async function(t){const e="Houve uma falha ao gerar a cotação";try{const a=await fetch(`${b}/api:i6etHc7G/site/product-delivery`,{...o([],C),body:m(t)});if(!a.ok){const t=await a.json();return n.call(a,t?.message??e)}const i=await a.json();return r.call(a,i)}catch(a){return n(e)}}({cep:e,reference_id:$[w($)-1]});if(p(U,c,i.succeeded),i.succeeded)switch(i.data.type){case"quotation":return Q(i.data.data);case"locationlist":return void i.data.data}else h(s("div",U),i.message)}))}function Q(t){d(F,c),d(M,c),f(O,c);const e=Math.max(t.total/100-(t.has_subsidy?t.subsidy_value:0),0);h(s("[data-wtf-quotation-price]",O),0===e?"Frete grátis":S.format(e)),u(s("[data-wtf-quotation-reload]",O),x,t=>{f(M,c),d(O,c)},{once:!0})}(async function(t){const e="Houve uma falha ao capturar o produto";try{const a=await fetch(`${q}/product/single-product-page`,{...o([],C),body:m({quantity:1,reference_id:t})});if(!a.ok){const t=await a.json();return n.call(a,t?.message??e)}const i=await a.json();return r.call(a,i)}catch(a){return n(e)}})($[w($)-1]).then(t=>{if(!t.succeeded)return;L.product=t.data.product;const e=t.data.delivery;v(e)||(K(),Q(e))}).then(()=>{u(P,x,()=>G(1)),u(R,x,()=>G(-1)),u(B,x,J),u(F,x,t=>{t.preventDefault(),d(F,c),f(M,c),K()},{once:!0})})}();