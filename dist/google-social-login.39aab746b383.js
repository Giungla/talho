"use strict";(()=>{(function(){"use strict";let s="__Host-Talho-AuthToken",c="/area-do-usuario/pedidos-de-compra";function h(t,o,e={}){if(t.length===0)throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof o)||o.toString().length===0)throw new Error("'setCookie' should receive a valid cookie value");let n=[`${t}=${o}`];e?.expires&&e?.expires instanceof Date&&n.push("expires="+e.expires.toUTCString()),e?.sameSite&&typeof e?.sameSite=="string"&&n.push(`SameSite=${e?.sameSite}`),e?.path&&n.push(`path=${e?.path}`),e?.domain&&n.push(`domain=${e?.path}`),e?.httpOnly&&n.push("HttpOnly"),e?.secure&&n.push("Secure");let i=n.join("; ");return document.cookie=i,i}function l(t){let o=document.cookie.split("; ").find(e=>{let{name:n}=u(e);return n===t});return o?u(o).value:!1}function u(t){let[o,e]=t.split("=");return{name:o,value:e}}function f(){return!!l(s)}if(f()){location.href=c;return}function a(t){return{message:t,succeeded:!1}}function d(t){return{data:t,succeeded:!0}}async function p(t){let o="Houve uma falha na autentica\xE7\xE3o via Google. Por favor, tente novamente mais tarde.";if(t===!1)return a(o);let e=new URL("https://xef5-44zo-gegm.b2.xano.io/api:h_RKfex8/oauth/google/continue");e.searchParams.set("code",t),e.searchParams.set("redirect_uri",location.origin.concat(location.pathname));let n=new URL(location.href),i=["code","scope","authuser","hd","prompt"];for(let r of i)n.searchParams.delete(r);history.replaceState(null,"",n.toString());try{let r=await fetch(e);if(!r.ok){let S=await r.json();return a(S?.message??o)}let m=await r.json();return d(m)}catch{return a(o)}}let g=new URLSearchParams(location.search);p(g.get("code")??!1).then(t=>{if(!t.succeeded)return console.warn("[Social Login] %s",t.message);h(s,t.data.token,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(t.data.maxAge)}),location.href=c})})();})();
