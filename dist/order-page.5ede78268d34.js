"use strict";(()=>{var D=401,h="__Host-Talho-AuthToken",S="__Host-Talho-Session-Cookie",A="X-Talho-Session";function k(t){!t||t.status!==D||(location.href=T("/acessos/entrar",{redirect_to:encodeURIComponent(location.pathname)}))}function C(t){let e=t?.headers.get(A);e&&_(S,e,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+O(90))})}function d(t){return C(this),k(this),{message:t,succeeded:!1}}function E(t){return C(this),{data:t,succeeded:!0}}function y(t=[],e="GET"){let o=new Headers({Accept:"application/json","Content-Type":"application/json"});for(let[s,i]of t)o.set(s,i);let r=c(S);r&&o.set(A,r);let n=c(h);return n&&o.set("Authorization",n),{method:e,headers:o}}var p=null,N="oculto";function l(t,e=document){return e?e.querySelector(t):p}function I(t,e,o){return t?t.classList.toggle(e,o):!1}function x(t){return I(l("[data-wtf-loader]"),N,!t)}function T(t,e={}){let o=new URL(`${location.protocol}//${location.hostname}`),r=new URL(t,o);for(let[n,s]of Object.entries(e))r.searchParams.set(n,s);return r.toString()}function m(t){return t.length}function b(t){return t===p}var P="; ";function c(t){let e=document.cookie.split(P).find(o=>{let{name:r}=R(o);return r===t});return e?R(e).value:!1}function R(t){let[e,o]=t.split("=");return{name:e,value:o}}function _(t,e,o={}){if(m(t)===0)throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof e)||m(e.toString())===0)throw new Error("'setCookie' should receive a valid cookie value");let r=[`${t}=${e}`];o?.expires&&o?.expires instanceof Date&&r.push("expires="+o.expires.toUTCString()),o.maxAge&&r.push(`maxAge=${o.maxAge}`),o?.sameSite&&typeof o?.sameSite=="string"&&r.push(`SameSite=${o?.sameSite}`),o?.path&&r.push(`path=${o?.path}`),o?.domain&&r.push(`domain=${o?.path}`),o?.httpOnly&&r.push("HttpOnly"),o?.secure&&r.push("Secure");let n=r.join(P);return document.cookie=n,n}function O(t){return 86400*1e3*t}var a=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});var L={AC:"Acre",AL:"Alagoas",AP:"Amap\xE1",AM:"Amazonas",BA:"Bahia",CE:"Cear\xE1",DF:"Distrito Federal",ES:"Esp\xEDrito Santo",GO:"Goi\xE1s",MA:"Maranh\xE3o",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Par\xE1",PB:"Para\xEDba",PR:"Paran\xE1",PE:"Pernambuco",PI:"Piau\xED",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rond\xF4nia",RR:"Roraima",SC:"Santa Catarina",SP:"S\xE3o Paulo",SE:"Sergipe",TO:"Tocantins"},w=Object.keys(L),H=Object.values(L);var v="https://xef5-44zo-gegm.b2.xano.io";(function(){let{createApp:t}=window.Vue,e="-";t({name:"TalhoOrderPage",setup(){},data(){return{order:p}},async created(){let n=new URLSearchParams(location.search).get("order");if(!n){location.href="/";return}let s=await this.getOrder(n);if(!s.succeeded){location.href="/";return}this.order=s.data,x(!1)},mounted(){},methods:{async getOrder(r){let n="Falha ao capturar o pedido";try{let s=await fetch(`${v}/api:5lp3Lw8X/order-details/${r}`,{...y()});if(!s.ok){let u=await s.json();return d.call(s,u?.message??n)}let i=await s.json();return E.call(s,i)}catch{return d(n)}}},computed:{name(){return this.order?.name??e},email(){return this.order?.email??e},cpf(){return this.order?.cpf_cnpj??e},phone(){return this.order?.phone??e},shipping(){let{number:r=e,cep:n=e,address:s=e,state:i=e,city:u=e,complement:f=e,neighborhood:g=e,user_name:M=e}=this.order?.delivery.address??{};return{user_name:M,cep:n,address:s,number:r,complement:f,neighborhood:g,city:u,state:i}},billing(){let{cep:r=e,address:n=e,number:s=e,complement:i=e,neighborhood:u=e,city:f=e,state:g=e}=this.order?.billing_address??{};return{cep:r,address:n,number:s,complement:i,neighborhood:u,city:f,state:g}},hasOrderDiscount(){return!b(this.order?.discount_code)},getOrderSubtotalPriceFormatted(){let r=this.order?.order_items.reduce((n,{unit_price:s,quantity:i})=>n+s*i,0);return a.format(r?r/100:0)},getOrderPriceFormatted(){let r=this.order?.total;return a.format(typeof r=="number"?r/100:0)},getOrderShipping(){let r=this.order?.delivery.quotation_price;return typeof r=="number"?r/100:0},getOrderShippingPriceFormatted(){return a.format(this.getOrderShipping)},getOrderDiscountPriceFormatted(){return a.format((this.order?.discount??0)*-1)},getParsedProducts(){let{order_items:r=[]}=this.order??{};return r.map(({name:n,product_id:s,unit_price:i,quantity:u})=>({quantity:u,title:n,key:s,unit_amount:a.format(i/100),final_price:a.format(i*u/100)}))},hasPriority(){return this.order?.delivery.has_priority??!1},getPriorityFee(){return this.hasPriority?this.order?.delivery.priority_price/100:0},getPriorityFeePriceFormatted(){return a.format(this.getPriorityFee)},hasSubsidy(){return this.order?.delivery.has_subsidy??!1},getDeliverySubsidy(){return this.hasSubsidy?-1*Math.min(this.getOrderShipping,this.order?.delivery.subsidy_price/100):0},getDeliverySubsidyPriceFormatted(){return a.format(this.getDeliverySubsidy)}}}).mount(l("#orderapp"))})();})();
