"use strict";(()=>{var F="; ";function S(e){let r=document.cookie.split(F).find(o=>{let{name:a}=H(o);return a===e});return r?H(r).value:!1}function H(e){let[r,o]=e.split("=");return{name:r,value:o}}function U(e,r,o={}){if(e.length===0)throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof r)||r.toString().length===0)throw new Error("'setCookie' should receive a valid cookie value");let a=[`${e}=${r}`];o?.expires&&o?.expires instanceof Date&&a.push("expires="+o.expires.toUTCString()),o.maxAge&&a.push(`maxAge=${o.maxAge}`),o?.sameSite&&typeof o?.sameSite=="string"&&a.push(`SameSite=${o?.sameSite}`),o?.path&&a.push(`path=${o?.path}`),o?.domain&&a.push(`domain=${o?.path}`),o?.httpOnly&&a.push("HttpOnly"),o?.secure&&a.push("Secure");let l=a.join(F);return document.cookie=l,l}var Se=401,N="__Host-Talho-AuthToken",G="__Host-Talho-Session-Cookie",q="X-Talho-Session";function Ae(e){!e||e.status!==Se||(location.href=z("/acessos/entrar",{redirect_to:encodeURIComponent(location.pathname)}))}function ne(e){let r=e?.headers.get(q);r&&U(G,r,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+$(90))})}function _(e){return ne(this),Ae(this),{message:e,succeeded:!1}}function V(e){return ne(this),{data:e,succeeded:!0}}function K(e=[],r="GET"){let o=new Headers({Accept:"application/json","Content-Type":"application/json"});for(let[p,f]of e)o.set(p,f);let a=S(G);a&&o.set(q,a);let l=S(N);return l&&o.set("Authorization",l),{method:r,headers:o}}function $(e){return 86400*1e3*e}var Te=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});var re=null,v="oculto",j={block:"center",behavior:"smooth"};function B(){return!!S(N)}function u(e,r=document){return r?r.querySelector(e):re}function m(e,r,o,a){if(e)return e.addEventListener(r,o,a),()=>e.removeEventListener(r,o,a)}function X(e,r,o){e&&e.setAttribute(r,o)}function A(e,r){e&&e.removeAttribute(r)}function C(e,...r){e&&e.classList.add(...r)}function M(e,...r){e&&e.classList.remove(...r)}function b(e,r,o){return e?e.classList.toggle(r,o):!1}function I(e,r){e&&(e.textContent=typeof r=="string"?r:r.toString())}function z(e,r={}){let o=new URL(`${location.protocol}//${location.hostname}`),a=new URL(e,o);for(let[l,p]of Object.entries(r))a.searchParams.set(l,p);return a.toString()}function J(e){return JSON.stringify(e)}function w(e){return e.length}function Y(){return/^(([\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+(\.[\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+)*)|("[\p{L}\p{N}\s!#$%&'*+\/=?^_`{|}~.-]+"))@(([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*\.)+[a-zA-Z]{2,63}|(\[(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\]))$/u}function P(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function W(e,r){e&&e.focus(r)}function Z(e,r){e&&e.scrollIntoView(r)}var Q={AC:"Acre",AL:"Alagoas",AP:"Amap\xE1",AM:"Amazonas",BA:"Bahia",CE:"Cear\xE1",DF:"Distrito Federal",ES:"Esp\xEDrito Santo",GO:"Goi\xE1s",MA:"Maranh\xE3o",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Par\xE1",PB:"Para\xEDba",PR:"Paran\xE1",PE:"Pernambuco",PI:"Piau\xED",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rond\xF4nia",RR:"Roraima",SC:"Santa Catarina",SP:"S\xE3o Paulo",SE:"Sergipe",TO:"Tocantins"},Re=Object.keys(Q),he=Object.values(Q);var oe="https://xef5-44zo-gegm.b2.xano.io";(function(){let e="disabled",r="mensagemdeerro",o="[data-wtf-wrapper]",a={preventScroll:!1};function l(n,t){let s=!t.succeeded,c=u("[data-wtf-success-message]",n);if(b(k,v,!s),b(c,v,s),!s){setTimeout(()=>C(c,v),8e3);return}ie(t.message,k)}function p(n){return function(t){return[n,t]}}function f(n,t){n&&b(n.closest("[data-wtf-wrapper]"),r,!t)}async function se(n){let t="Houve uma falha ao realizar o cadastro. Por favor, tente novamente mais tarde.";try{let s=await fetch(`${oe}/api:t3reRXiD/auth/signup`,{...K([],"POST"),body:J(n)});if(!s.ok){let E=await s.json();return _.call(s,E?.message??t)}let c=await s.json();return V.call(s,c)}catch{return _(t)}}if(B()){location.href="/area-do-usuario/pedidos-de-compra";return}let T=u("#wf-form-register");if(T){let n=["name","method","data-name","aria-label","data-wf-page-id","data-wf-element-id","data-turnstile-sitekey","data-wf-user-form-type"];for(let s of n)A(T,s);let t=T.parentElement;M(t,"w-form"),T.remove(),t.insertAdjacentHTML("afterbegin",T.outerHTML)}let i=u("#wf-form-register"),k=u("[data-wtf-general-error-message]",i),R=u("[data-wtf-name]",i),h=u("[data-wtf-last-name]",i),y=u("[data-wtf-email]",i),g=u("[data-wtf-password]",i),x=u("[data-wtf-consent]",i),ae=u("[data-wtf-optin]",i),L=u('input[type="submit"]',i);function ie(n,t){if(!t)return;let s=u("div",t);I(s,n)}function ue({hasNumber:n,hasLowercase:t,hasUppercase:s,hasMinLength:c,hasSpecialChar:E}){let d=(D,O)=>`Sua senha deve conter pelo menos ${D} ${O}.`;return c?n?E?t?s?!1:d(1,"letra mai\xFAscula"):d(1,"letra min\xFAscula"):d(1,"caractere especial"):d(1,"n\xFAmero"):d(8,"caracteres")}function ce(n,t){if(!n)return;let s=n.closest(o);s&&I(u("[data-wtf-field-error] div",s),t)}function le(n){return t=>t.test(n)}function pe(n){let t=le(n);return{hasNumber:t(/\d/),hasLowercase:t(/[a-z]/),hasUppercase:t(/[A-Z]/),hasMinLength:t(/.{8,}/),hasSpecialChar:t(/[!@#$%^&*()_+{}\[\]:;<>,.?\/~\\-]/)}}function ee(n){return/^[a-zA-Z\s]+$/.test(n)}function fe(){let n=p("wtfUser");if(!R)return n(!1);let t=P(R.value).trim().replace(/\s{2,}/g," "),s=w(t)>1&&ee(t);return f(R,s),n(s)}function de(){let n=p("wtfLastName");if(!h)return n(!1);let t=P(h.value).trim().replace(/\s{2,}/g," "),s=w(t)>0&&ee(t);return f(h,s),n(s)}function me(){let n=p("wtfEmail");if(!y)return n(!1);let t=Y().test(y.value);return f(y,t),n(t)}function ge(){let n=p("wtfPassword");if(!g)return n(!1);let{hasNumber:t,hasLowercase:s,hasUppercase:c,hasMinLength:E,hasSpecialChar:d}=pe(g.value),D=ue({hasNumber:t,hasLowercase:s,hasUppercase:c,hasMinLength:E,hasSpecialChar:d}),O=t&&s&&c&&d&&E;return ce(g,D||""),f(g,O),n(O)}function Ee(){let n=p("wtfConsent");if(!x)return n(!1);let t=x.checked;return f(x,t),n(t)}let te=[{field:R,validator:fe},{field:h,validator:de},{field:y,validator:me},{field:g,validator:ge}];for(let{field:n,validator:t}of te)m(n,"blur",t),m(n,"input",()=>f(n,!0));m(x,"input",Ee,!1),m(i,"reset",()=>{let n="w--redirected-checked";document.querySelectorAll(`#${i?.id} .${n}`).forEach(t=>{M(t,n)})}),m(i,"submit",async n=>{n.preventDefault(),n.stopPropagation(),X(L,e,e);let t=te.find(({validator:c})=>c().at(1)===!1);if(t)return l(i,_("Houve uma falha ao validar os seus dados. Por favor, tente novamente.")),W(t.field,a),A(L,e);let s=await se({name:R?.value,lastName:h?.value,email:y?.value,password:g?.value,optin:ae?.checked,consent:x?.checked});l(i,s),A(L,e),s.succeeded&&(i?.reset(),Z(k,j))}),C(i?.parentElement,"w-form"),A(L,e)})();})();
