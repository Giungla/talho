"use strict";(()=>{var j="; ";function T(e){let t=document.cookie.split(j).find(i=>{let{name:r}=G(i);return r===e});return t?G(t).value:!1}function G(e){let[t,i]=e.split("=");return{name:t,value:i}}function U(e,t,i={}){if(e.length===0)throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof t)||t.toString().length===0)throw new Error("'setCookie' should receive a valid cookie value");let r=[`${e}=${t}`];i?.expires&&i?.expires instanceof Date&&r.push("expires="+i.expires.toUTCString()),i.maxAge&&r.push(`maxAge=${i.maxAge}`),i?.sameSite&&typeof i?.sameSite=="string"&&r.push(`SameSite=${i?.sameSite}`),i?.path&&r.push(`path=${i?.path}`),i?.domain&&r.push(`domain=${i?.path}`),i?.httpOnly&&r.push("HttpOnly"),i?.secure&&r.push("Secure");let n=r.join(j);return document.cookie=n,n}var Je=401,K="__Host-Talho-AuthToken",q="__Host-Talho-Session-Cookie",Y="X-Talho-Session";function et(e){!e||e.status!==Je||(location.href=A("/acessos/entrar",{redirect_to:encodeURIComponent(location.pathname)}))}function J(e){let t=e?.headers.get(Y);t&&U(q,t,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+z(90))})}function h(e){return J(this),et(this),{message:e,succeeded:!1}}function f(e){return J(this),{data:e,succeeded:!0}}function b(e=[],t="GET"){let i=new Headers({Accept:"application/json","Content-Type":"application/json"});for(let[l,d]of e)i.set(l,d);let r=T(q);r&&i.set(Y,r);let n=T(K);return n&&i.set("Authorization",n),{method:t,headers:i}}function z(e){return 86400*1e3*e}var C=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});var s=null,ee="oculto";function X(e){return Array.isArray(e)}function te(e,t=document){return t?t.querySelector(e):s}function H(e,t,i,r){if(e)return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)}function ie(e,t,i){return e?e.classList.toggle(t,i):!1}function N(e){return ie(te("[data-wtf-loader]"),ee,!e)}function A(e,t={}){let i=new URL(`${location.protocol}//${location.hostname}`),r=new URL(e,i);for(let[n,l]of Object.entries(t))r.searchParams.set(n,l);return r.toString()}function S(e){return JSON.stringify(e)}function g(e){return e.replace(/\D+/g,"")}function p(e){return e.length}function M(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function c(e){return e===s}function Q(e,t,i){return Math.max(e,Math.min(t,i))}function W(e,t=0){let i=Math.pow(10,t);return Math.round(e*i)/i}var x="talho_cart_items";var R={AC:"Acre",AL:"Alagoas",AP:"Amap\xE1",AM:"Amazonas",BA:"Bahia",CE:"Cear\xE1",DF:"Distrito Federal",ES:"Esp\xEDrito Santo",GO:"Goi\xE1s",MA:"Maranh\xE3o",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Par\xE1",PB:"Para\xEDba",PR:"Paran\xE1",PE:"Pernambuco",PI:"Piau\xED",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rond\xF4nia",RR:"Roraima",SC:"Santa Catarina",SP:"S\xE3o Paulo",SE:"Sergipe",TO:"Tocantins"},F=Object.keys(R),tt=Object.values(R);var a="",I="https://xef5-44zo-gegm.b2.xano.io";var{ref:o,createApp:it}=Vue,D="/",rt="error",_="shipping",w="billing",st=8,nt=`${I}/api:79PnTkh_`,Z=`${I}/api:5lp3Lw8X`,se=`${I}/api:24B7O9Aj`,ot=1,at=2,lt=[10,11],O=new WeakMap,dt=new Event("input"),B="same",ne="diff",ut="pix",$="creditcard";function ct(){return new AbortController}function oe(e,t){return Object.hasOwn(e,t)}function P(e){return e.trim()}function ht(e,t){e.scrollIntoView(t)}function pt(e){let t=e.split(D);if(t.length!==2)return!1;let[i,r]=t,n=parseInt(i,10),l=parseInt(r,10);if(isNaN(n)||isNaN(l)||n<1||n>12)return!1;let d=new Date,E=2e3+(l<100?l:0);return new Date(E,n,0,23,59,59)>d}function gt(e){let t=(i,r,n,l)=>{let d=[];return y(r,d,`(${r}`),y(n,d,`) ${n}`),y(l,d,`-${l}`),d.join(a)};return e.length<11?e.replace(/^(\d{0,2})(\d{0,4})(\d{0,4})/,t):e.replace(/^(\d{0,2})(\d{0,5})(\d{0,4})/,t)}function mt(e){return e.replace(/^(\d{0,3})(\d{0,3})(\d{0,3})(\d{0,2})/,(t,i,r,n,l)=>{let d=[];return y(i,d,`${i}`),y(r,d,`.${r}`),y(n,d,`.${n}`),y(l,d,`-${l}`),d.join(a)})}function Ct(e){return e.replace(/^(\d{0,2})(\d{0,2})(\d{0,4})/,(t,i,r,n)=>[i,r,n].filter(Boolean).join(D))}function yt(e){return e.replace(/^(\d{0,4})(\d{0,4})(\d{0,4})(\d{0,4})/,(t,i,r,n,l)=>{let d=[];for(let E of[i,r,n,l])y(E,d,E);return d.join(" ")})}function ft(e){return e.replace(/^(\d{0,2})(\d{0,2})/,(t,i,r)=>{let n=[];for(let l of[i,r])y(l,n,l);return n.join(D)})}function bt(e){return e.replace(/^(\d{0,5})(\d{0,3})/,(t,i,r)=>{let n=[];for(let l of[i,r])y(l,n,l);return n.join("-")})}function Pt(e){return e.toUpperCase()}function y(e,t,i){return e?t.push(i):-1}function k(e,t){return e.includes(t)}function m(e,t){return e.test(t)}function v(...e){return{mounted(t){let i=H(t,"input",r=>{if(!r.isTrusted)return;let n=r.target;n.value=e.reduce((l,d)=>d(l),n.value??a),t.dispatchEvent(dt)});O.set(t,i)},unmounted:le}}function u(e,t,i){return{field:e,valid:t,...i&&{ignoreIf:i}}}function Et(e){let[t,i,r]=e.split(D);return new Date(`${r}-${i}-${t}T00:00:00`).toString()!=="Invalid Date"}function vt(e){if(e=g(e),e.length!==11||/^(\d)\1{10}$/.test(e))return!1;let t=lt.map((i,r)=>{let n=r?10:9,d=11-[...e.slice(0,n)].map(Number).reduce((E,V,L)=>E+V*(i-L),0)%11;return d>9?0:d});return e.endsWith(t.join(a))}async function ae({cep:e,deliveryMode:t}){let i="N\xE3o foi poss\xEDvel encontrar o endere\xE7o";if(e=g(e),e.length!==st)return h(i);try{let r=await fetch(`${I}/api:jyidAW68/cepaddress/${e}/checkout`,{...b([],"POST"),body:S({deliveryMode:t})});if(!r.ok){let l=await r.json();return h.call(r,l?.message??i)}let n=await r.json();return f.call(r,n)}catch{return h(i)}}var le=e=>{let t=O.get(e);t&&(t(),O.delete(e))},St=it({name:"TalhoCheckoutApp",setup(){let e=o(a),t=o(a),i=o(a),r=o(a),n=o(a),l=o(a),d=o(a),E=o(a),V=o(a),L=o(a),de=o(a),ue=o(a),ce=o(a),he=o(a),pe=o(a),ge=o(a),me=o(a),Ce=o(a),ye=o(a),fe=o(a),be=o(a),Pe=o(a),Ee=o(a),ve=o(a),Se=o(s),Ae=o(s),Ie=o(s),De=o(s),Ve=o(s),Te=o(s),Ne=o(s),Me=o(s),Re=o(s),_e=o(s),ke=o(s),Oe=o(s),Le=o(s),He=o(s),xe=o(s),Fe=o(s),we=o(s),Be=o(s),$e=o(s),Ge=o(s),je=o(s),Ue=o(s),Ke=o(s),qe=o(s),Ye=o(s),ze=o(s),Xe=o(s),Qe=o(s),We=o(s),Ze=o(s);return{customerCPF:e,customerMail:t,customerPhone:i,customerBirthdate:r,customerCreditCardCVV:n,customerCreditCardDate:l,customerCreditCardNumber:d,customerCreditCardHolder:E,billingCEP:V,billingAddress:L,billingNumber:de,billingComplement:ue,billingNeighborhood:ce,billingCity:he,billingState:pe,shippingRecipient:ge,shippingCEP:me,shippingAddress:Ce,shippingNumber:ye,shippingComplement:fe,shippingNeighborhood:be,shippingCity:Pe,shippingState:Ee,couponCode:ve,customerMailElement:Se,customerCPFElement:Ae,customerPhoneElement:Ie,customerBirthdateElement:De,paymentMethodMessageElement:Ve,customerCreditCardCVVElement:Te,customerCreditCardDateElement:Ne,customerCreditCardNumberElement:Me,customerCreditCardHolderElement:Re,billingCEPElement:_e,billingAddressElement:ke,billingNumberElement:Oe,billingNeighborhoodElement:Le,billingCityElement:He,billingStateElement:xe,deliveryPlaceMessageElement:Fe,shippingRecipientElement:we,shippingCEPElement:Be,shippingAddressElement:$e,shippingNumberElement:Ge,shippingNeighborhoodElement:je,shippingCityElement:Ue,shippingStateElement:Ke,deliveryDateMessageElement:qe,deliveryHourMessageElement:Ye,installmentsMessageElement:ze,couponCodeElement:Xe,deliveryPlaceAddressErrorMessage:Qe,deliveryBillingAddressErrorMessage:We,deliveryShippingAddressErrorMessage:Ze}},data(){return{hasPendingPayment:!1,isSubmitted:!1,productlist:s,visitedFields:[],selectedPayment:s,availablePayments:[{label:"Cart\xE3o de cr\xE9dito",method:$},{label:"PIX",method:ut}],deliveryPlace:s,deliveryPlaces:[{token:B,label:"Mesmo endere\xE7o de cobran\xE7a do cart\xE3o"},{token:ne,label:"Entregar em um endere\xE7o diferente"}],installment:s,selectedInstallment:s,isCouponPending:!1,coupon:s,isPagSeguroLoaded:!1,deliveryDate:s,deliveryHour:s,isDeliveryLoading:!1,deliveryPrice:s,deliveryOptions:s,priorityTax:s,subsidy:s}},created(){this.refreshCart().then(()=>N(!1)),window.addEventListener("storage",e=>{e.key===x&&this.refreshCart()})},methods:{async getCart(){let e="Falha ao capturar os produtos";try{let t=await fetch(`${nt}/cart/get`,{...b([])});if(!t.ok){let r=await t.json();return h.call(t,r?.message??e)}let i=await t.json();return f.call(t,i)}catch{return h(e)}},async refreshCart(){if(!this.hasPendingPayment)return this.getCart().then(e=>{if(e.succeeded){if(e.data.items.length===0){location.href=A("/",{reason:"empty_cart"});return}this.productlist=e.data}})},async getInstallments(){let e="Falha ao capturar o parcelamento";try{let t=await fetch(`${Z}/calculatefees`,{...b([],"POST"),body:S({amount:this.getOrderPrice,cardBin:this.customerCreditCardNumber.replace(/\D+/g,a).slice(0,8)})});if(!t.ok){let r=await t.json();return h.call(t,r?.message??e)}let i=await t.json();return f.call(t,i)}catch{return h(e)}},async refreshInstallments(){if(!this.isCreditCard||!this.isCreditCardGroupValid||this.getCreditCardToken.hasErrors)return;this.installment=s,this.selectedInstallment=s;let e=await this.getInstallments();e.succeeded&&(this.installment=e.data)},setSelectedInstallmentsCount(e){this.selectedInstallment!==e&&(this.selectedInstallment=Q(ot,at,e))},setSelectedPaymentMethod(e){this.selectedPayment!==e&&(this.hasDeliveryDates||this.handleDeliveryOptions(),e!==$?this.clearCreditCardData():this.isPagSeguroLoaded||this.loadPagSeguro(),this.deliveryPlace=s,this.selectedPayment=e)},setVisitedField(e){return y(!k(this.visitedFields,e),this.visitedFields,e)},hasVisitRegistry(e){return k(this.visitedFields,e)},async handlePayment(e){if(e.preventDefault(),this.hasPendingPayment||this.isDeliveryLoading)return;if(this.triggerValidations(),!this.isSubmitted){this.isSubmitted=!0,Vue.nextTick(()=>this.handlePayment(e));return}let t=this.firstInvalidField;if(t){ht(t.field,{block:"center",behavior:"smooth"}),t.field.tagName==="INPUT"&&setTimeout(()=>t.field.focus(),500);return}this.hasPendingPayment=!N(!0);let i=await this.handlePostPayment(this.selectedPayment);if(!i.succeeded)return this.hasPendingPayment=!N(!1),alert(i.message);let r={pix:"pix",creditcard:"confirmacao-do-pedido"}[this.selectedPayment];location.href=A(["/pagamento",r].join(D),{order:i.data.transactionid}),localStorage.removeItem(x)},async handlePostPayment(e){let t="Falha ao gerar o pedido";try{let i=await fetch(`${Z}/payment/process/${e}`,{...b([],"POST"),body:S({...this.getOrderBaseData,customer:{...this.getParsedCustomer,...this.getParsedAddresses},...e===$&&this.creditCardAdditionalInfo})});if(!i.ok){let n=await i.json();return h.call(i,n?.message??t)}let r=await i.json();return f.call(i,r)}catch{return h(t)}},triggerValidations(){let e=this.notIgnoredFields;for(let{field:t}of e)t?.dispatchEvent(new Event("blur"))},feedAddress(e,{uf:t,bairro:i,logradouro:r,localidade:n}){if(e===w){this.billingAddress=r,this.billingNeighborhood=i,this.billingCity=n,this.billingState=t;return}this.shippingAddress=r,this.shippingNeighborhood=i,this.shippingCity=n,this.shippingState=t},setDeliveryPlace(e){this.deliveryPlace!==e&&(e===B&&/^\d{5}\-\d{3}$/.test(this.billingCEP)&&this.isBillingAddressGroupValid?ae({cep:this.billingCEP,deliveryMode:!0}).then(t=>{t.succeeded||(this.deliveryPlaceAddressErrorMessage=t.message)}):this.deliveryPlaceAddressErrorMessage=s,this.deliveryPlace=e)},async captureAddress(e,t,i){if(!m(/^\d{5}-\d{3}$/,t)||t===i)return!1;let r=`${e}CEP`,n=await ae({cep:t,deliveryMode:e===_});if(!n.succeeded)return this[r]=a,this.setVisitedField(r),e===_&&(this.deliveryShippingAddressErrorMessage=n.message),e===w&&(this.deliveryBillingAddressErrorMessage=n.message),!1;switch(e){case _:this.deliveryShippingAddressErrorMessage=s;break;case w:this.deliveryBillingAddressErrorMessage=s}return this.feedAddress(e,n.data),!0},async captureCoupon(){let e="Falha ao capturar o cupom indicado";try{let t=await fetch(`${Z}/get_coupon`,{...b([],"POST"),body:S({verify_amount:!0,coupon_code:this.couponCode,cpf:this.customerCPF&&s,has_subsidy:this.subsidy?.has??!1,delivery_cep:this.getParsedAddresses.shippingaddress.zipPostalCode,has_selected_delivery:!c(this.deliveryHour)&&!c(this.deliveryDate)})});if(!t.ok){let r=await t.json();return h.call(t,r?.message??e)}let i=await t.json();return f.call(t,i)}catch{return h(e)}},async handleSearchCoupon(){if(this.isCouponPending)return;this.isCouponPending=!0;let e=await this.captureCoupon();if(this.isCouponPending=!1,!e.succeeded){this.coupon={error:!0,message:e.message};return}this.coupon=e.data},handleRemoveCoupon(){this.coupon=s,this.couponCode=a},loadPagSeguro(){let e=document.createElement("script");e.async=!0,e.src="https://assets.pagseguro.com.br/checkout-sdk-js/rc/dist/browser/pagseguro.min.js",e.onload=()=>{this.isPagSeguroLoaded=!0},document.head.appendChild(e)},clearCreditCardData(){this.customerCreditCardHolder=a,this.customerCreditCardNumber=a,this.customerCreditCardDate=a,this.customerCreditCardCVV=a},async handleDeliveryOptions(){let e=await this.captureDeliveryOptions();e.succeeded&&(this.deliveryOptions=e.data)},async captureDeliveryOptions(){let e="Falha ao capturar as op\xE7\xF5es de entrega";try{let t=await fetch(`${se}/delivery`,{...b([])});if(!t.ok){let r=await t.json();return h.call(t,r?.message??e)}let i=await t.json();return f.call(t,i)}catch{return h(e)}},setDeliveryDate(e){let t=this.deliveryOptions?.dates?.find(({shift_days:i})=>i===e);!t||this.deliveryDate===e||(this.deliveryDate=t.shift_days,this.deliveryHour=s,this.deliveryPrice=s)},setDeliveryHour(e){this.deliveryHour===e||this.getSelectedDateDetails?.periods.periods_count===0||(this.deliveryHour=e)},async handleDeliveryQuotation(e){this.isDeliveryLoading=!0;let t=await this.captureDeliveryQuotation(e);if(!t.succeeded)return;let{total:i,validator:r}=t.data;this.deliveryPrice={value:i,validator:r},this.isDeliveryLoading=!1},async captureDeliveryQuotation(e){let t="Falha ao gerar uma cota\xE7\xE3o";try{let i=await fetch(`${I}/api:i6etHc7G/site/checkout-delivery`,{...b([],"POST"),signal:e.signal,body:S(this.quotationPayload)});if(!i.ok){let n=await i.json();return h.call(i,n?.message??t)}let r=await i.json();return f.call(i,r)}catch{return h(t)}},async handleSubsidy(){let e=this.getParsedAddresses.shippingaddress.zipPostalCode;if(!/^\d{5}\-\d{3}$/.test(e))return;let t=await this.verifyForSubsidy(g(e));this.subsidy=t.succeeded?t.data:s},async verifyForSubsidy(e){let t="Houve uma falha na verifica\xE7\xE3o";try{let i=await fetch(`${se}/delivery/${e}/subsidy`,{...b([])});if(!i.ok){let n=await i.json();return h.call(i,n?.message??t)}let r=await i.json();return f.call(i,r)}catch{return h(t)}}},computed:{hasSelectedPaymentMethod(){return!c(this.selectedPayment)},isCreditCard(){return this.selectedPayment===$},getOrderSubtotal(){return this.productlist?.order_price??0},getOrderSubtotalFormatted(){return C.format(this.getOrderSubtotal)},getOrderPrice(){let e=[this.getOrderSubtotal,this.getShippingPrice,this.priorityFee,this.subsidyDiscountPrice,this.getCouponDiscountPrice].reduce((t,i)=>t+i,0);return W(e,2)},getOrderPriceFormatted(){return C.format(this.getOrderPrice)},getShippingPrice(){return this.hasFreeShippingByCartPrice||c(this.deliveryPrice)?0:this.deliveryPrice.value/100},getShippingPriceFormatted(){return this.hasFreeShippingByCartPrice?"Frete gr\xE1tis":C.format(this.getShippingPrice)},getCouponDiscountPrice(){if(this.hasNullCoupon||this.hasInvalidCoupon)return 0;let{value:e,is_percentage:t}=this.coupon,i=this.getParsedPriceForApplyDiscount,r=t?Math.min(e/100,1)*(i*-1):Math.min(i,e)*-1;return Math.round(Math.abs(r)*100)/100*Math.sign(r)},getCouponDiscountPriceFormatted(){return C.format(this.getCouponDiscountPrice)},getParsedPriceForApplyDiscount(){if(this.hasNullCoupon||this.hasInvalidCoupon)return 0;let{cupom_type:e}=this.coupon,{getShippingPrice:t}=this;return e===_&&this.hasSubsidy?Math.max(t+this.subsidyDiscountPrice,0):{product_id:0,shipping:t,subtotal:this.getOrderSubtotal}[e]},getParsedProducts(){let e=this.productlist?.items;return e?e.map(({name:t,imageUrl:i,quantity:r,price:n})=>({name:t,image:i,quantity:r,price:C.format(n),finalPrice:C.format(n*r)})):[]},isPersonalDataValid(){return!this.isSubmitted||[this.customerMailValidation.valid,this.customerBirthdateValidation.valid,this.customerCPFValidation.valid,this.customerPhoneValidation.valid].every(Boolean)},customerMailValidation(){return u(this.customerMailElement,!this.hasVisitRegistry("customerMail")||m(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,this.customerMail))},customerBirthdateValidation(){let{customerBirthdate:e}=this;return u(this.customerBirthdateElement,!this.hasVisitRegistry("customerBirthdate")||m(/^\d{2}\/\d{2}\/\d{4}$/,e)&&Et(e))},customerCPFValidation(){let{customerCPF:e}=this;return u(this.customerCPFElement,!this.hasVisitRegistry("customerCPF")||m(/^\d{3}\.\d{3}\.\d{3}-\d{2}$/,this.customerCPF)&&vt(e))},customerPhoneValidation(){return u(this.customerPhoneElement,!this.hasVisitRegistry("customerPhone")||m(/\(\d{2}\)\s\d{4,5}-\d{4}/,this.customerPhone))},paymentMethodValidation(){return u(this.paymentMethodMessageElement,!c(this.selectedPayment))},customerCreditCardHolderValidation(){return u(this.customerCreditCardHolderElement,!this.hasVisitRegistry("customerCreditCardHolder")||/^(\w{2,})(\s+(\w+))+$/.test(M(P(this.customerCreditCardHolder).replace(/\s{2,}/g," "))),!this.isCreditCard)},customerCreditCardNumberValidation(){return u(this.customerCreditCardNumberElement,!this.hasVisitRegistry("customerCreditCardNumber")||m(/^(\d{4})(\s\d{4}){2}(\s\d{3,4})$/,P(this.customerCreditCardNumber)),!this.isCreditCard)},customerCreditCardDateValidation(){let{customerCreditCardDate:e}=this;return u(this.customerCreditCardDateElement,!this.hasVisitRegistry("customerCreditCardDate")||m(/^(1[012]|0[1-9])\/\d{2}$/,e)&&pt(e),!this.isCreditCard)},customerCreditCardCVVValidation(){return u(this.customerCreditCardCVVElement,!this.hasVisitRegistry("customerCreditCardCVV")||m(/^\d{3}$/,this.customerCreditCardCVV),!this.isCreditCard)},isCreditCardGroupValid(){return[this.customerCreditCardHolderValidation.valid,this.customerCreditCardNumberValidation.valid,this.customerCreditCardDateValidation.valid,this.customerCreditCardCVVValidation.valid].every(Boolean)},billingCEPValidation(){return u(this.billingCEPElement,!this.hasVisitRegistry("billingCEP")||m(/^\d{5}-\d{3}$/,this.billingCEP),!this.isCreditCard)},billingAddressValidation(){return u(this.billingAddressElement,!this.hasVisitRegistry("billingAddress")||p(P(this.billingAddress))>2,!this.isCreditCard)},billingNumberValidation(){return u(this.billingNumberElement,!this.hasVisitRegistry("billingNumber")||p(this.billingNumber)>0,!this.isCreditCard)},billingNeighborhoodValidation(){return u(this.billingNeighborhoodElement,!this.hasVisitRegistry("billingNeighborhood")||p(this.billingNeighborhood)>0,!this.isCreditCard)},billingCityValidation(){return u(this.billingCityElement,!this.hasVisitRegistry("billingCity")||p(this.billingCity)>2,!this.isCreditCard)},billingStateValidation(){return u(this.billingStateElement,!this.hasVisitRegistry("billingState")||k(F,this.billingState),!this.isCreditCard)},isBillingAddressGroupValid(){return c(this.deliveryBillingAddressErrorMessage)&&[this.billingCEPValidation,this.billingAddressValidation,this.billingNumberValidation,this.billingNeighborhoodValidation,this.billingCityValidation,this.billingStateValidation].every(e=>e.valid)},deliveryPlaceValidation(){return u(this.deliveryPlaceMessageElement,this.hasSelectedAddress&&c(this.deliveryPlaceAddressErrorMessage),!this.isCreditCard)},shippingRecipientValidation(){return u(this.shippingRecipientElement,!this.hasVisitRegistry("shippingRecipient")||m(/^(\w{2,})(\s+(\w+))+$/,M(P(this.shippingRecipient)).replace(/\s{2,}/g," ")),!this.shouldValidateShippingAddress)},shippingCEPValidation(){return u(this.shippingCEPElement,!this.hasVisitRegistry("shippingCEP")||m(/^\d{5}-\d{3}$/,this.shippingCEP),!this.shouldValidateShippingAddress)},shippingAddressValidation(){return u(this.shippingAddressElement,!this.hasVisitRegistry("shippingAddress")||p(P(this.shippingAddress))>2,!this.shouldValidateShippingAddress)},shippingNumberValidation(){return u(this.shippingNumberElement,!this.hasVisitRegistry("shippingNumber")||p(P(this.shippingNumber))>0,!this.shouldValidateShippingAddress)},shippingNeighborhoodValidation(){return u(this.shippingNeighborhoodElement,!this.hasVisitRegistry("shippingNeighborhood")||p(P(this.shippingNeighborhood))>3,!this.shouldValidateShippingAddress)},shippingCityValidation(){return u(this.shippingCityElement,!this.hasVisitRegistry("shippingCity")||p(P(this.shippingCity))>2,!this.shouldValidateShippingAddress)},shippingStateValidation(){return u(this.shippingStateElement,!this.hasVisitRegistry("shippingState")||k(F,this.shippingState),!this.shouldValidateShippingAddress)},isShippingAddressGroupValid(){return c(this.deliveryShippingAddressErrorMessage)&&[this.shippingCEPValidation,this.shippingAddressValidation,this.shippingNumberValidation,this.shippingNeighborhoodValidation,this.shippingCityValidation,this.shippingStateValidation].every(e=>e.valid)},deliveryDatesGroupValidation(){return u(this.deliveryDateMessageElement,!c(this.deliveryDate),!this.paymentMethodValidation.valid)},deliveryHoursGroupValidation(){return u(this.deliveryHourMessageElement,!c(this.deliveryHour),!this.deliveryDatesGroupValidation.valid)},installmentGroupValidation(){return u(this.installmentsMessageElement,!c(this.selectedInstallment),!this.isCreditCard||!this.paymentMethodValidation.valid)},notIgnoredFields(){return[this.customerMailValidation,this.customerBirthdateValidation,this.customerCPFValidation,this.customerPhoneValidation,this.paymentMethodValidation,this.customerCreditCardHolderValidation,this.customerCreditCardNumberValidation,this.customerCreditCardDateValidation,this.customerCreditCardCVVValidation,this.billingCEPValidation,this.billingAddressValidation,this.billingNumberValidation,this.billingNeighborhoodValidation,this.billingCityValidation,this.billingStateValidation,this.deliveryPlaceValidation,this.shippingRecipientValidation,this.shippingCEPValidation,this.shippingAddressValidation,this.shippingNumberValidation,this.shippingNeighborhoodValidation,this.shippingCityValidation,this.shippingStateValidation,this.deliveryDatesGroupValidation,this.deliveryHoursGroupValidation,this.installmentGroupValidation].filter(({ignoreIf:e})=>k([!1,void 0],e))},firstInvalidField(){return this.notIgnoredFields.find(({valid:e})=>!e)??s},hasSelectedAddress(){return!c(this.deliveryPlace)},isSameAddress(){return this.deliveryPlace===B},isDiffAddress(){return this.deliveryPlace===ne},shouldValidateShippingAddress(){return this.isCreditCard?this.showShippingAddressSelector&&!this.isSameAddress:!0},showShippingAddressSelector(){return!this.isCreditCard||this.isCreditCard&&this.hasSelectedAddress},getParsedAddresses(){let e=n=>R?.[n]??a,t=n=>P(n).replace(/-+/g,a)||"N/A",i={zipPostalCode:this.shippingCEP,street:this.shippingAddress,number:this.shippingNumber,complement:t(this.shippingComplement),neighbourhood:this.shippingNeighborhood,city:this.shippingCity,state:e(this.shippingState)},r={zipPostalCode:this.billingCEP,street:this.billingAddress,number:this.billingNumber,complement:t(this.billingComplement),neighbourhood:this.billingNeighborhood,city:this.billingCity,state:e(this.billingState)};return this.isCreditCard?{billingaddress:r,shippingaddress:this.isSameAddress?r:i}:{shippingaddress:i,billingaddress:i}},getParsedCustomer(){return{name:this.isCreditCard?this.customerCreditCardHolder:this.shippingRecipient,cpf:this.customerCPF,email:this.customerMail,birthDate:this.customerBirthdate,phone:this.customerPhone}},getParsedDeliveryData(){let{getSelectedHourDetails:e,getSelectedDateDetails:t}=this;return{delivery_hour:{value:this.deliveryHour,validator:e?.validator,has_priority:e?.has_priority},delivery_date:{value:this.deliveryDate,validator:t?.validator,has_priority:t?.has_priority}}},getOrderBaseData(){return{user_id:s,coupon_code:this.hasInvalidCoupon||this.hasNullCoupon?s:this.coupon?.code,delivery:{...this.getParsedDeliveryData,delivery_price:this.deliveryPrice}}},showInstallmentSection(){return this.isCreditCard&&p(this.installment??[])>0},getParsedInstallments(){let{installment:e}=this;return e?e.map(({installments:t,installment_value:i})=>({installments:t,installment_value:C.format(i)})):[]},hasNullCoupon(){return c(this.coupon)},hasAppliedCoupon(){return oe(this.coupon??{},"cupom_type")},hasInvalidCoupon(){return oe(this.coupon??{},rt)},isCouponCodeValid(){let{couponCode:e}=this;return p(P(e))>4&&!m(/[^A-Z\d]/,e)},getCreditCardToken(){if(!this.isPagSeguroLoaded)return{errors:[],hasErrors:!1,encryptedCard:s};let[e,t]=this.customerCreditCardDate.split(D);return window.PagSeguro.encryptCard({expMonth:e,expYear:"20".concat(t),holder:this.customerCreditCardHolder,securityCode:this.customerCreditCardCVV,number:g(this.customerCreditCardNumber),publicKey:"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxPIKWT6ettkFKqSyfoUpH/550Q8YQtRf7ZYJJbV3U7/4HBtamJT9If4wiLs2YlEfwTPWlB5Cl0jGmkBSQkjIDF+QTOSJviZYKgiuR7Bnavgt+idkcZsd5hM1I6u1uwOJJE3wSSXg+Nw70GZCeg7A6bmq9tOu1827En/ZFKWBXqv9Upc7q/Y6N0XMzZ3CL1j6ZlhnCalQzzaV9whijxK22lIL78gLEUcnmEO7CUX6DyfcdlA13MM4X538k2eYUosdnKafCEDNVcT+PPUeUdJZ0CpBWA9c/XtO0BIbTXHTsDuDlX0r7BF0vMFJMi0D9lkFCavY/kjZEQYhnXMtrWlUWwIDAQAB"})},hasDeliveryDates(){let{deliveryOptions:e}=this;return X(e?.dates)&&p(e?.dates)>0},hasDeliveryHour(){return!c(this.deliveryDate)&&p(this.getParsedDeliveryHours)>0},getParsedDeliveryHours(){return!this.hasDeliveryDates||c(this.getSelectedDateDetails)?[]:this.getSelectedDateDetails.periods.hours.map(({label:t,hour:i})=>({hour:i,label:t}))},quotationPayload(){if([this.deliveryDate,this.deliveryHour].some(r=>c(r)))return!1;let e=this.getParsedAddresses.shippingaddress.zipPostalCode;if(!/^\d{5}\-\d{3}$/.test(e))return!1;let{delivery_hour:t,delivery_date:i}=this.getParsedDeliveryData;return{cep:e,delivery_hour:t,delivery_date:i}},getParsedDeliveryDates(){if(c(this.deliveryOptions))return[];let e=this.deliveryDate;return this.deliveryOptions.dates.map(({label:t,shift_days:i})=>({label:t,shift_days:i,selected:e===i}))},getSelectedDateDetails(){if(!this.deliveryDate===s)return s;let e=this.deliveryOptions?.dates.find(({shift_days:t})=>t===this.deliveryDate);return e||s},getSelectedHourDetails(){return!this.getSelectedDateDetails||!this.deliveryHour?s:this.getSelectedDateDetails.periods.hours.find(({hour:e})=>e===this.deliveryHour)??s},hasPriorityFee(){return!this.hasDeliveryHour||!this.getSelectedDateDetails||!this.getSelectedHourDetails?!1:this.getSelectedDateDetails.has_priority&&this.getSelectedHourDetails.has_priority},priorityFee(){return this.hasPriorityFee?this.deliveryOptions?.priority_fee:0},priorityFeeFormatted(){return C.format(this.priorityFee)},hasSubsidy(){return this.subsidy?.has===!0&&this.getShippingPrice>0},subsidyDiscountPrice(){return this.subsidy?.has===!0?Math.min(this.subsidy.value,this.getShippingPrice)*-1:0},subsidyDiscountPriceFormatted(){return C.format(this.subsidyDiscountPrice)},hasFreeShippingByCartPrice(){return this.getOrderSubtotal>=400},creditCardAdditionalInfo(){let{installment:e,isSameAddress:t,getCreditCardToken:i,selectedInstallment:r,customerCreditCardHolder:n}=this;return{is_same_address:t,credit_card_info:{holderName:n,creditCardToken:i.encryptedCard??a,numberOfPayments:r,installmentValue:e?.find(({installments:l})=>l===r)?.installment_value??0}}}},watch:{billingCEP(e,t){this.captureAddress(w,e,t).then(i=>{i&&(this.deliveryPlaceAddressErrorMessage=s,this.deliveryPlace===B&&(this.deliveryPlace=s))})},shippingCEP(e,t){this.deliveryDate=s,this.deliveryHour=s,this.captureAddress(_,e,t)},getOrderPrice:{immediate:!0,handler:function(){this.refreshInstallments()}},getCreditCardToken(e){e.hasErrors||this.refreshInstallments()},quotationPayload(e,t,i){if(!e)return;let{cep:r,delivery_hour:n,delivery_date:l}=e;if(!/^\d{5}\-\d{3}$/.test(r))return;let d=ct();if(!t)return this.handleDeliveryQuotation(d),i(()=>d.abort());let{cep:E,delivery_date:V,delivery_hour:L}=t;return this.handleDeliveryQuotation(d),i(()=>d.abort())},getParsedAddresses(e,t){!e||!t||e.shippingaddress.zipPostalCode!==t.shippingaddress.zipPostalCode&&/^\d{5}\-\d{3}$/.test(e.shippingaddress.zipPostalCode)&&(this.isCreditCard&&c(this.deliveryPlace)||this.handleSubsidy())}},directives:{maskDate:v(g,Ct),maskCpf:v(g,mt),maskPhone:v(g,gt),maskCreditCard:v(g,yt),maskCreditCardDate:v(g,ft),maskNumberOnly:v(g),maskCep:v(g,bt),upperCase:v(Pt),normalize:v(M),visitedField:{mounted(e,{value:t,instance:i}){let r=H(e,"blur",()=>{i.setVisitedField(t),O.delete(e)},{once:!0});O.set(e,r)},unmounted:le}}});St.mount("#fechamentodopedido");})();
