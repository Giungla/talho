(()=>{let t="; ",o="oculto",c="__Host-Talho-AuthToken",d="mensagemdeerro",l="disabled",f="[data-wtf-wrapper]",p={preventScroll:!1};function h(e,a=document){return a?a.querySelector(e):null}function m(e,a,t,r){e&&e.addEventListener(a,t,r)}function v(a){var e=document.cookie.split(t).find(e=>{e=r(e).name;return e===a});return!!e&&r(e).value}function r(e){var[e,a]=e.split("=");return{name:e,value:a}}function w(e){y(h("[data-wtf-loader]"),o,!e)}if(!1===v(c))L=encodeURIComponent(location.pathname),location.href="/acessos/entrar?redirect_to="+L;else{var e,a,g=h("#wf-form-update-password");if(g){for(var b of["name","method","data-name","aria-label","data-wf-page-id","data-wf-element-id","data-turnstile-sitekey"])C(g,b);var L=g.parentElement;a=["w-form"],(e=L)&&e.classList.remove(...a),g.remove(),L.insertAdjacentHTML("afterbegin",g.outerHTML)}let i=h("[data-wtf-password]"),u=h("[data-wtf-confirm-password]"),r=[{field:i,validator:function(){var e=S("wtfPassword");if(!i)return e(!1);var{hasNumber:a,hasMinLength:t,hasLowercase:r,hasUppercase:s,hasSpecialChar:n}=(e=>({hasNumber:(e=(a=>e=>e.test(a))(e))(/\d/),hasLowercase:e(/[a-z]/),hasUppercase:e(/[A-Z]/),hasMinLength:e(/.{8,}/),hasSpecialChar:e(/[!@#$%^&*()_+{}\[\]:;<>,.?\/~\\-]/)}))(i.value),o=a&&r&&s&&n&&t,a=(({hasNumber:e,hasLowercase:a,hasUppercase:t,hasMinLength:r,hasSpecialChar:s})=>{var n=(e,a)=>`Sua senha deve conter pelo menos ${e} `+a;return r?e?s?a?!t&&n(1,"letra maiúscula"):n(1,"letra minúscula"):n(1,"caractere especial"):n(1,"número"):n(8,"caracteres")})({hasNumber:a,hasLowercase:r,hasUppercase:s,hasMinLength:t,hasSpecialChar:n});_(i,a||""),M(i,o),0<(u?.value??"").length&&z(i,u)&&E();return e(o)}},{field:u,validator:E}];for(let{field:e,validator:a}of r)e&&(m(e,"blur",a),m(e,"input",()=>M(e,!0)));let s=h("#wf-form-update-password"),n=h('[type="submit"]',s);function C(e,a){e&&e.removeAttribute(a)}function y(e,a,t){e&&e.classList.toggle(a,t)}function T(e){return{message:e,succeeded:!1}}function A(e,a){if(e){var r=!a.succeeded,s=h("[data-wtf-error-update-password]",e);let t=h("[data-wtf-success-update-password]",e);s&&y(s,o,!r),t&&y(t,o,r),r?(e=s&&h("div",s))&&(e.textContent=a.message):t&&setTimeout(()=>{var e,a;e=t,a=[o],e&&e.classList.add(...a)},8e3)}}function S(a){return function(e){return[a,e]}}function M(e,a){e=e.closest(f);e&&y(e,d,!a)}function U(e,a){e&&e.focus(a)}function _(e,a){e&&(e=h("[data-wtf-field-error] div",e.closest(f)))&&(e.textContent=a)}function z(e,a){return e&&a&&e?.value===a?.value}function E(){var e=S("wtfConfirmPassword"),a=z(i,u);return _(u,a?"":"As senhas informadas não conferem"),u&&M(u,a),e(a)}C(n,l),s&&(m(s,"submit",async a=>{a.preventDefault(),a.stopPropagation(),a=n,t=l,e=l,a&&a.setAttribute(t,e);var e,a=r.map(({validator:e})=>e).find(e=>!1===e().at(1));if(a){let e=h(`[data-${a().at(0).replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}]`,s);return U(e,p),setTimeout(()=>{e?.dispatchEvent(new FocusEvent("blur")),U(e,p)},0),C(n,l)}w(!0);var t=await(async e=>{var a="Houve uma falha ao atualizar sua senha. Por favor, tente novamente mais tarde.";try{var t=await fetch("https://xef5-44zo-gegm.b2.xano.io/api:TJEuMepe/user/change-password",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:v(c)},body:JSON.stringify(e)});return t.ok?{data:await t.json(),succeeded:!0}:T((await t.json())?.message??a)}catch(e){return T(a)}})({password:s?.password.value,confirm_password:s?.confirm_password.value});if(A(s,t),C(n,l),!t.succeeded)return w(!1);s.reset(),w(!1)}),w(!1))}})();