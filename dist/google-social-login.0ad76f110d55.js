"use strict";(()=>{var g="; ";function i(o){let n=document.cookie.split(g).find(e=>{let{name:t}=A(e);return t===o});return n?A(n).value:!1}function A(o){let[n,e]=o.split("=");return{name:n,value:e}}function a(o,n,e={}){if(o.length===0)throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof n)||n.toString().length===0)throw new Error("'setCookie' should receive a valid cookie value");let t=[`${o}=${n}`];e?.expires&&e?.expires instanceof Date&&t.push("expires="+e.expires.toUTCString()),e.maxAge&&t.push(`maxAge=${e.maxAge}`),e?.sameSite&&typeof e?.sameSite=="string"&&t.push(`SameSite=${e?.sameSite}`),e?.path&&t.push(`path=${e?.path}`),e?.domain&&t.push(`domain=${e?.path}`),e?.httpOnly&&t.push("HttpOnly"),e?.secure&&t.push("Secure");let r=t.join(g);return document.cookie=r,r}var u="__Host-Talho-AuthToken",f="__Host-Talho-Session-Cookie",m="X-Talho-Session";function p(o){let n=this?.get(m);return n&&a(f,n,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+d(90))}),{message:o,succeeded:!1}}function E(o){let n=this?.get(m);return n&&a(f,n,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+d(90))}),{data:o,succeeded:!0}}function S(o=[],n="GET"){let e=new Headers({Accept:"application/json","Content-Type":"application/json"});for(let[c,l]of o)e.set(c,l);let t=i(f);t&&e.set(m,t);let r=i(u);return r&&e.set("Authorization",r),{method:n,headers:e}}function d(o){return 86400*1e3*o}var O=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});function h(){return!!i(u)}var x={AC:"Acre",AL:"Alagoas",AP:"Amap\xE1",AM:"Amazonas",BA:"Bahia",CE:"Cear\xE1",DF:"Distrito Federal",ES:"Esp\xEDrito Santo",GO:"Goi\xE1s",MA:"Maranh\xE3o",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Par\xE1",PB:"Para\xEDba",PR:"Paran\xE1",PE:"Pernambuco",PI:"Piau\xED",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rond\xF4nia",RR:"Roraima",SC:"Santa Catarina",SP:"S\xE3o Paulo",SE:"Sergipe",TO:"Tocantins"},L=Object.keys(x),C=Object.values(x);var T="https://xef5-44zo-gegm.b2.xano.io";(function(){let o="/area-do-usuario/pedidos-de-compra";if(h()){location.href=o;return}async function n(t){let r="Houve uma falha na autentica\xE7\xE3o via Google. Por favor, tente novamente mais tarde.";if(t===!1)return p(r);let c=new URL(`${T}/api:h_RKfex8/oauth/google/continue`);c.searchParams.set("code",t),c.searchParams.set("redirect_uri",location.origin.concat(location.pathname));let l=new URL(location.href),_=["code","scope","authuser","hd","prompt"];for(let s of _)l.searchParams.delete(s);history.replaceState(null,"",l.toString());try{let s=await fetch(c,{...S()});if(!s.ok){let y=await s.json();return p.call(s.headers,y?.message??r)}let R=await s.json();return E.call(s.headers,R)}catch{return p(r)}}let e=new URLSearchParams(location.search);n(e.get("code")??!1).then(t=>{if(!t.succeeded)return console.warn("[Social Login] %s",t.message);a(u,t.data.token,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(t.data.maxAge)}),location.href=o})})();})();
