!function(){"use strict";var e="__Host-Talho-Session-Cookie",t="X-Talho-Session";function r(r){const o=r?.headers.get(t);o&&function(e,t,r={}){if(0===i(e))throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof t)||0===i(t.toString()))throw new Error("'setCookie' should receive a valid cookie value");const o=[`${e}=${t}`];r?.expires&&r?.expires instanceof Date&&o.push("expires="+r.expires.toUTCString()),r.maxAge&&o.push(`maxAge=${r.maxAge}`),r?.sameSite&&"string"==typeof r?.sameSite&&o.push(`SameSite=${r?.sameSite}`),r?.path&&o.push(`path=${r?.path}`),r?.domain&&o.push(`domain=${r?.path}`),r?.httpOnly&&o.push("HttpOnly"),r?.secure&&o.push("Secure");const n=o.join(a);document.cookie=n}(e,o,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+1e3*u*14)})}function o(e){return r(this),this&&401===this.status&&(location.href=function(e,t={}){const r=new URL(`${location.protocol}//${location.hostname}`),o=new URL(e,r);for(const[n,s]of Object.entries(t))o.searchParams.set(n,s);return o.toString()}("/acessos/entrar",{redirect_to:encodeURIComponent(location.pathname+location.search)})),{message:e,succeeded:!1}}function n(r=[],o="GET"){const n="application/json",s=new Headers({Accept:n,"Content-Type":n});for(const[e,t]of r)s.set(e,t);const i=c(e);i&&s.set(t,i);const a=c("__Host-Talho-AuthToken");return a&&s.set("Authorization",a),{method:o,headers:s}}var s=null;function i(e){return e.length}var a="; ";function c(e){const t=document.cookie.split(a).find(t=>{const{name:r}=d(t);return r===e});return!!t&&d(t).value}function d(e){const[t,r]=e.split("=");return{name:t,value:r}}var u=86400,{createApp:h}=Vue,p="transactionid",m="pix",l="creditcard",f={[m]:"PIX",[l]:"Cartão de crédito"};h({name:"TalhoOrderNoteApp",setup:()=>({}),data:()=>({order:s}),async created(){const e=new URLSearchParams(location.search).get(p);if(!e)return;const t=await this.getOrder(e);t.succeeded&&(this.order=t.data)},methods:{async getOrder(e){const t="Não foi possível encontrar o pedido";try{const s=await fetch(`https://xef5-44zo-gegm.b2.xano.io/api:jiIoKYhH/order/delivery-prepare?${p}=${e}`,{...n()});if(!s.ok){const e=await s.json();return o(e?.message??t)}return function(e){return r(this),{data:e,succeeded:!0}}(await s.json())}catch(s){return o(t)}}},computed:{company(){return this.order?.company??s},customer(){return this.order?.customer??s},items(){return this.order?.items??s},itemsCount(){return i(this.items??[])},cOrder(){if(!this.order)return s;const{date:e,time:t,total:r,number:o,shipping:n,subtotal:i,discounts:a,change_for:c,notes_short:d,observations:u,payment_method:h}=this.order.order;return{date:e,time:t,total:r,number:o,shipping:n,subtotal:i,discounts:a,change_for:c,notes_short:d,observations:u,payment_method:f?.[h]}},deliveryDate(){if(!this.order)return s;const{order:e}=this.order;return`${e.delivery_date} ${e.delivery_hour}`},priorityTax(){const e=this.order?.order;return e&&e.has_priority?e?.priority_price:s},subsidyDiscount(){const e=this.order?.order;return e&&e.has_subsidy?e?.subsidy_price:s},pixDiscount(){const e=this.order?.order;return e&&"pix"===e.payment_method?{discountPrice:e.pix_discount_price,discountPercentual:e.pix_discount_percentual}:s},hasPaid(){return this.order?.order.paid??!1},deliveredAt(){return this.order?.order.delivered_at??s}},watch:{},directives:{}}).mount("#note-order"),window.addEventListener("pageshow",e=>{e.persisted&&window.location.reload()})}();