"use strict";(()=>{var k=401,u="__Host-Talho-AuthToken",E="__Host-Talho-Session-Cookie",d="X-Talho-Session";function P(e){!e||e.status!==k||(location.href=g("/acessos/entrar",{redirect_to:encodeURIComponent(location.pathname)}))}function I(e){let o=e?.headers.get(d);o&&p(E,o,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+x(90))})}function l(e){return I(this),P(this),{message:e,succeeded:!1}}function A(e){return I(this),{data:e,succeeded:!0}}function S(e=[],o="GET"){let t=new Headers({Accept:"application/json","Content-Type":"application/json"});for(let[s,c]of e)t.set(s,c);let r=a(E);r&&t.set(d,r);let n=a(u);return n&&t.set("Authorization",n),{method:o,headers:t}}var N=null,T="oculto";function _(){return!!a(u)}function f(e,o=document){return o?o.querySelector(e):N}function R(e,...o){e&&e.classList.remove(...o)}function y(e,o){e&&(e.textContent=typeof o=="string"?o:o.toString())}function g(e,o={}){let t=new URL(`${location.protocol}//${location.hostname}`),r=new URL(e,t);for(let[n,s]of Object.entries(o))r.searchParams.set(n,s);return r.toString()}function h(e){return JSON.stringify(e)}function m(e){return e.length}var L="; ";function a(e){let o=document.cookie.split(L).find(t=>{let{name:r}=O(t);return r===e});return o?O(o).value:!1}function O(e){let[o,t]=e.split("=");return{name:o,value:t}}function p(e,o,t={}){if(m(e)===0)throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof o)||m(o.toString())===0)throw new Error("'setCookie' should receive a valid cookie value");let r=[`${e}=${o}`];t?.expires&&t?.expires instanceof Date&&r.push("expires="+t.expires.toUTCString()),t.maxAge&&r.push(`maxAge=${t.maxAge}`),t?.sameSite&&typeof t?.sameSite=="string"&&r.push(`SameSite=${t?.sameSite}`),t?.path&&r.push(`path=${t?.path}`),t?.domain&&r.push(`domain=${t?.path}`),t?.httpOnly&&r.push("HttpOnly"),t?.secure&&r.push("Secure");let n=r.join(L);return document.cookie=n,n}function x(e){return 86400*1e3*e}var D=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});var C={AC:"Acre",AL:"Alagoas",AP:"Amap\xE1",AM:"Amazonas",BA:"Bahia",CE:"Cear\xE1",DF:"Distrito Federal",ES:"Esp\xEDrito Santo",GO:"Goi\xE1s",MA:"Maranh\xE3o",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Par\xE1",PB:"Para\xEDba",PR:"Paran\xE1",PE:"Pernambuco",PI:"Piau\xED",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rond\xF4nia",RR:"Roraima",SC:"Santa Catarina",SP:"S\xE3o Paulo",SE:"Sergipe",TO:"Tocantins"},H=Object.keys(C),w=Object.values(C);var b="https://xef5-44zo-gegm.b2.xano.io";(function(){let e="/area-do-usuario/pedidos-de-compra";if(_()){location.href=e;return}async function o(s){let c="Houve uma falha ao validar o token. Por favor, tente novamente mais tarde.";try{let i=await fetch(`${b}/api:uImEuFxO/auth/magic-login`,{...S([],"POST"),body:h({magic_token:s})});if(!i.ok){let v=await i.json();return l.call(i,v?.message??c)}let M=await i.json();return A.call(i,M)}catch{return l(c)}}let t=new URLSearchParams(location.search),r=f("[data-wtf-recover-access-general-error-message]"),n=t.get("token");n&&o(n).then(s=>{if(!s.succeeded){let i=r&&f("div",r);return R(r,T),y(i,s.message)}p(u,s.data.authToken,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(s.data.expiration)}),location.href=e})})();})();
