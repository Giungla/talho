!function(){"use strict";var t="__Host-Talho-Session-Cookie",e="X-Talho-Session";function n(n){const a=n?.headers.get(e);a&&function(t,e,n={}){if(0===g(t))throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof e)||0===g(e.toString()))throw new Error("'setCookie' should receive a valid cookie value");const a=[`${t}=${e}`];n?.expires&&n?.expires instanceof Date&&a.push("expires="+n.expires.toUTCString()),n.maxAge&&a.push(`maxAge=${n.maxAge}`),n?.sameSite&&"string"==typeof n?.sameSite&&a.push(`SameSite=${n?.sameSite}`),n?.path&&a.push(`path=${n?.path}`),n?.domain&&a.push(`domain=${n?.path}`),n?.httpOnly&&a.push("HttpOnly"),n?.secure&&a.push("Secure");const r=a.join(p);document.cookie=r}(t,a,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+1e3*y*90)})}function a(t){return n(this),this&&401===this.status&&(location.href=function(t,e={}){const n=new URL(`${location.protocol}//${location.hostname}`),a=new URL(t,n);for(const[r,o]of Object.entries(e))a.searchParams.set(r,o);return a.toString()}("/acessos/entrar",{redirect_to:encodeURIComponent(location.pathname+location.search)})),{message:t,succeeded:!1}}function r(t){return n(this),{data:t,succeeded:!0}}function o(n=[],a="GET"){const r=new Headers({Accept:"application/json","Content-Type":"application/json"});for(const[t,e]of n)r.set(t,e);const o=h(t);o&&r.set(e,o);const i=h("__Host-Talho-AuthToken");return i&&r.set("Authorization",i),{method:a,headers:r}}var i=null,c="oculto";function s(t){return Array.isArray(t)}function u(t,e=document){return e?e.querySelector(t):i}function f(t,e,n,a){if(t)return t.addEventListener(e,n,a),()=>t.removeEventListener(e,n,a)}function l(t,e,n){return!!t&&t.classList.toggle(e,n)}function d(t,e){t&&(t.textContent="string"==typeof e?e:e.toString())}function m(t){if("string"!=typeof t)return null;try{return JSON.parse(t)}catch{return i}}function g(t){return t.length}var p="; ";function h(t){const e=document.cookie.split(p).find(e=>{const{name:n}=w(e);return n===t});return!!e&&w(e).value}function w(t){const[e,n]=t.split("=");return{name:e,value:n}}var y=86400,v=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"}),S="talho_cart_items",b="https://xef5-44zo-gegm.b2.xano.io/api:79PnTkh_",k=new Proxy({cart:i,fetched:i,isPending:!1,isCartOpened:!0},{get(t,e){switch(e){case"hasFreeShipping":return(t.cart?.order_price??0)>400;case"missingForFreeShipping":return Math.max(0,400-(t.cart?.order_price??0));case"getOrderPrice":return v.format(t.cart?.order_price??0);default:return Reflect.get(t,e)}},set(t,e,n){const a=Reflect.set(t,e,n);if(!a)return a;switch(e){case"isPending":break;case"isCartOpened":j();break;case"cart":!function(){d($,k.getOrderPrice);const t=k.cart?.items;if(!s(t)||!O||!_)return;if(l(u("[data-wtf-floating-cart-total-block]"),c,0===g(t)),l(u("[data-wtf-floating-cart-checkout-button]",F),c,0===g(t)),!l(x,c,g(t)>0))return d(u("[data-wtf-floating-cart-items-indicator]"),"0"),_.replaceChildren();let e=0;const n=document.createDocumentFragment();for(const{slug:a,imageUrl:r,quantity:o,price:i,sku_id:c,name:s}of t){e+=o;const t=O.cloneNode(!0);d(u("[data-wtf-floating-cart-item-product-name]",t),s),d(u("[data-wtf-floating-cart-item-quantity]",t),o.toString()),d(u("[data-wtf-floating-cart-item-product-price]",t),v.format(i));const l=u("[data-wtf-floating-cart-item-image]",t);l&&(l.style.backgroundImage=`url('${r}')`);const m={sku_id:c,reference_id:a},g=[["delete","data-wtf-floating-cart-item-remove"],["increase","data-wtf-floating-cart-item-plus-button"],["decrease","data-wtf-floating-cart-item-minus-button"]];for(const[e,n]of g)f(u(`[${n}]`,t),"click",t=>A.call(t,e,m));n.appendChild(t)}d(u("[data-wtf-floating-cart-items-indicator]"),e.toString()),_?.replaceChildren(n)}(),function(){const{hasFreeShipping:t}=k;if(l(C,c,!t),l(P,c,t),!t)return d(u("[data-wtf-promo-invalidada-txt]",P),`Adicione mais ${v.format(k.missingForFreeShipping)} e ganhe frete grátis`);d(u("[data-wtf-promo-validada-txt-sem-imagem]",C),"Você ganhou frete grátis")}(),localStorage.setItem(S,JSON.stringify(n))}return a}}),O=u("[data-wtf-floating-cart-item]"),_=u("[data-wtf-floating-cart-item-wrapper]"),x=u("[data-wtf-floating-cart-empty-cart]"),C=u("[data-wtf-promo-valid]"),P=u("[data-wtf-promo-invalid]"),$=u("[data-wtf-floating-cart-total]");function T(t,e,n){return Object.prototype.hasOwnProperty.call(t,e)&&(!n||typeof t[e]===n)}async function j(){if(!k.isCartOpened)return;const t=m(localStorage.getItem(S));if(t&&T(e=t,"order_price","number")&&T(e,"items")&&s(e.items)&&(0===g(e.items)||e.items.every(t=>T(t,"name","string")&&T(t,"quantity","number")&&T(t,"price","number")&&T(t,"imageUrl","string")&&T(t,"sku_id","number")&&T(t,"slug","string"))))return k.fetched??=!0,void(k.cart=t);var e;localStorage.removeItem(S),k.isPending=!0;const n=await async function(){const t="Houve uma falha ao buscar o seu carrinho";try{const e=await fetch(`${b}/cart/get`,{...o()});if(!e.ok){const n=await e.json();return a.call(e,n?.message??t)}const n=await e.json();return r.call(e,n)}catch(e){return a(t)}}();k.fetched??=!0,k.isPending=!1,n.succeeded&&(k.cart=n.data)}async function A(t,e){this.preventDefault(),this.stopPropagation(),await async function(t,e){if(k.isPending)return;k.isPending=!0;const n=await async function(t,e){const n="Houve uma falha ao buscar o seu carrinho";try{const c=await fetch(`${b}/cart/handle`,{...o([],"POST"),body:(i={item:t,operation:e},JSON.stringify(i))});if(!c.ok){const t=await c.json();return a.call(c,t?.message??n)}const s=await c.json();return r.call(c,s)}catch(c){return a(n)}var i}({...e,quantity:1},t);k.isPending=!1,n.succeeded&&(k.cart=n.data)}(t,e)}var F=u("[data-wtf-floating-cart]"),L=new MutationObserver(t=>{const e=!!(n=t[0].target)&&n.classList.contains("carrinhoflutuante--visible");var n;k.isCartOpened=e,window.scrollTo({top:0,behavior:"instant"}),document.body.style.overflow=e?"hidden":"unset"});F&&(L.observe(F,{attributes:!0,attributeFilter:["class"]}),_&&(window.addEventListener("storage",function(t){t.key===S&&(k.cart=t.newValue?m(t.newValue):i)}),j().then(()=>{k.isCartOpened=!1})))}();