"use strict";(()=>{var P="; ";function E(e){let t=document.cookie.split(P).find(o=>{let{name:s}=M(o);return s===e});return t?M(t).value:!1}function M(e){let[t,o]=e.split("=");return{name:t,value:o}}function k(e,t,o={}){if(e.length===0)throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof t)||t.toString().length===0)throw new Error("'setCookie' should receive a valid cookie value");let s=[`${e}=${t}`];o?.expires&&o?.expires instanceof Date&&s.push("expires="+o.expires.toUTCString()),o.maxAge&&s.push(`maxAge=${o.maxAge}`),o?.sameSite&&typeof o?.sameSite=="string"&&s.push(`SameSite=${o?.sameSite}`),o?.path&&s.push(`path=${o?.path}`),o?.domain&&s.push(`domain=${o?.path}`),o?.httpOnly&&s.push("HttpOnly"),o?.secure&&s.push("Secure");let l=s.join(P);return document.cookie=l,l}var ie=401,w="__Host-Talho-AuthToken",D="__Host-Talho-Session-Cookie",H="X-Talho-Session";function ue(e){!e||e.status!==ie||(location.href=h("/acessos/entrar",{redirect_to:encodeURIComponent(location.pathname)}))}function W(e){let t=e?.headers.get(H);t&&k(D,t,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+q(90))})}function L(e){return W(this),ue(this),{message:e,succeeded:!1}}function F(e){return W(this),{data:e,succeeded:!0}}function U(e=[],t="GET"){let o=new Headers({Accept:"application/json","Content-Type":"application/json"});for(let[y,_]of e)o.set(y,_);let s=E(D);s&&o.set(H,s);let l=E(w);return l&&o.set("Authorization",l),{method:t,headers:o}}function q(e){return 86400*1e3*e}var ce=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});var Q=null,g="oculto";function G(){return!!E(w)}function c(e,t=document){return t?t.querySelector(e):Q}function x(e,t,o,s){if(e)return e.addEventListener(t,o,s),()=>e.removeEventListener(t,o,s)}function K(e,t,o){e&&e.setAttribute(t,o)}function S(e,t){e&&e.removeAttribute(t)}function V(e,...t){e&&e.classList.add(...t)}function $(e,...t){e&&e.classList.remove(...t)}function A(e,t,o){return e?e.classList.toggle(t,o):!1}function T(e){return A(c("[data-wtf-loader]"),g,!e)}function C(e,t){e&&(e.textContent=typeof t=="string"?t:t.toString())}function h(e,t={}){let o=new URL(`${location.protocol}//${location.hostname}`),s=new URL(e,o);for(let[l,y]of Object.entries(t))s.searchParams.set(l,y);return s.toString()}function j(e){return JSON.stringify(e)}function z(e){return e.length}function O(e,t){e&&e.focus(t)}var B={AC:"Acre",AL:"Alagoas",AP:"Amap\xE1",AM:"Amazonas",BA:"Bahia",CE:"Cear\xE1",DF:"Distrito Federal",ES:"Esp\xEDrito Santo",GO:"Goi\xE1s",MA:"Maranh\xE3o",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Par\xE1",PB:"Para\xEDba",PR:"Paran\xE1",PE:"Pernambuco",PI:"Piau\xED",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rond\xF4nia",RR:"Roraima",SC:"Santa Catarina",SP:"S\xE3o Paulo",SE:"Sergipe",TO:"Tocantins"},pe=Object.keys(B),le=Object.values(B);var ee="https://xef5-44zo-gegm.b2.xano.io";(function(){let e="mensagemdeerro",t="disabled",o="[data-wtf-wrapper]",s={preventScroll:!1};if(!G()){location.href=h("/acessos/entrar",{redirect_to:encodeURIComponent(location.pathname)});return}function l(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function y(r,n){if(!r)return;let a=!n.succeeded,i=c("[data-wtf-error-update-password]",r),u=c("[data-wtf-success-update-password]",r);if(A(i,g,!a),A(u,g,a),!a){u&&setTimeout(()=>V(u,g),8e3);return}let p=i&&c("div",i);C(p,n.message)}function _(r){return function(n){return[r,n]}}function I(r,n){let a=r.closest(o);A(a,e,!n)}async function te(r){let n="Houve uma falha ao atualizar sua senha. Por favor, tente novamente mais tarde.";try{let a=await fetch(`${ee}/api:TJEuMepe/user/change-password`,{...U([],"PUT"),body:j(r)});if(!a.ok){let u=await a.json();return L.call(a,u?.message??n)}let i=await a.json();return F.call(a,i)}catch{return L(n)}}let R=c("#wf-form-update-password"),re=["name","method","data-name","aria-label","data-wf-page-id","data-wf-element-id","data-turnstile-sitekey"];if(R){for(let n of re)S(R,n);let r=R.parentElement;$(r,"w-form"),R.remove(),r.insertAdjacentHTML("afterbegin",R.outerHTML)}let d=c("[data-wtf-password]"),m=c("[data-wtf-confirm-password]");function ne(r){return n=>n.test(r)}let J=[{field:d,validator:ae},{field:m,validator:Z}];for(let{field:r,validator:n}of J)r&&(x(r,"blur",n),x(r,"input",()=>I(r,!0)));function oe(r){let n=ne(r);return{hasNumber:n(/\d/),hasLowercase:n(/[a-z]/),hasUppercase:n(/[A-Z]/),hasMinLength:n(/.{8,}/),hasSpecialChar:n(/[!@#$%^&*()_+{}\[\]:;<>,.?\/~\\-]/)}}function se({hasNumber:r,hasLowercase:n,hasUppercase:a,hasMinLength:i,hasSpecialChar:u}){let p=(v,N)=>`Sua senha deve conter pelo menos ${v} ${N}`;return i?r?u?n?a?!1:p(1,"letra mai\xFAscula"):p(1,"letra min\xFAscula"):p(1,"caractere especial"):p(1,"n\xFAmero"):p(8,"caracteres")}function Y(r,n){if(!r)return;let a=c("[data-wtf-field-error] div",r.closest(o));C(a,n)}function X(r,n){return r&&n&&r?.value===n?.value}function ae(){let r=_("wtfPassword");if(!d)return r(!1);let{hasNumber:n,hasMinLength:a,hasLowercase:i,hasUppercase:u,hasSpecialChar:p}=oe(d.value),v=n&&i&&u&&p&&a,N=se({hasNumber:n,hasLowercase:i,hasUppercase:u,hasMinLength:a,hasSpecialChar:p});return Y(d,N||""),I(d,v),z(m?.value??"")>0&&X(d,m)&&Z(),r(v)}function Z(){let r=_("wtfConfirmPassword"),n=X(d,m);return Y(m,n?"":"As senhas informadas n\xE3o conferem"),m&&I(m,n),r(n)}let f=c("#wf-form-update-password"),b=c('[type="submit"]',f);S(b,t),f&&(x(f,"submit",async r=>{r.preventDefault(),r.stopPropagation(),K(b,t,t);let n=J.map(({validator:i})=>i).find(i=>i().at(1)===!1);if(n){let i=l(n().at(0)),u=c(`[data-${i}]`,f);return O(u,s),setTimeout(()=>{u?.dispatchEvent(new FocusEvent("blur")),O(u,s)},0),S(b,t)}T(!0);let a=await te({password:f?.password.value,confirm_password:f?.confirm_password.value});if(y(f,a),S(b,t),!a.succeeded)return T(!1);f.reset(),T(!1)}),T(!1))})();})();
