"use strict";(()=>{var se=401,A="__Host-Talho-AuthToken",N="__Host-Talho-Session-Cookie",M="X-Talho-Session";function ae(e){!e||e.status!==se||(location.href=w("/acessos/entrar",{redirect_to:encodeURIComponent(location.pathname)}))}function J(e){let t=e?.headers.get(M);t&&h(N,t,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+P(90))})}function d(e){return J(this),ae(this),{message:e,succeeded:!1}}function L(e){return J(this),{data:e,succeeded:!0}}function O(e=[],t="GET"){let r=new Headers({Accept:"application/json","Content-Type":"application/json"});for(let[f,v]of e)r.set(f,v);let s=E(N);s&&r.set(M,s);let l=E(A);return l&&r.set("Authorization",l),{method:t,headers:r}}var Y=null,b="oculto";function k(){return!!E(A)}function u(e,t=document){return t?t.querySelector(e):Y}function S(e,t,r,s){if(e)return e.addEventListener(t,r,s),()=>e.removeEventListener(t,r,s)}function R(e,t){e&&e.removeAttribute(t)}function U(e,...t){e&&e.classList.add(...t)}function D(e,...t){e&&e.classList.remove(...t)}function I(e,t,r){return e?e.classList.toggle(t,r):!1}function H(e,t){e&&(e.textContent=typeof t=="string"?t:t.toString())}function w(e,t={}){let r=new URL(`${location.protocol}//${location.hostname}`),s=new URL(e,r);for(let[l,f]of Object.entries(t))s.searchParams.set(l,f);return s.toString()}function G(e){return JSON.stringify(e)}function T(e){return e.length}function F(){return/^(([\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+(\.[\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+)*)|("[\p{L}\p{N}\s!#$%&'*+\/=?^_`{|}~.-]+"))@(([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*\.)+[a-zA-Z]{2,63}|(\[(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\]))$/u}function y(e,t){e&&e.focus(t)}var q="; ";function E(e){let t=document.cookie.split(q).find(r=>{let{name:s}=K(r);return s===e});return t?K(t).value:!1}function K(e){let[t,r]=e.split("=");return{name:t,value:r}}function h(e,t,r={}){if(T(e)===0)throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof t)||T(t.toString())===0)throw new Error("'setCookie' should receive a valid cookie value");let s=[`${e}=${t}`];r?.expires&&r?.expires instanceof Date&&s.push("expires="+r.expires.toUTCString()),r.maxAge&&s.push(`maxAge=${r.maxAge}`),r?.sameSite&&typeof r?.sameSite=="string"&&s.push(`SameSite=${r?.sameSite}`),r?.path&&s.push(`path=${r?.path}`),r?.domain&&s.push(`domain=${r?.path}`),r?.httpOnly&&s.push("HttpOnly"),r?.secure&&s.push("Secure");let l=s.join(q);return document.cookie=l,l}function P(e){return 86400*1e3*e}var ie=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});var j={AC:"Acre",AL:"Alagoas",AP:"Amap\xE1",AM:"Amazonas",BA:"Bahia",CE:"Cear\xE1",DF:"Distrito Federal",ES:"Esp\xEDrito Santo",GO:"Goi\xE1s",MA:"Maranh\xE3o",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Par\xE1",PB:"Para\xEDba",PR:"Paran\xE1",PE:"Pernambuco",PI:"Piau\xED",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rond\xF4nia",RR:"Roraima",SC:"Santa Catarina",SP:"S\xE3o Paulo",SE:"Sergipe",TO:"Tocantins"},ue=Object.keys(j),ce=Object.values(j);var V="https://xef5-44zo-gegm.b2.xano.io";(function(){let e="disabled",t="mensagemdeerro",r="/area-do-usuario/pedidos-de-compra",s="redirect_to",l="[data-wtf-general-error-message]",f={preventScroll:!1};async function v(o){let n="Houve uma falha ao realizar o login. Por favor, tente novamente mais tarde.";try{let a=await fetch(`${V}/api:t3reRXiD/auth/login`,{...O([],"POST"),body:G(o)});if(!a.ok){let c=await a.json();return d.call(a,c?.message??n)}let i=await a.json();return L.call(a,i)}catch{return d(n)}}async function W(){let o="Houve uma falha na autoriza\xE7\xE3o Google. Por favor, tente novamente mais tarde.",n=new URL(`${V}/api:h_RKfex8/oauth/google/init`);n.searchParams.set("redirect_uri",location.origin.concat("/acessos/google-social-login"));try{let a=await fetch(n,{...O()});if(!a.ok){let c=await a.json();return d.call(a,c?.message??o)}let i=await a.json();return L.call(a,i)}catch{return d(o)}}function Z(o){return o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function z(){let n=new URL(location.href).searchParams.get(s);return n?decodeURIComponent(n):r}if(k()){location.href=z();return}let _=u("#wf-form-login"),Q=["name","method","aria-label","data-wf-page-id","data-wf-element-id","data-turnstile-sitekey"];if(_){for(let n of Q)R(_,n);let o=_.parentNode;D(o,"w-form"),_.remove(),o.insertAdjacentHTML("afterbegin",_.outerHTML)}let m=u("#wf-form-login"),$=new URLSearchParams(location.search),p=u("[data-wtf-user]"),g=u("[data-wtf-password]"),x=u('[type="submit"]',m),ee=u("[data-wtf-google]");$.has("email")?(p&&(p.value=$.get("email")??""),y(g,f)):y(p,f);function B(o){return function(n){return[o,n]}}function C(o,n){if(!o)return;let a=o.closest("[data-wtf-wrapper]");I(a,t,!n)}function te(o){o&&U(u(l,o),b)}function oe(o,n){let a=!n.succeeded,i=u(l,o);if(I(i,b,!a),!a)return;let c=i&&u("div",i);H(c,n.message)}function re(){let o=B("wtfUser");if(!p)return o(!1);let n=F().test(p.value);return C(p,n),o(n)}function ne(){let o=B("wtfPassword");if(!g)return o(!1);let n=T(g.value)>7;return C(g,n),o(n)}S(ee,"click",function(o){o.preventDefault(),W().then(n=>{n.succeeded&&(location.href=n.data.authUrl)})},{once:!0});let X=[{field:p,validator:re},{field:g,validator:ne}];for(let{field:o,validator:n}of X)S(o,"blur",n),S(o,"input",()=>C(o,!0));if(!m){console.warn("[WithTheFlow] Form was not founded at this page");return}S(m,"submit",async o=>{x?.setAttribute(e,e),o.preventDefault(),o.stopPropagation(),te(m);let a=X.map(({validator:c})=>c).find(c=>c().at(1)===!1);if(a){let c=Z(a().at(0));return y(u(`[data-${c}]`,m),f),R(x,e)}let i=await v({email:p?.value,password:g?.value});if(i.succeeded){h(A,i.data.authToken,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(i.data.expiration)}),location.href=z();return}oe(m,d(i.message)),R(x,e)}),R(x,e)})();})();
