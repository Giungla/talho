!function(){"use strict";var t="__Host-Talho-AuthToken",e="__Host-Talho-Session-Cookie",n="X-Talho-Session";function a(t){const a=t?.headers.get(n);a&&function(t,e,n={}){if(0===v(t))throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof e)||0===v(e.toString()))throw new Error("'setCookie' should receive a valid cookie value");const a=[`${t}=${e}`];n?.expires&&n?.expires instanceof Date&&a.push("expires="+n.expires.toUTCString()),n.maxAge&&a.push(`maxAge=${n.maxAge}`),n?.sameSite&&"string"==typeof n?.sameSite&&a.push(`SameSite=${n?.sameSite}`),n?.path&&a.push(`path=${n?.path}`),n?.domain&&a.push(`domain=${n?.path}`),n?.httpOnly&&a.push("HttpOnly"),n?.secure&&a.push("Secure");const o=a.join(y);document.cookie=o}(e,a,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+1e3*k*14)})}function o(t,e=!1){return a(this),e&&this&&401===this.status&&(location.href=function(t,e={}){const n=new URL(`${location.protocol}//${location.hostname}`),a=new URL(t,n);for(const[o,r]of Object.entries(e))a.searchParams.set(o,r);return a.toString()}("/acessos/entrar",{redirect_to:encodeURIComponent(location.pathname+location.search)})),{message:t,succeeded:!1}}function r(t){return a(this),{data:t,succeeded:!0}}function s(a=[],o="GET"){const r="application/json",s=new Headers({Accept:r,"Content-Type":r});for(const[t,e]of a)s.set(t,e);const c=b(e);c&&s.set(n,c);const i=b(t);return i&&s.set("Authorization",i),{method:o,headers:s}}var c=null,i="oculto";function u(t,e=document){return e?e.querySelector(t):c}function d(t,e,n,a){if(t)return t.addEventListener(e,n,a),()=>t.removeEventListener(e,n,a)}function f(t,e,n){t&&t.setAttribute(e,n)}function l(t,e){t&&t.removeAttribute(e)}function m(t,...e){t&&t.classList.add(...e)}function h(t,...e){t&&t.classList.remove(...e)}function p(t,e,n){return!!t&&t.classList.toggle(e,n)}function w(t,e){t&&(t.textContent="string"==typeof e?e:e.toString())}function g(t){return JSON.stringify(t)}function v(t){return t.length}var y="; ";function b(t){const e=document.cookie.split(y).find(e=>{const{name:n}=_(e);return n===t});return!!e&&_(e).value}function _(t){const[e,n]=t.split("=");return{name:e,value:n}}var k=86400,S=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"}),$="https://xef5-44zo-gegm.b2.xano.io";!function(){const e="disabled",n=`${$}/api:79PnTkh_`,a=new Set;function y(...t){return Math.max(...t)}if(!b(t))return void(location.href="/acessos/entrar");const _=new Proxy({list:[]},{get(t,e){const n=v(t.list);switch(e){case"hasOrders":return n>0;case"ordersCount":return n;default:return t[e]}},set(t,e,n){const a=Reflect.set(t,e,n);return a?("list"===e&&function(){const{list:t,hasOrders:e}=_;if(!j||!C||!A)return;p(x,i,e),p(j,i,!e);const n=document.createDocumentFragment();for(const a of t){const t=C.cloneNode(!0);w(u("[data-wtf-order-total]",t),a.total),w(u("[data-wtf-order-status]",t),a.status),w(u("[data-wtf-created-at]",t),a.created_at),w(u("[data-wtf-payment-method]",t),a.payment_method),w(u("[data-wtf-transaction-id]",t),a.transaction_id);const e=u("[data-wtf-product-list]",t);for(const{name:n,slug:o,product_id:r,sku_id:s,quantity:l,unit_price:m,image:p,review:g,has_stock:v}of a.order_items){const t=A.cloneNode(!0),y=u("[data-wtf-review-area]",t);f(u("[data-wtf-product-anchor]",t),"href",`/produtos/${o}`),f(u("[data-wtf-order-item-image]",t),"style",`background-image: url(${p})`);const b=u("[data-wtf-buy-again-cta]",t);if(v?d(b,"click",()=>O({sku_id:s,slug:o})):T(b),w(u("[data-wtf-product-name]",t),n),w(u("[data-wtf-product-price]",t),S.format(m/100)),w(u("[data-wtf-product-subtotal]",t),S.format(m*l/100)),void 0===g){const t=L?.cloneNode(!0)??c,e=N?.cloneNode(!0)??c;h(t,i),a.pago?(d(u("[data-wtf-not-rated-cta]",t),"click",()=>{P(r,t,e)},{once:!0}),T(u("[data-wtf-not-rated-unpaid]",t))):(T(u("[data-wtf-not-rated-paid]",t)),T(u("[data-wtf-not-rated-cta]",t))),k(y,t,e)}else{const t=E?.cloneNode(!0);w(u("[data-wtf-evaluated-comment]",t),g.comment),H(t,g.rating),h(t,i),k(y,t)}e.insertAdjacentElement("afterbegin",t)}n.appendChild(t)}k(j,n)}(),!0):a}});function k(t,...e){t&&t.replaceChildren(...e.filter(Boolean))}function T(t){if(t)return t.remove()}const x=u("[data-wtf-has-no-orders]"),C=u("[data-wtf-order-template]"),j=u("[data-wtf-orders-container]"),A=u("[data-wtf-product-item]",j),E=u("[data-wtf-evaluated]"),L=u("[data-wtf-not-rated]"),N=u("[data-wtf-evaluation-form]");for(const t of[E,L,N,A])T(t);async function O({sku_id:t,slug:e}){if(a.has(e))return;a.add(e);const c=await async function(t){const e="Falha ao adicionar o produto";try{const a=await fetch(`${n}/cart/handle`,{...s([],"POST"),body:g({item:t,operation:"add"})});if(!a.ok){const t=await a.json();return o.call(a,t?.message??e)}const c=await a.json();return r.call(a,c)}catch(a){return o(`[CATCH] ${e}`)}}({sku_id:t,quantity:1,reference_id:e});c.succeeded?(m(u("#carrinho-flutuante"),"carrinhoflutuante--visible"),localStorage.setItem("talho_cart_items",g(c.data)),a.delete(e)):a.delete(e)}function H(t,e){if(!t)return;const n=u("[data-wtf-evaluated-star-section]",t);if(!n)return;const a=y(n.childElementCount-y(1,e),0);for(let o=0;o++<a;)T(n.lastElementChild)}function P(t,n,a){if(!n||!a)return;m(n,i),h(a,i);const c=u("form",a),p=c?.parentElement;if(!c||!p)return;const v=["id","name","method","data-name","aria-label","data-wf-page-id","data-wf-element-id","data-turnstile-sitekey"];for(const e of v)l(c,e);T(c),k(p),p.insertAdjacentHTML("afterbegin",c.outerHTML);const y=u("form",a);l(u('[type="submit"]',y),e),d(y,"submit",async n=>{if(n.preventDefault(),n.stopPropagation(),!n.isTrusted||!n.submitter)return;f(n.submitter,e,e);const a=await async function({comment:t,rating:e,product_id:n}){const a="Falha ao gerar a avaliação, tente novamente mais tarde.";try{const c=await fetch(`${$}/api:9ixgU7Er/ratings/${n}/create`,{...s([],"POST"),body:g({rating:e,comment:t})});if(!c.ok){const t=await c.json();return o.call(c,t?.message??a)}const i=await c.json();return r.call(c,i)}catch(c){return o(a)}}({product_id:t,comment:y.comment.value,rating:parseInt(y.rating.value)});a.succeeded?function(t,e){if(!e)return;const n=e.closest("[data-wtf-review-area]");if(!n)return;const a=E?.cloneNode(!0);a&&(H(a,t.rating),w(u("[data-wtf-evaluated-comment]",a),t.comment),h(a,i),k(n,a))}(a.data,y):l(n.submitter,e)})}(async function(){const t="Falha ao buscar os pedidos";try{const e=await fetch(`${$}/api:TJEuMepe/user/orders`,{...s()});if(!e.ok){const n=await e.json();return o.call(e,n?.message??t)}const n=await e.json();return r.call(e,n)}catch(e){return o(t)}})().then(t=>{t.succeeded&&(_.list=t.data)})}()}();