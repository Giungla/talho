(()=>{let c="__Host-Talho-AuthToken",l="; ",d="disabled",f="oculto",a="mensagemdeerro",p="https://xef5-44zo-gegm.b2.xano.io",m="[data-wtf-general-error-message]",h={preventScroll:!1};function o(e,t,a,o){e&&e.addEventListener(t,a,o)}function v(e,t=document){return t?t.querySelector(e):null}function r(e){var[e,t]=e.split("=");return{name:e,value:t}}function e(){var t,e;return t=c,!!(e=document.cookie.split(l).find(e=>{e=r(e).name;return e===t}))&&r(e).value}function g(e){return{message:e,succeeded:!1}}function w(e){return{data:e,succeeded:!0}}function y(e,t,a){e&&e.classList.toggle(t,a)}function S(e,t){e&&e.removeAttribute(t)}function L(e,t){e&&e.focus(t)}function b(){var e=new URL(location.href).searchParams.get("redirect_to");return e?decodeURIComponent(e):"/area-do-usuario/pedidos-de-compra"}if(e())location.href=b();else{var t=v("#wf-form-login");if(t){for(var k of["name","method","aria-label","data-wf-page-id","data-wf-element-id","data-turnstile-sitekey"])S(t,k);var x=t.parentNode;A=["w-form"],(T=x)&&T.classList.remove(...A),t.remove(),x.insertAdjacentHTML("afterbegin",t.outerHTML)}let r=v("#wf-form-login");var T=new URLSearchParams(location.search);let n=v("[data-wtf-user]"),i=v("[data-wtf-password]"),s=v('[type="submit"]',r);var A=v("[data-wtf-google]");T.has("email")?(n&&(n.value=T.get("email")??""),L(i,h)):L(n,h),o(A,"click",function(e){e.preventDefault(),(async()=>{var t="Houve uma falha na autorização Google. Por favor, tente novamente mais tarde.",e=new URL(p+"/api:h_RKfex8/oauth/google/init");e.searchParams.set("redirect_uri",location.origin.concat("/acessos/google-social-login"));try{var a=await fetch(e);return a.ok?w(await a.json()):g((await a.json())?.message??t)}catch(e){return g(t)}})().then(e=>{e.succeeded&&(location.href=e.data.authUrl)})},{once:!0});let u=[{field:n,validator:function(){var e,t=P("wtfUser");return n?(e=/^(([\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+(\.[\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+)*)|("[\p{L}\p{N}\s!#$%&'*+\/=?^_`{|}~.-]+"))@(([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*\.)+[a-zA-Z]{2,63}|(\[(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\]))$/u.test(n.value),_(n,e),t(e)):t(!1)}},{field:i,validator:function(){var e,t=P("wtfPassword");return i?(e=7<i.value.length,_(i,e),t(e)):t(!1)}}];for(let{field:e,validator:t}of u)o(e,"blur",t),o(e,"input",()=>_(e,!0));function P(t){return function(e){return[t,e]}}function _(e,t){e&&(e=e.closest("[data-wtf-wrapper]"))&&y(e,a,!t)}r?(o(r,"submit",async e=>{s?.setAttribute(d,d),e.preventDefault(),e.stopPropagation(),(e=r)&&(e=v(m,e),t=[f],e)&&e.classList.add(...t);e=u.map(({validator:e})=>e).find(e=>!1===e().at(1));if(e)return L(v(`[data-${e().at(0).replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}]`,r),h),S(s,d);var t=await(async e=>{var t="Houve uma falha ao realizar o login. Por favor, tente novamente mais tarde.";try{var a=await fetch(p+"/api:t3reRXiD/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return a.ok?w(await a.json()):g((await a.json())?.message??t)}catch(e){return g(t)}})({email:n?.value,password:i?.value});if(t.succeeded){var e=c,a=t.data.authToken,o={path:"/",secure:!0,sameSite:"Strict",expires:new Date(t.data.expiration)};if(0===e.length)throw new Error("'setCookie' should receive a valid cookie name");if(["string","number","boolean"].includes(typeof a)&&0!==a.toString().length)return e=[e+"="+a],o?.expires&&o?.expires instanceof Date&&e.push("expires="+o.expires.toUTCString()),o?.sameSite&&"string"==typeof o?.sameSite&&e.push("SameSite="+o?.sameSite),o?.path&&e.push("path="+o?.path),o?.domain&&e.push("domain="+o?.path),o?.httpOnly&&e.push("HttpOnly"),o?.secure&&e.push("Secure"),a=e.join(l),document.cookie=a,void(location.href=b());throw new Error("'setCookie' should receive a valid cookie value")}o=r,a=!(e=g(t.message)).succeeded,y(o=v(m,o),f,!a),a&&(a=o&&v("div",o))&&(a.textContent=e.message),S(s,d)}),S(s,d)):console.warn("[WithTheFlow] Form was not founded at this page")}})();