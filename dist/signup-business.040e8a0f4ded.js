!function(){"use strict";var e="__Host-Talho-Session-Cookie",t="X-Talho-Session";function s(s){const i=s?.headers.get(t);i&&function(e,t,s={}){if(0===h(e))throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof t)||0===h(t.toString()))throw new Error("'setCookie' should receive a valid cookie value");const i=[`${e}=${t}`];s?.expires&&s?.expires instanceof Date&&i.push("expires="+s.expires.toUTCString()),s.maxAge&&i.push(`maxAge=${s.maxAge}`),s?.sameSite&&"string"==typeof s?.sameSite&&i.push(`SameSite=${s?.sameSite}`),s?.path&&i.push(`path=${s?.path}`),s?.domain&&i.push(`domain=${s?.path}`),s?.httpOnly&&i.push("HttpOnly"),s?.secure&&i.push("Secure");const a=i.join(f);document.cookie=a}(e,i,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+1e3*b*14)})}function i(e,t=!1){return s(this),t||this&&401===this.status&&(location.href=function(e,t={}){const s=new URL(`${location.protocol}//${location.hostname}`),i=new URL(e,s);for(const[a,n]of Object.entries(t))i.searchParams.set(a,n);return i.toString()}("/acessos/entrar",{redirect_to:encodeURIComponent(location.pathname+location.search)})),{message:e,succeeded:!1}}function a(e){return s(this),{data:e,succeeded:!0}}function n(s=[],i="GET"){const a="application/json",n=new Headers({Accept:a,"Content-Type":a});for(const[e,t]of s)n.set(e,t);const r=g(e);r&&n.set(t,r);const o=g("__Host-Talho-AuthToken");return o&&n.set("Authorization",o),{method:i,headers:n}}var r=null;function o(e,t=document){return t?t.querySelector(e):r}function d(e,t,s,i){if(e)return e.addEventListener(t,s,i),()=>e.removeEventListener(t,s,i)}function c(e,t,s){e&&e.setAttribute(t,s)}function u(e){return e.trim()}function l(e){return e.replace(/\D+/g,"")}function h(e){return e.length}function m(e,t){return e.test(t)}function p(e,t){e&&e.scrollIntoView(t)}var f="; ";function g(e){const t=document.cookie.split(f).find(t=>{const{name:s}=E(t);return s===e});return!!t&&E(t).value}function E(e){const[t,s]=e.split("=");return{name:t,value:s}}var b=86400,v=Object.keys({AC:"Acre",AL:"Alagoas",AP:"Amapá",AM:"Amazonas",BA:"Bahia",CE:"Ceará",DF:"Distrito Federal",ES:"Espírito Santo",GO:"Goiás",MA:"Maranhão",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Pará",PB:"Paraíba",PR:"Paraná",PE:"Pernambuco",PI:"Piauí",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rondônia",RR:"Roraima",SC:"Santa Catarina",SP:"São Paulo",SE:"Sergipe",TO:"Tocantins"});function V(e,t,s){return e?t.push(s):-1}var y=new WeakMap,w=e=>{const t=y.get(e);t&&(t(),y.delete(e))};function S(...e){return{mounted(t){const s=d(t,"input",s=>{if(!s.isTrusted)return;const i=s.target;i.value=e.reduce((e,t)=>t(e),i.value??M),t.dispatchEvent($)});y.set(t,s)},unmounted:w}}var $=new Event("input"),A=new Event("blur"),T=[10,11],M="",R="https://xef5-44zo-gegm.b2.xano.io",{ref:k,unref:x,nextTick:N,createApp:C}=window.Vue,D="value",P="data-original-text",j={block:"center",behavior:"smooth"};function L(e,t,s){return{field:e,valid:t,...s}}var F=r,I=C({setup:()=>({formElement:k(),globalErrorMessageElement:k,globalSuccessMessageElement:k,firstNameElement:k(),lastNameElement:k(),cpfElement:k(),emailElement:k(),birthDayElement:k(),phoneElement:k(),passwordElement:k(),cepElement:k(),addressElement:k(),numberElement:k(),neighborhoodElement:k(),cityElement:k(),stateElement:k(),termsElement:k()}),data:()=>({user:{name:M,lastName:M,cpf:M,email:M,phone:M,birthDate:M,password:M},address:{cep:M,address:M,number:M,complement:M,neighborhood:M,city:M,state:M},acceptTerms:!1,optIn:!1,visitedFields:[],loadingText:r,addressMessageError:r,isSubmitted:!1,createResponse:r}),methods:{async createUser(e){const t="Houve uma falha ao registrar o usuário";try{const r=await fetch(`${R}/api:USKfYC-x/user/create`,{...n([],"POST"),body:(s=e,JSON.stringify(s))});if(!r.ok){const e=await r.json();return i.call(r,e?.message??t)}const o=await r.json();return a.call(r,o)}catch(r){return i(t)}var s},async searchAddress(e,t){const s="Houve uma falha na busca do endereço";try{const r=await fetch(`${R}/api:jyidAW68/cepaddress/${e}`,{...n(),signal:t});if(!r.ok){const e=await r.json();return i.call(r,e?.message??s)}const o=await r.json();return a.call(r,o)}catch(r){return i(s)}},async handleSubmit(e){e.preventDefault(),this.isSubmitted||(this.isSubmitted=!0),this.triggerValidations();const{firstInvalidField:t}=this;if(t)return void p(t.field,j);this.loadingText="Registrado usuário...";const{user:s,address:i,optIn:a,acceptTerms:n}=this,o=await this.createUser({user:s,address:i,optIn:a,acceptTerms:n});if(this.loadingText=r,!o.succeeded)return this.createResponse=o.message,N(()=>{const e=this.globalErrorMessageElement;e&&p(e,j)});this.createResponse=o.data,N(()=>{this.formElement?.reset();const e=this.globalSuccessMessageElement;e&&p(e,j)})},setVisitedField(e){V(!0,this.visitedFields,e)},hasVisitEntry(e){return this.visitedFields.includes(e)},triggerValidations(){const e=this.validatableFields;for(const{field:t}of e)t?.dispatchEvent?.(A)}},computed:{nameValidation(){return L(x(this.firstNameElement),!this.hasVisitEntry("firstName")||h(u(this.user.name))>1)},lastNameValidation(){return L(x(this.lastNameElement),!this.hasVisitEntry("lastName")||h(u(this.user.lastName))>1)},cpfValidation(){const{cpf:e}=this.user;return L(x(this.cpfElement),!this.hasVisitEntry("cpf")||m(/^\d{3}\.\d{3}\.\d{3}-\d{2}$/,u(e))&&function(e){if(11!==h(e=l(e))||/^(\d)\1{10}$/.test(e))return!1;const t=T.map((t,s)=>{const i=s?10:9,a=11-[...e.slice(0,i)].map(Number).reduce((e,s,i)=>e+s*(t-i),0)%11;return a>9?0:a});return e.endsWith(t.join(M))}(e))},emailValidation(){return L(x(this.emailElement),!this.hasVisitEntry("email")||m(/^(([\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+(\.[\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+)*)|("[\p{L}\p{N}\s!#$%&'*+\/=?^_`{|}~.-]+"))@(([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*\.)+[a-zA-Z]{2,63}|(\[(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\]))$/u,u(this.user.email)))},birthDateValidation(){const{birthDate:e}=this.user;return L(x(this.birthDayElement),!this.hasVisitEntry("birthDate")||m(/^(0[1-9]|[12][0-9]|3[01])\/(0[1-9]|1[0-2])\/(19|20)\d{2}$/,u(e))&&function(e){const[t,s,i]=e.split("/");return"Invalid Date"!==new Date(`${i}-${s}-${t}T00:00:00`).toString()}(e))},phoneValidation(){return L(x(this.phoneElement),!this.hasVisitEntry("phone")||m(/^\(\d{2}\)\s\d{4,5}-\d{4}$/,this.user.phone))},cepValidation(){return L(x(this.cepElement),!this.hasVisitEntry("cep")||m(/^\d{5}-\d{3}$/,this.address.cep))},addressValidation(){return L(x(this.addressElement),!this.hasVisitEntry("address")||h(u(this.address.address))>2)},numberValidation(){return L(x(this.numberValidation),!this.hasVisitEntry("number")||h(u(this.address.number))>0)},neighborhoodValidation(){return L(x(this.neighborhoodElement),!this.hasVisitEntry("neighborhood")||h(u(this.address.neighborhood))>3)},cityValidation(){return L(x(this.cityElement),!this.hasVisitEntry("city")||h(u(this.address.city))>2)},stateValidation(){return L(x(this.stateElement),!this.hasVisitEntry("state")||v.includes(this.address.state))},passwordValidation(){const e=Object.values(function(e){const t=(s=e,e=>e.test(s));var s;return{hasNumber:t(/\d/),hasLowercase:t(/[a-z]/),hasUppercase:t(/[A-Z]/),hasMinLength:t(/.{8,}/),hasSpecialChar:t(/[!@#$%^&*()_+{}\[\]:;<>,.?\/~\\-]/)}}(this.user.password)).every(e=>e);return L(x(this.passwordElement),!this.hasVisitEntry("password")||e)},termsValidation(){return L(x(this.termsElement),!this.isSubmitted||this.acceptTerms)},validatableFields(){return[this.nameValidation,this.lastNameValidation,this.cpfValidation,this.emailValidation,this.birthDateValidation,this.phoneValidation,this.cepValidation,this.addressValidation,this.numberValidation,this.neighborhoodValidation,this.cityValidation,this.stateValidation,this.passwordValidation,this.termsValidation].filter(({ignoreIf:e})=>[!1,void 0].includes(e))},firstInvalidField(){return this.validatableFields.find(({valid:e})=>!e)},getLoadingText(){return this.loadingText??"Enviar"},getAddressErrorMessage(){return this.addressMessageError??r},getResponseType(){const{createResponse:e}=this;return e?"string"==typeof e?"error":"success":r}},watch:{"address.cep"(e,t,s){e!==t&&m(/^\d{5}-\d{3}$/,e)&&(F=new AbortController,s(()=>{this.addressMessageError=r,F?.signal.aborted||F?.abort(),F=r}),this.searchAddress(l(e),F.signal).then(e=>{if(!e.succeeded)return this.addressMessageError=e.message,this.address.address=M,this.address.state=M,this.address.city=M,void(this.address.neighborhood=M);this.address.address=u(e.data.logradouro),this.address.state=u(e.data.uf),this.address.city=u(e.data.localidade),this.address.neighborhood=u(e.data.bairro)}))}},directives:{maskCep:S(l,function(e){return e.replace(/^(\d{0,5})(\d{0,3})/,(e,t,s)=>{const i=[];for(const a of[t,s])V(a,i,a);return i.join("-")})}),maskCpf:S(l,function(e){return e.replace(/^(\d{0,3})(\d{0,3})(\d{0,3})(\d{0,2})/,(e,t,s,i,a)=>{const n=[];return V(t,n,`${t}`),V(s,n,`.${s}`),V(i,n,`.${i}`),V(a,n,`-${a}`),n.join(M)})}),maskDate:S(l,function(e){return e.replace(/^(\d{0,2})(\d{0,2})(\d{0,4})/,(e,t,s,i)=>[t,s,i].filter(Boolean).join("/"))}),maskPhone:S(l,function(e){const t=(e,t,s,i)=>{const a=[];return V(t,a,`(${t}`),V(s,a,`) ${s}`),V(i,a,`-${i}`),a.join(M)};return h(e)<11?e.replace(/^(\d{0,2})(\d{0,4})(\d{0,4})/,t):e.replace(/^(\d{0,2})(\d{0,5})(\d{0,4})/,t)}),trim:{mounted(e){const t=d(e,"blur",t=>{if(!t.isTrusted)return;const s=t.target;s.value=u(s.value),e.dispatchEvent($)});y.set(e,t)},unmounted:w},uppercase:S(function(e){return e.toUpperCase()}),visitedField:{mounted(e,t){const s=d(e,"blur",()=>{t.instance.setVisitedField(t.value),y.delete(e)},{once:!0});y.set(e,s)},unmounted:w},value:{mounted(e,t){c(e,P,u(e.value)),c(e,D,u(t.value))},updated(e,t){c(e,D,u(t.value))},unmounted(e){var t,s;c(e,D,(s=P,((t=e)?t.getAttribute(s):r)??"")),function(e,t){e&&e.removeAttribute(t)}(e,P)}}}}),O="#business-form",G=o(O),U=o(".formblock",G),_=o("#wf-form-register",G);_&&(function(e,...t){e&&e.classList.remove(...t)}(U,"w-form"),U.innerHTML=_.outerHTML),I.mount(O),window.addEventListener("pageshow",e=>{e.persisted&&window.location.reload()})}();