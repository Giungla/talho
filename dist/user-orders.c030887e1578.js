"use strict";(()=>{var V="; ";function y(e){let t=document.cookie.split(V).find(a=>{let{name:c}=B(a);return c===e});return t?B(t).value:!1}function B(e){let[t,a]=e.split("=");return{name:t,value:a}}function P(e,t,a={}){if(e.length===0)throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof t)||t.toString().length===0)throw new Error("'setCookie' should receive a valid cookie value");let c=[`${e}=${t}`];a?.expires&&a?.expires instanceof Date&&c.push("expires="+a.expires.toUTCString()),a.maxAge&&c.push(`maxAge=${a.maxAge}`),a?.sameSite&&typeof a?.sameSite=="string"&&c.push(`SameSite=${a?.sameSite}`),a?.path&&c.push(`path=${a?.path}`),a?.domain&&c.push(`domain=${a?.path}`),a?.httpOnly&&c.push("HttpOnly"),a?.secure&&c.push("Secure");let E=c.join(V);return document.cookie=E,E}var I="__Host-Talho-AuthToken",N="__Host-Talho-Session-Cookie",k="X-Talho-Session";function T(e){let t=this?.get(k);return t&&P(N,t,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+H(90))}),{message:e,succeeded:!1}}function R(e){let t=this?.get(k);return t&&P(N,t,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+H(90))}),{data:e,succeeded:!0}}function _(e=[],t="GET"){let a=new Headers({Accept:"application/json","Content-Type":"application/json"});for(let[L,U]of e)a.set(L,U);let c=y(N);c&&a.set(k,c);let E=y(I);return E&&a.set("Authorization",E),{method:t,headers:a}}function H(e){return 86400*1e3*e}var D=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});var C=null,m="oculto";function J(){return!!y(I)}function s(e,t=document){return t?t.querySelector(e):C}function b(e,t,a,c){if(e)return e.addEventListener(t,a,c),()=>e.removeEventListener(t,a,c)}function F(e,t,a){e&&e.setAttribute(t,a)}function v(e,t){e&&e.removeAttribute(t)}function q(e,...t){e&&e.classList.add(...t)}function S(e,...t){e&&e.classList.remove(...t)}function K(e,t,a){return e?e.classList.toggle(t,a):!1}function l(e,t){e&&(e.textContent=typeof t=="string"?t:t.toString())}function w(e){return JSON.stringify(e)}function Y(e){return e.length}var X="talho_cart_items";var W={AC:"Acre",AL:"Alagoas",AP:"Amap\xE1",AM:"Amazonas",BA:"Bahia",CE:"Cear\xE1",DF:"Distrito Federal",ES:"Esp\xEDrito Santo",GO:"Goi\xE1s",MA:"Maranh\xE3o",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Par\xE1",PB:"Para\xEDba",PR:"Paran\xE1",PE:"Pernambuco",PI:"Piau\xED",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rond\xF4nia",RR:"Roraima",SC:"Santa Catarina",SP:"S\xE3o Paulo",SE:"Sergipe",TO:"Tocantins"},ge=Object.keys(W),Ae=Object.values(W);var G="https://xef5-44zo-gegm.b2.xano.io";(function(){let e="disabled",t="carrinhoflutuante--visible",a=`${G}/api:79PnTkh_`,c=new Set;function E(...r){return Math.max(...r)}if(!J()){location.href="/acessos/entrar";return}let L=new Proxy({list:[]},{get(r,o){let n=Y(r.list);switch(o){case"hasOrders":return n>0;case"ordersCount":return n;default:return r[o]}},set(r,o,n){let i=Reflect.set(r,o,n);if(!i)return i;switch(o){case"list":le();break}return!0}});async function U(){let r="Falha ao buscar os pedidos";try{let o=await fetch(`${G}/api:TJEuMepe/user/orders`,{..._()});if(!o.ok){let i=await o.json();return T.call(o.headers,i?.message??r)}let n=await o.json();return R.call(o.headers,n)}catch{return T(r)}}async function se({comment:r,rating:o,product_id:n}){let i="Falha ao gerar a avalia\xE7\xE3o, tente novamente mais tarde.";try{let u=await fetch(`${G}/api:9ixgU7Er/ratings/${n}/create`,{..._([],"POST"),body:w({rating:o,comment:r})});if(!u.ok){let f=await u.json();return T.call(u.headers,f?.message??i)}let x=await u.json();return R.call(u.headers,x)}catch{return T(i)}}async function ie(r){let o="Falha ao adicionar o produto";try{let n=await fetch(`${a}/cart/handle`,{..._([],"POST"),body:w({item:r,operation:"add"})});if(!n.ok){let u=await n.json();return T.call(n.headers,u?.message??o)}let i=await n.json();return R.call(n.headers,i)}catch{return T(`[CATCH] ${o}`)}}function h(r,...o){r&&r.replaceChildren(...o.filter(Boolean))}function g(r){if(r)return r.remove()}let ue=s("[data-wtf-has-no-orders]"),Z=s("[data-wtf-order-template]"),O=s("[data-wtf-orders-container]"),j=s("[data-wtf-product-item]",O),$=s("[data-wtf-evaluated]"),Q=s("[data-wtf-not-rated]"),ee=s("[data-wtf-evaluation-form]");for(let r of[$,Q,ee,j])g(r);function ce(){return document.createDocumentFragment()}async function de({sku_id:r,slug:o}){if(c.has(o))return;c.add(o);let n=await ie({sku_id:r,quantity:1,reference_id:o});if(!n.succeeded){c.delete(o);return}q(s("#carrinho-flutuante"),t),localStorage.setItem(X,w(n.data)),c.delete(o)}function le(){let{list:r,hasOrders:o}=L;if(!O||!Z||!j)return;K(ue,m,o),K(O,m,!o);let n=ce();for(let i of r){let u=Z.cloneNode(!0);l(s("[data-wtf-order-total]",u),i.total),l(s("[data-wtf-order-status]",u),i.status),l(s("[data-wtf-created-at]",u),i.created_at),l(s("[data-wtf-payment-method]",u),i.payment_method),l(s("[data-wtf-transaction-id]",u),i.transaction_id);let x=s("[data-wtf-product-list]",u);for(let{name:f,slug:p,product_id:M,sku_id:me,quantity:Ee,unit_price:re,image:ye,review:z,has_stock:Te}of i.order_items){let A=j.cloneNode(!0),oe=s("[data-wtf-review-area]",A);F(s("[data-wtf-product-anchor]",A),"href",`/produtos/${p}`);let ne=s("[data-wtf-buy-again-cta]",A);if(Te?b(ne,"click",()=>de({sku_id:me,slug:p})):g(ne),l(s("[data-wtf-product-name]",A),f),l(s("[data-wtf-product-price]",A),D.format(re/100)),l(s("[data-wtf-product-subtotal]",A),D.format(re*Ee/100)),z===void 0){let d=Q?.cloneNode(!0)??C,ae=ee?.cloneNode(!0)??C;S(d,m),i.pago?(b(s("[data-wtf-not-rated-cta]",d),"click",()=>{pe(M,d,ae)},{once:!0}),g(s("[data-wtf-not-rated-unpaid]",d))):(g(s("[data-wtf-not-rated-paid]",d)),g(s("[data-wtf-not-rated-cta]",d))),h(oe,d,ae)}else{let d=$?.cloneNode(!0);l(s("[data-wtf-evaluated-comment]",d),z.comment),te(d,z.rating),S(d,m),h(oe,d)}x.insertAdjacentElement("afterbegin",A)}n.appendChild(u)}h(O,n)}function te(r,o){if(!r)return;let n=s("[data-wtf-evaluated-star-section]",r);if(!n)return;let i=E(n.childElementCount-E(1,o),0);for(let u=0;u++<i;)g(n.lastElementChild)}function pe(r,o,n){if(!o||!n)return;q(o,m),S(n,m);let i=s("form",n),u=i?.parentElement;if(!i||!u)return;let x=["id","name","method","data-name","aria-label","data-wf-page-id","data-wf-element-id","data-turnstile-sitekey"];for(let p of x)v(i,p);g(i),h(u),u.insertAdjacentHTML("afterbegin",i.outerHTML);let f=s("form",n);v(s('[type="submit"]',f),e),b(f,"submit",async p=>{if(p.preventDefault(),p.stopPropagation(),!p.isTrusted||!p.submitter)return;F(p.submitter,e,e);let M=await se({product_id:r,comment:f.comment.value,rating:parseInt(f.rating.value)});if(!M.succeeded){v(p.submitter,e);return}fe(M.data,f)})}function fe(r,o){if(!o)return;let n=o.closest("[data-wtf-review-area]");if(!n)return;let i=$?.cloneNode(!0);i&&(te(i,r.rating),l(s("[data-wtf-evaluated-comment]",i),r.comment),S(i,m),h(n,i))}U().then(r=>{r.succeeded&&(L.list=r.data)})})();})();
