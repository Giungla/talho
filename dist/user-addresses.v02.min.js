(()=>{let H="; ",o="__Host-Talho-AuthToken",d="oculto",i="https://xef5-44zo-gegm.b2.xano.io",O="[data-wtf-wrapper]",_="mensagemdeerro";var e="#wf-form-Address-Form";if(!1===c(o))return location.href="/acessos/entrar?redirect_to="+encodeURIComponent(location.pathname);let Z=["AL","AM","AP","CE","BA","AC","DF","ES","GO","MA","MG","MS","MT","PA","PB","PE","PI","PR","RJ","RN","RO","RR","RS","SC","SE","SP","TO"];function s(e,t=document){return t.querySelector(e)}function u(e,t,a,r){return e.addEventListener(t,a,r),()=>e.removeEventListener(t,a,r)}function c(t){var e=document.cookie.split(H).find(e=>{e=a(e).name;return e===t});return!!e&&a(e).value}function a(e){var[e,t]=e.split("=");return{name:e,value:t}}function l(e,t,a){e.classList.toggle(t,a)}function t(e,t){e.removeAttribute(t)}function f(e){return{message:e,succeeded:!1}}let r=s("[data-wtf-error-message-no-address-registered]"),v=s("[data-wtf-registered-address]"),q=v?.parentElement,w=(v?.remove(),new Proxy([],{set(e,t,r){var a=Reflect.set(e,t,r),t="length"===t&&0===r;if(m(t),!t&&"number"!=typeof r){t=null!==s(`[data-wtf-address-id="${r.id}"]`);if(m(0<p(e)),!t){var n=r;if(v){let a=v.cloneNode(!0);e=s("[data-wtf-address-tag]",a),t=s("[data-wtf-address]",a),r=s("[data-wtf-delete-user-address]",a);if(e&&(e.textContent=n.nick),t&&(t.textContent=n.address),r){let t=null;t=u(r,"click",async function(){var e;(await(async e=>{var t="Houve uma falha ao remover o endereço. Tente novamente mais tarde.";try{var a=await fetch(i+`/api:Yytq8Zut/user_addresses/${e}/delete`,{method:"DELETE",headers:{Authorization:c(o)}});return a.ok?{data:null,succeeded:!0}:f((await a.json())?.message??t)}catch(e){return f(t)}})(n.id)).succeeded&&(t?.(),e=w.findIndex(e=>e.id===n.id),w.splice(e,1),a.remove())},!1)}a.dataset.wtfAddressId=n.id,q.appendChild(a)}}}return a}}));function m(e){r&&l(r,d,!e)}function n(t){return function(e){return[t,e]}}function D(e,t){var a=!t.succeeded,r=s("[data-wtf-error-new]",e);let n=s("[data-wtf-success-new]",e);r&&l(r,d,!a),n&&l(n,d,a),a?(e=r&&s("div",r))&&(e.textContent=t.message):setTimeout(()=>{return n&&(e=n,t=[d],void e.classList.add(...t));var e,t},8e3)}function p(e){return e.length}function h(e,t){e=e.closest(O);e&&l(e,_,!t)}function I(e){var t,a,r,n,o;if(e.succeeded)({cep:e,logradouro:t,localidade:a,complemento:r,bairro:n,uf:o}=e.data),y(P,e),y(j,t),y(L,n),y(R,a),y($,o);else for(var d of[j,k,L,R,$])y(d)}function g(e){Array.isArray(e)?w.push(...e):w.push(e)}function y(e,t=""){e&&(e.value=t)}var A,b=s(e);if(!b)return;for(A of["name","method","data-name","aria-label","data-wf-page-id","data-wf-element-id","data-turnstile-sitekey"])t(b,A);var T,C=s('input[type="submit"]',b);if(C&&t(C,"disabled"),!(C=b.parentElement))return;T=["w-form"],C.classList.remove(...T),b.remove(),C.insertAdjacentHTML("afterbegin",b.outerHTML);let E=s(e);if(!E)return;let N=s("[data-wtf-tag-new]"),P=s("[data-wtf-zipcode-new]"),j=s("[data-wtf-address-new]"),S=s("[data-wtf-number-new]"),k=s("[data-wtf-complement-new]"),L=s("[data-wtf-neighborhood-new]"),R=s("[data-wtf-city-new]"),$=s("[data-wtf-state-new]");function x(){var e,t=n("wtfTagNew");return N?(e=2<p(N.value),h(N,e),t(e)):t(!1)}function M(){var e,t=n("wtfZipcodeNew");return P?(e=/^\d{5}-\d{3}$/.test(P.value),h(P,e),t(e)):t(!1)}function z(){var e,t=n("wtfAddressNew");return j?(e=2<p(j.value),h(j,e),t(e)):t(!1)}function Y(){var e,t=n("wtfNumberNew");return S?(e=0<p(S.value),h(S,e),t(e)):t(!1)}function B(){var e,t=n("wtfNeighborhoodNew");return L?(e=2<p(L.value),h(L,e),t(e)):t(!1)}function F(){var e,t=n("wtfCityNew");return R?(e=2<p(R.value),h(R,e),t(e)):t(!1)}function G(){var e,t=n("wtfStateNew");return $?(e=Z.includes($.value),h($,e),t(e)):t(!1)}for(let{field:e,validator:t}of[{field:N,validator:x},{field:P,validator:M},{field:j,validator:z},{field:S,validator:Y},{field:L,validator:B},{field:R,validator:F},{field:$,validator:G}])e&&(u(e,"blur",t,!1),u(e,"input",function(){h(e,!0)},!1));P&&u(P,"input",function(){var e,t;P&&(t=p(e=P.value.replace(/\D+/g,"")),P.value=5<t?e.replace(/(\d{5})(\d{1,3})/,"$1-$2"):e,p(P.value)<9||(async e=>{var t="O CEP informado não foi encontrado";try{var a=await fetch(i+"/api:jyidAW68/cepaddress/"+e);return a.ok?{data:await a.json(),succeeded:!0}:f((await a.json())?.message??t)}catch(e){return f(t)}})(e).then(I))},!1),u(E,"submit",async function(e){e.preventDefault(),e.stopPropagation();var e=[x,M,z,Y,B,F,G].find(e=>!e().at(1));e?s(`[data-${e().at(0).replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}]`,E)?.focus({preventScroll:!1}):(e=await(async e=>{var t="Houve uma falha ao salvar o endereço. Por favor, tente novamente mais tarde.";try{var a=await fetch(i+"/api:Yytq8Zut/user_addresses/create",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:c(o)},body:JSON.stringify(e)});return a.ok?{succeeded:!0,data:await a.json()}:f((await a.json())?.message??t)}catch(e){return f(t)}})({nick:N?.value,cep:P?.value,address:j?.value,number:S?.value,complement:k?.value,neighborhood:L?.value,city:R?.value,state:$?.value}),D(E,e),e.succeeded&&(E.reset(),g(e.data)))},!1),(async()=>{var t="Houve uma falha ao buscar os seus endereços. Tente novamente mais tarde.";try{var e=await fetch(i+"/api:Yytq8Zut/user_addresses/all",{headers:{Authorization:c(o)}});return e.ok?{succeeded:!0,data:await e.json()}:f((await e.json())?.message??t)}catch(e){return f(t)}})().then(e=>{e.succeeded&&0<p(e.data)&&g(e.data)})})();