!function(){"use strict";var e="user_name",t="phone",i="email",s="shipping_cep",r="billing_cep";function a(e){const t=I(document.cookie,"; ").find(t=>{const{name:i}=n(t);return i===e});return!!t&&n(t).value}function n(e){const[t,i]=I(e,"=",2);return{name:t,value:i}}var o="__Host-Talho-Session-Cookie",d="X-Talho-Session",l={redirect_to:encodeURIComponent(location.pathname+location.search)},h={path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+1e3*m*14)};function c(e){const t=e?.headers.get(d);t&&function(e,t,i={}){if(0===E(e))throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof t)||0===E(t.toString()))throw new Error("'setCookie' should receive a valid cookie value");const s=[`${e}=${t}`];L(i?.expires&&i?.expires instanceof Date,s,"expires="+i.expires.toUTCString()),L(i.maxAge,s,`maxAge=${i.maxAge}`),L(i?.sameSite&&"string"==typeof i?.sameSite,s,`SameSite=${i?.sameSite}`),L(i?.path,s,`path=${i?.path}`),L(i?.domain,s,`domain=${i?.domain}`),L(i?.httpOnly,s,"HttpOnly"),L(i?.secure,s,"Secure");const r=s.join("; ");document.cookie=r}(o,t,h)}function u(e,t=!1,i){return c(this),t||this&&401===this.status&&function(e="/acessos/entrar",t=l){location.href=f(e,t)}(),i?.(),{message:e,succeeded:!1}}function p(e,t){return c(this),t?.(),{data:e,succeeded:!0}}function g(e=[],t="GET"){const i="application/json",s=new Headers({Accept:i,"Content-Type":i});for(const[a,o]of e)s.set(a,o);const r=a(o);r&&s.set(d,r);const n=a("__Host-Talho-AuthToken");return n&&s.set("Authorization",n),{method:t,headers:s}}var m=86400,y=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"}),C=null,v={block:"center",behavior:"smooth"};function P(e,t,i,s){if(e)return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)}function b(e){return i=!e,!!(t=function(e,t=document){return t?t.querySelector(e):C}("[data-wtf-loader]"))&&t.classList.toggle("oculto",i);var t,i}function f(e,t={}){const i=new URL(`${location.protocol}//${location.hostname}`),s=new URL(e,i);for(const[r,a]of Object.entries(t))s.searchParams.set(r,a);return s.toString()}function V(e){return JSON.stringify(e)}function S(e){return e.trim()}function D(e){return e.replace(/\D+/g,"")}function E(e){return e.length}function A(){return/^(([\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+(\.[\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+)*)|("[\p{L}\p{N}\s!#$%&'*+\/=?^_`{|}~.-]+"))@(([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*\.)+[a-zA-Z]{2,63}|(\[(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\]))$/u}function w(){return/^\(\d{2}\)\s\d{4,5}-\d{4}$/}function N(){return/^\d{5}-\d{3}$/}function M(){return/^(\w{2,})(\s+(\w+))+$/}function _(){return/^\d{3}\.\d{3}\.\d{3}-\d{2}$/}function $(){return/^\d{2}\/\d{2}\/\d{4}$/}function F(e,t){return("function"==typeof e?e():e).test(t)}function R(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,J).replace(/[\u200B-\u200D\uFEFF]/g,J).replace(/[\u2060\u034F]/g,J)}function O(e){return e.replace(/\s{2,}/g," ")}function I(e,t,i){return e.split(t,i)}function k(e){return e===C}function H(e,t=0){const i=Math.pow(10,t);return Math.round(e*i)/i}var j="talho_cart_items",B={AC:"Acre",AL:"Alagoas",AP:"Amapá",AM:"Amazonas",BA:"Bahia",CE:"Ceará",DF:"Distrito Federal",ES:"Espírito Santo",GO:"Goiás",MA:"Maranhão",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Pará",PB:"Paraíba",PR:"Paraná",PE:"Pernambuco",PI:"Piauí",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rondônia",RR:"Roraima",SC:"Santa Catarina",SP:"São Paulo",SE:"Sergipe",TO:"Tocantins"},T=Object.keys(B),G="/";function L(e,t,i){return e?t.push(i):-1}function x(e,t){return e.includes(t)}var z=new WeakMap,U=e=>{const t=z.get(e);t&&(t(),z.delete(e))};function X(...e){return{mounted(t,i){const s=i.arg??"input",r=P(t,s,i=>{if(!i.isTrusted)return;const s=i.target;s.value=e.reduce((e,t)=>t(e),s.value??J),t.dispatchEvent(q)});z.set(t,r)},unmounted:U}}var q=new Event("input"),Q=new Event("blur"),Z=[10,11];document.currentScript?.getAttribute("data-parameter-names");var J="",W="https://xef5-44zo-gegm.b2.xano.io",{ref:K,createApp:Y}=Vue,ee="shipping",te="billing",ie=`${W}/api:79PnTkh_`,se=`${W}/api:5lp3Lw8X`,re=`${W}/api:24B7O9Aj`,ae="ERROR_CODE_NOT_FOUND",ne="ERROR_CODE_BAD_REQUEST",oe={[ae]:"O CEP indicado não foi localizado.",[ne]:"Não realizamos entregas na sua região."},de=document.currentScript?.getAttribute("data-public-key"),le="same",he="diff",ce="creditcard";function ue(e,t){return Object.hasOwn(e,t)}function pe(e,t,i){return{field:e,valid:t,...i&&{ignoreIf:i}}}async function ge({cep:e,deliveryMode:t}){const i="Não foi possível encontrar o endereço";if(8!==E(e=D(e)))return u(i);try{const s=await fetch(`${W}/api:jyidAW68/cepaddress/${e}/checkout`,{...g([],"POST"),body:V({deliveryMode:t})});if(!s.ok){const e=await s.json();return u.call(s,e?.code??i)}const r=await s.json();return p.call(s,r)}catch(s){return u(i)}}Y({name:"TalhoCheckoutApp",setup:()=>({customerCPF:K(J),customerMail:K(J),customerPhone:K(J),customerBirthdate:K(J),customerCreditCardCVV:K(J),customerCreditCardDate:K(J),customerCreditCardNumber:K(J),customerCreditCardHolder:K(J),billingCEP:K(J),billingAddress:K(J),billingNumber:K(J),billingComplement:K(J),billingNeighborhood:K(J),billingCity:K(J),billingState:K(J),shippingRecipient:K(J),shippingCEP:K(J),shippingAddress:K(J),shippingNumber:K(J),shippingComplement:K(J),shippingNeighborhood:K(J),shippingCity:K(J),shippingState:K(J),couponCode:K(J),customerMailElement:K(C),customerCPFElement:K(C),customerPhoneElement:K(C),customerBirthdateElement:K(C),paymentMethodMessageElement:K(C),customerCreditCardCVVElement:K(C),customerCreditCardDateElement:K(C),customerCreditCardNumberElement:K(C),customerCreditCardHolderElement:K(C),billingCEPElement:K(C),billingAddressElement:K(C),billingNumberElement:K(C),billingNeighborhoodElement:K(C),billingCityElement:K(C),billingStateElement:K(C),deliveryPlaceMessageElement:K(C),shippingRecipientElement:K(C),shippingCEPElement:K(C),shippingAddressElement:K(C),shippingNumberElement:K(C),shippingNeighborhoodElement:K(C),shippingCityElement:K(C),shippingStateElement:K(C),deliveryDateMessageElement:K(C),deliveryHourMessageElement:K(C),installmentsMessageElement:K(C),couponCodeElement:K(C),deliveryPlaceAddressErrorMessage:K(C),deliveryBillingAddressErrorMessage:K(C),deliveryShippingAddressErrorMessage:K(C)}),data:()=>({user:C,errorMessage:C,hasPendingPayment:!1,isSubmitted:!1,productlist:C,visitedFields:[],selectedPayment:C,availablePayments:[{label:"Cartão de crédito",method:ce},{label:"PIX",method:"pix"}],deliveryPlace:C,deliveryPlaces:[{token:le,label:"Mesmo endereço de cobrança do cartão"},{token:he,label:"Entregar em um endereço diferente"}],installment:C,selectedInstallment:C,isCouponPending:!1,coupon:C,isPagSeguroLoaded:!1,deliveryDate:C,deliveryHour:C,isDeliveryLoading:!1,deliveryPrice:C,deliveryOptions:C,priorityTax:C,subsidy:C,selectedBillingAddressId:C,selectedShippingAddressId:C}),created(){Promise.allSettled([this.getLoggedInUser().then(e=>{e.succeeded&&(this.user=e.data)}),this.refreshCart().then(()=>b(!1))]),window.addEventListener("storage",e=>{e.key===j&&this.refreshCart()})},methods:{setPreviousAddress(e,t){const i=this.user?.address_list.find(t=>t.id===e);if(!i)return;const{id:s,cep:r,address:a,number:n,city:o,complement:d,state:l,neighborhood:h}=i;this[`${t}CEP`]=r,this[`${t}Address`]=a,this[`${t}Number`]=n,this[`${t}Complement`]=d,this[`${t}City`]=o,this[`${t}State`]=l,this[`${t}Neighborhood`]=h,t!==ee?t===te&&(this.selectedBillingAddressId=s):this.selectedShippingAddressId=s},async getLoggedInUser(){const e="Falha na captura do usuário";try{const t=await fetch(`${W}/api:TJEuMepe/user/checkout`,{...g([])});if(!t.ok){const i=await t.json();return u.call(t,i?.message??e,!0)}const i=await t.json();return p.call(t,i)}catch(t){return u(e)}},async getCart(){const e="Falha ao capturar os produtos";try{const t=await fetch(`${ie}/cart/get`,{...g([])});if(!t.ok){const i=await t.json();return u.call(t,i?.message??e)}const i=await t.json();return p.call(t,i)}catch(t){return u(e)}},async refreshCart(){if(!this.hasPendingPayment)return this.getCart().then(e=>{e.succeeded&&(0!==E(e.data.items)?this.productlist=e.data:location.href=f("/",{reason:"empty_cart"}))})},async getInstallments(){const e="Falha ao capturar o parcelamento";try{const t=await fetch(`${se}/calculatefees`,{...g([],"POST"),body:V({amount:this.getOrderPrice,cardBin:this.customerCreditCardNumber.replace(/\D+/g,J).slice(0,8)})});if(!t.ok){const i=await t.json();return u.call(t,i?.message??e)}const i=await t.json();return p.call(t,i)}catch(t){return u(e)}},async refreshInstallments(){if(!this.isCreditCard||!this.isCreditCardGroupValid||this.getCreditCardToken.hasErrors)return;this.installment=C,this.selectedInstallment=C;const e=await this.getInstallments();e.succeeded&&(this.installment=e.data)},setSelectedInstallmentsCount(e){var t;this.selectedInstallment!==e&&(this.selectedInstallment=(t=e,Math.max(1,Math.min(2,t))))},setSelectedPaymentMethod(e){this.selectedPayment!==e&&(this.hasDeliveryDates||this.handleDeliveryOptions(),e!==ce?this.clearCreditCardData():this.isPagSeguroLoaded||this.loadPagSeguro(),this.deliveryPlace=C,this.selectedPayment=e)},setVisitedField(e){return L(!x(this.visitedFields,e),this.visitedFields,e)},hasVisitRegistry(e){return x(this.visitedFields,e)},async handlePayment(e){if(e.preventDefault(),this.hasPendingPayment||this.isDeliveryLoading)return;if(this.triggerValidations(),!this.isSubmitted)return this.isSubmitted=!0,void Vue.nextTick(()=>this.handlePayment(e));const t=this.firstInvalidField;if(t)return i=t.field,s=v,i&&i.scrollIntoView(s),void("INPUT"===t.field.tagName&&setTimeout(()=>t.field.focus(),500));var i,s;this.hasPendingPayment=!b(!0);const r=await this.handlePostPayment(this.selectedPayment);if(!r.succeeded)return this.errorMessage=r.message,void(this.hasPendingPayment=!b(!1));const a={pix:"pix",creditcard:"confirmacao-do-pedido"}[this.selectedPayment];location.href=f(["/pagamento",a].join(G),{order:r.data.transactionid}),localStorage.removeItem(j)},async handlePostPayment(e){const t="Falha ao gerar o pedido";try{const i=await fetch(`${se}/payment/process/${e}`,{...g([],"POST"),body:V({...this.getOrderBaseData,customer:{...this.getParsedCustomer,...this.getParsedAddresses},...e===ce&&this.creditCardAdditionalInfo})});if(!i.ok){const e=await i.json();return u.call(i,e?.message??t)}const s=await i.json();return p.call(i,s)}catch(i){return u(t)}},triggerValidations(){const e=this.notIgnoredFields;for(const{field:t}of e)t?.dispatchEvent(Q)},feedAddress(e,{uf:t,bairro:i,logradouro:s,localidade:r}){if(e===te)return this.billingAddress=s,this.billingNeighborhood=i,this.billingCity=r,void(this.billingState=t);this.shippingAddress=s,this.shippingNeighborhood=i,this.shippingCity=r,this.shippingState=t},setDeliveryPlace(e){this.deliveryPlace!==e&&(e===le&&F(/^\d{5}\-\d{3}$/,this.billingCEP)&&this.isBillingAddressGroupValid?ge({cep:this.billingCEP,deliveryMode:!0}).then(e=>{e.succeeded||(this.deliveryPlaceAddressErrorMessage=oe?.[e.message]??e.message)}):this.deliveryPlaceAddressErrorMessage=C,this.deliveryPlace=e)},async captureAddress(e,t,i){if(!F(/^\d{5}-\d{3}$/,t)||t===i)return!1;const s=`${e}CEP`,r=await ge({cep:t,deliveryMode:e===ee});if(!r.succeeded){const{message:t}=r;return this[s]=J,this.setVisitedField(s),this.deliveryShippingAddressErrorMessage=e===ee&&t!==ae?oe?.[t]??oe[ne]:C,this.deliveryBillingAddressErrorMessage=e===te&&t!==ae?oe?.[t]??oe[ne]:C,!1}switch(e){case ee:this.deliveryShippingAddressErrorMessage=C;break;case te:this.deliveryBillingAddressErrorMessage=C}return this.feedAddress(e,r.data),!0},async captureCoupon(){const e="Falha ao capturar o cupom indicado";try{const t=await fetch(`${se}/get_coupon`,{...g([],"POST"),body:V({verify_amount:!0,coupon_code:this.couponCode,cpf:S(this.customerCPF),has_subsidy:this.subsidy?.has??!1,delivery_cep:this.getParsedAddresses.shippingaddress.zipPostalCode,has_selected_delivery:!k(this.deliveryHour)&&!k(this.deliveryDate)})});if(!t.ok){const i=await t.json();return u.call(t,i?.message??e)}const i=await t.json();return p.call(t,i)}catch(t){return u(e)}},async handleSearchCoupon(){if(this.isCouponPending)return;this.isCouponPending=!0;const e=await this.captureCoupon();this.isCouponPending=!1,e.succeeded?this.coupon=e.data:this.coupon={error:!0,message:e.message}},handleRemoveCoupon(){this.coupon=C,this.couponCode=J},loadPagSeguro(){const e=document.createElement("script");e.async=!0,e.src="https://assets.pagseguro.com.br/checkout-sdk-js/rc/dist/browser/pagseguro.min.js",e.onload=()=>{this.isPagSeguroLoaded=!0},document.head.appendChild(e)},clearCreditCardData(){this.customerCreditCardHolder=J,this.customerCreditCardNumber=J,this.customerCreditCardDate=J,this.customerCreditCardCVV=J},async handleDeliveryOptions(){const e=await this.captureDeliveryOptions();e.succeeded&&(this.deliveryOptions=e.data)},async captureDeliveryOptions(){const e="Falha ao capturar as opções de entrega";try{const t=await fetch(`${re}/delivery`,{...g([])});if(!t.ok){const i=await t.json();return u.call(t,i?.message??e)}const i=await t.json();return p.call(t,i)}catch(t){return u(e)}},setDeliveryDate(e){const t=this.deliveryOptions?.dates?.find(({shift_days:t})=>t===e);t&&this.deliveryDate!==e&&(this.deliveryDate=t.shift_days,this.deliveryHour=C,this.deliveryPrice=C)},setDeliveryHour(e){this.deliveryHour!==e&&0!==this.getSelectedDateDetails?.periods.periods_count&&(this.deliveryHour=e)},async handleDeliveryQuotation(e){this.isDeliveryLoading=!0;const t=await this.captureDeliveryQuotation(e);if(!t.succeeded)return;const{total:i,validator:s}=t.data;this.deliveryPrice={value:i,validator:s},this.isDeliveryLoading=!1},async captureDeliveryQuotation(e){const t="Falha ao gerar uma cotação";try{const i=await fetch(`${W}/api:i6etHc7G/site/checkout-delivery`,{...g([],"POST"),signal:e.signal,body:V(this.quotationPayload)});if(!i.ok){const e=await i.json();return u.call(i,e?.message??t)}const s=await i.json();return p.call(i,s)}catch(i){return u(t)}},async handleSubsidy(){const e=this.getParsedAddresses.shippingaddress.zipPostalCode;if(!F(/^\d{5}\-\d{3}$/,e))return;const t=await this.verifyForSubsidy(D(e));this.subsidy=t.succeeded?t.data:C},async verifyForSubsidy(e){const t="Houve uma falha na verificação";try{const i=await fetch(`${re}/delivery/${e}/subsidy`,{...g([])});if(!i.ok){const e=await i.json();return u.call(i,e?.message??t)}const s=await i.json();return p.call(i,s)}catch(i){return u(t)}},async createAbandonmentCart(e){const t="Houve uma ao gerar o carrinho";try{const i=await fetch(`${W}/api:EuHZTAGr/abandonment/post`,{...g([],"POST"),keepalive:!0,priority:"high",body:V(e)});if(!i.ok){const e=await i.json();return u.call(i,e?.message??t)}const s=await i.json();return p.call(i,s)}catch(i){return u(t)}}},computed:{hasSelectedPaymentMethod(){return!k(this.selectedPayment)},isCreditCard(){return this.selectedPayment===ce},getOrderSubtotal(){return this.productlist?.order_price??0},getOrderSubtotalFormatted(){return y.format(this.getOrderSubtotal)},getOrderPrice(){const e=[this.getOrderSubtotal,this.getShippingPrice,this.priorityFee,this.subsidyDiscountPrice,this.getCouponDiscountPrice];return L(this.hasPIXDiscount,e,this.PIXDiscountPrice),H(e.reduce((e,t)=>e+t,0),2)},getOrderPriceFormatted(){return y.format(this.getOrderPrice)},getShippingPrice(){return this.hasFreeShippingByCartPrice||k(this.deliveryPrice)?0:this.deliveryPrice.value/100},getShippingPriceFormatted(){return this.hasFreeShippingByCartPrice?"Frete grátis":y.format(this.getShippingPrice)},getCouponDiscountPrice(){if(this.hasNullCoupon||this.hasInvalidCoupon)return 0;const{value:e,is_percentage:t}=this.coupon,i=this.getParsedPriceForApplyDiscount;let s=t?Math.min(e/100,1)*(-1*i):-1*Math.min(i,e);return Math.round(100*Math.abs(s))/100*Math.sign(s)},getCouponDiscountPriceFormatted(){return y.format(this.getCouponDiscountPrice)},getParsedPriceForApplyDiscount(){if(this.hasNullCoupon||this.hasInvalidCoupon)return 0;const{cupom_type:e}=this.coupon,{getShippingPrice:t}=this;return e===ee&&this.hasSubsidy?Math.max(t+this.subsidyDiscountPrice,0):{product_id:0,shipping:t,subtotal:this.getOrderSubtotal}[e]},getParsedProducts(){const e=this.productlist?.items;return e?e.map(({name:e,imageUrl:t,quantity:i,price:s})=>({name:e,image:t,quantity:i,price:y.format(s),finalPrice:y.format(s*i),imageStyle:`background-image: url('${t}')`})):[]},isPersonalDataValid(){return!this.isSubmitted||[this.customerMailValidation.valid,this.customerBirthdateValidation.valid,this.customerCPFValidation.valid,this.customerPhoneValidation.valid].every(Boolean)},customerMailValidation(){return pe(this.customerMailElement,!this.hasVisitRegistry("customerMail")||F(A,this.customerMail))},customerBirthdateValidation(){const{customerBirthdate:e}=this;return pe(this.customerBirthdateElement,!this.hasVisitRegistry("customerBirthdate")||F($,e)&&function(e){const[t,i,s]=I(e,G);return"Invalid Date"!==new Date(`${s}-${i}-${t}T00:00:00`).toString()}(e))},customerCPFValidation(){const{customerCPF:e}=this;return pe(this.customerCPFElement,!this.hasVisitRegistry("customerCPF")||F(_,this.customerCPF)&&function(e){if(11!==E(e=D(e))||F(/^(\d)\1{10}$/,e))return!1;const t=Z.map((t,i)=>{const s=i?10:9,r=11-[...e.slice(0,s)].map(Number).reduce((e,i,s)=>e+i*(t-s),0)%11;return r>9?0:r});return e.endsWith(t.join(J))}(e))},customerPhoneValidation(){return pe(this.customerPhoneElement,!this.hasVisitRegistry("customerPhone")||F(w,this.customerPhone))},paymentMethodValidation(){return pe(this.paymentMethodMessageElement,!k(this.selectedPayment))},customerCreditCardHolderValidation(){return pe(this.customerCreditCardHolderElement,!this.hasVisitRegistry("customerCreditCardHolder")||F(M,O(R(S(this.customerCreditCardHolder)))),!this.isCreditCard)},customerCreditCardNumberValidation(){return pe(this.customerCreditCardNumberElement,!this.hasVisitRegistry("customerCreditCardNumber")||F(/^(\d{4})(\s\d{4}){2}(\s\d{3,4})$/,S(this.customerCreditCardNumber)),!this.isCreditCard)},customerCreditCardDateValidation(){const{customerCreditCardDate:e}=this;return pe(this.customerCreditCardDateElement,!this.hasVisitRegistry("customerCreditCardDate")||F(/^(1[012]|0[1-9])\/\d{2}$/,e)&&function(e){const t=I(e,G);if(2!==E(t))return!1;const[i,s]=t,r=parseInt(i,10),a=parseInt(s,10);if(isNaN(r)||isNaN(a)||r<1||r>12)return!1;const n=new Date;return new Date(2e3+(a<100?a:0),r,0,23,59,59)>n}(e),!this.isCreditCard)},customerCreditCardCVVValidation(){return pe(this.customerCreditCardCVVElement,!this.hasVisitRegistry("customerCreditCardCVV")||F(/^\d{3,4}$/,this.customerCreditCardCVV),!this.isCreditCard)},isCreditCardGroupValid(){return[this.customerCreditCardHolderValidation.valid,this.customerCreditCardNumberValidation.valid,this.customerCreditCardDateValidation.valid,this.customerCreditCardCVVValidation.valid].every(Boolean)},billingCEPValidation(){return pe(this.billingCEPElement,!this.hasVisitRegistry("billingCEP")||F(N,this.billingCEP),!this.isCreditCard)},billingAddressValidation(){return pe(this.billingAddressElement,!this.hasVisitRegistry("billingAddress")||E(S(this.billingAddress))>2,!this.isCreditCard)},billingNumberValidation(){return pe(this.billingNumberElement,!this.hasVisitRegistry("billingNumber")||E(this.billingNumber)>0,!this.isCreditCard)},billingNeighborhoodValidation(){return pe(this.billingNeighborhoodElement,!this.hasVisitRegistry("billingNeighborhood")||E(this.billingNeighborhood)>0,!this.isCreditCard)},billingCityValidation(){return pe(this.billingCityElement,!this.hasVisitRegistry("billingCity")||E(this.billingCity)>2,!this.isCreditCard)},billingStateValidation(){return pe(this.billingStateElement,!this.hasVisitRegistry("billingState")||x(T,this.billingState),!this.isCreditCard)},isBillingAddressGroupValid(){return k(this.deliveryBillingAddressErrorMessage)&&[this.billingCEPValidation,this.billingAddressValidation,this.billingNumberValidation,this.billingNeighborhoodValidation,this.billingCityValidation,this.billingStateValidation].every(e=>e.valid)},deliveryPlaceValidation(){return pe(this.deliveryPlaceMessageElement,this.hasSelectedAddress&&k(this.deliveryPlaceAddressErrorMessage),!this.isCreditCard)},shippingRecipientValidation(){return pe(this.shippingRecipientElement,!this.hasVisitRegistry("shippingRecipient")||F(/^(\w{2,})(\s+(\w+))+$/,O(R(S(this.shippingRecipient)))),!this.shouldValidateShippingAddress)},shippingCEPValidation(){return pe(this.shippingCEPElement,!this.hasVisitRegistry("shippingCEP")||F(N,this.shippingCEP),!this.shouldValidateShippingAddress)},shippingAddressValidation(){return pe(this.shippingAddressElement,!this.hasVisitRegistry("shippingAddress")||E(S(this.shippingAddress))>2,!this.shouldValidateShippingAddress)},shippingNumberValidation(){return pe(this.shippingNumberElement,!this.hasVisitRegistry("shippingNumber")||E(S(this.shippingNumber))>0,!this.shouldValidateShippingAddress)},shippingNeighborhoodValidation(){return pe(this.shippingNeighborhoodElement,!this.hasVisitRegistry("shippingNeighborhood")||E(S(this.shippingNeighborhood))>3,!this.shouldValidateShippingAddress)},shippingCityValidation(){return pe(this.shippingCityElement,!this.hasVisitRegistry("shippingCity")||E(S(this.shippingCity))>2,!this.shouldValidateShippingAddress)},shippingStateValidation(){return pe(this.shippingStateElement,!this.hasVisitRegistry("shippingState")||x(T,this.shippingState),!this.shouldValidateShippingAddress)},isShippingAddressGroupValid(){return k(this.deliveryShippingAddressErrorMessage)&&[this.shippingCEPValidation,this.shippingAddressValidation,this.shippingNumberValidation,this.shippingNeighborhoodValidation,this.shippingCityValidation,this.shippingStateValidation].every(e=>e.valid)},deliveryDatesGroupValidation(){return pe(this.deliveryDateMessageElement,!k(this.deliveryDate),!this.paymentMethodValidation.valid)},deliveryHoursGroupValidation(){return pe(this.deliveryHourMessageElement,!k(this.deliveryHour),!this.deliveryDatesGroupValidation.valid)},installmentGroupValidation(){return pe(this.installmentsMessageElement,!k(this.selectedInstallment),!this.isCreditCard||!this.paymentMethodValidation.valid)},notIgnoredFields(){return[this.customerMailValidation,this.customerBirthdateValidation,this.customerCPFValidation,this.customerPhoneValidation,this.paymentMethodValidation,this.customerCreditCardHolderValidation,this.customerCreditCardNumberValidation,this.customerCreditCardDateValidation,this.customerCreditCardCVVValidation,this.billingCEPValidation,this.billingAddressValidation,this.billingNumberValidation,this.billingNeighborhoodValidation,this.billingCityValidation,this.billingStateValidation,this.deliveryPlaceValidation,this.shippingRecipientValidation,this.shippingCEPValidation,this.shippingAddressValidation,this.shippingNumberValidation,this.shippingNeighborhoodValidation,this.shippingCityValidation,this.shippingStateValidation,this.deliveryDatesGroupValidation,this.deliveryHoursGroupValidation,this.installmentGroupValidation].filter(({ignoreIf:e})=>x([!1,void 0],e))},firstInvalidField(){return this.notIgnoredFields.find(({valid:e})=>!e)??C},hasSelectedAddress(){return!k(this.deliveryPlace)},isSameAddress(){return this.deliveryPlace===le},isDiffAddress(){return this.deliveryPlace===he},shouldValidateShippingAddress(){return!this.isCreditCard||this.showShippingAddressSelector&&!this.isSameAddress},showShippingAddressSelector(){return!this.isCreditCard||this.isCreditCard&&this.hasSelectedAddress},getParsedAddresses(){const e=e=>B?.[e]??J,t=e=>S(e).replace(/-+/g,J)||"N/A",i={zipPostalCode:this.shippingCEP,street:this.shippingAddress,number:this.shippingNumber,complement:t(this.shippingComplement),neighbourhood:this.shippingNeighborhood,city:this.shippingCity,state:e(this.shippingState)},s={zipPostalCode:this.billingCEP,street:this.billingAddress,number:this.billingNumber,complement:t(this.billingComplement),neighbourhood:this.billingNeighborhood,city:this.billingCity,state:e(this.billingState)};return this.isCreditCard?{billingaddress:s,shippingaddress:this.isSameAddress?s:i}:{shippingaddress:i,billingaddress:i}},getParsedCustomer(){return{name:this.isCreditCard?this.customerCreditCardHolder:this.shippingRecipient,cpf:this.customerCPF,email:this.customerMail,birthDate:this.customerBirthdate,phone:this.customerPhone}},getParsedDeliveryData(){const{getSelectedHourDetails:e,getSelectedDateDetails:t}=this;return{delivery_hour:{value:this.deliveryHour,validator:e?.validator,has_priority:e?.has_priority},delivery_date:{value:this.deliveryDate,validator:t?.validator,has_priority:t?.has_priority}}},getOrderBaseData(){return{user_id:C,coupon_code:this.hasInvalidCoupon||this.hasNullCoupon?C:this.coupon?.code,delivery:{...this.getParsedDeliveryData,delivery_price:this.deliveryPrice}}},showInstallmentSection(){return this.isCreditCard&&E(this.installment??[])>0},getParsedInstallments(){const{installment:e}=this;return e?e.map(({installments:e,installment_value:t})=>({installments:e,installment_value:y.format(t)})):[]},hasNullCoupon(){return k(this.coupon)},hasAppliedCoupon(){return ue(this.coupon??{},"cupom_type")},hasInvalidCoupon(){return ue(this.coupon??{},"error")},isCouponCodeValid(){const{couponCode:e}=this;return E(S(e))>4&&!F(/[^A-Z\d]/,e)},getCreditCardToken(){if(!this.isPagSeguroLoaded)return{errors:[],hasErrors:!1,encryptedCard:C};const[e,t]=I(this.customerCreditCardDate,G);return window.PagSeguro.encryptCard({expMonth:e,expYear:"20".concat(t),holder:this.customerCreditCardHolder,securityCode:this.customerCreditCardCVV,number:D(this.customerCreditCardNumber),publicKey:de})},hasDeliveryDates(){const{deliveryOptions:e}=this;return t=e?.dates,Array.isArray(t)&&E(e?.dates)>0;var t},hasDeliveryHour(){return!k(this.deliveryDate)&&E(this.getParsedDeliveryHours)>0},getParsedDeliveryHours(){return!this.hasDeliveryDates||k(this.getSelectedDateDetails)?[]:this.getSelectedDateDetails.periods.hours.map(({label:e,hour:t})=>({hour:t,label:e}))},quotationPayload(){if([this.deliveryDate,this.deliveryHour].some(e=>k(e)))return!1;const e=this.getParsedAddresses.shippingaddress.zipPostalCode;if(!F(/^\d{5}\-\d{3}$/,e))return!1;const{delivery_hour:t,delivery_date:i}=this.getParsedDeliveryData;return{cep:e,delivery_hour:t,delivery_date:i}},getParsedDeliveryDates(){if(k(this.deliveryOptions))return[];const e=this.deliveryDate;return this.deliveryOptions.dates.map(({label:t,shift_days:i})=>({label:t,shift_days:i,selected:e===i}))},getSelectedDateDetails(){if(!this.deliveryDate===C)return C;const e=this.deliveryOptions?.dates.find(({shift_days:e})=>e===this.deliveryDate);return e||C},getSelectedHourDetails(){return this.getSelectedDateDetails&&this.deliveryHour?this.getSelectedDateDetails.periods.hours.find(({hour:e})=>e===this.deliveryHour)??C:C},hasPriorityFee(){return!!(this.hasDeliveryHour&&this.getSelectedDateDetails&&this.getSelectedHourDetails)&&this.getSelectedDateDetails.has_priority&&this.getSelectedHourDetails.has_priority},priorityFee(){return this.hasPriorityFee?this.deliveryOptions?.priority_fee:0},priorityFeeFormatted(){return y.format(this.priorityFee)},hasSubsidy(){return!0===this.subsidy?.has&&this.getShippingPrice>0},subsidyDiscountPrice(){return!0===this.subsidy?.has?-1*Math.min(this.subsidy.value,this.getShippingPrice):0},subsidyDiscountPriceFormatted(){return y.format(this.subsidyDiscountPrice)},hasFreeShippingByCartPrice(){return this.getOrderSubtotal>=400},creditCardAdditionalInfo(){const{installment:e,isSameAddress:t,getCreditCardToken:i,selectedInstallment:s,customerCreditCardHolder:r}=this;return{is_same_address:t,credit_card_info:{holderName:r,creditCardToken:i.encryptedCard??J,numberOfPayments:s,installmentValue:e?.find(({installments:e})=>e===s)?.installment_value??0}}},hasPIXDiscount(){return"pix"===this.selectedPayment&&(this.deliveryOptions?.pix_discount??0)>0},PIXDiscountPrice(){return this.hasPIXDiscount?H((this.deliveryOptions?.pix_discount??0)/100*-this.getOrderSubtotal,2):0},PIXDiscountPriceFormatted(){return y.format(this.PIXDiscountPrice)},userAddresses(){const e=this.user;return e&&0!==E(e.address_list)?e.address_list.map(({address:e,number:t,cep:i,...s})=>({...s,address:e,number:t,cep:i,complete:`${e}, ${t} ${i}`})):[]}},watch:{billingCEP(e,t){this.captureAddress(te,e,t).then(e=>{e&&(this.deliveryPlaceAddressErrorMessage=C,this.deliveryPlace===le&&(this.deliveryPlace=C))})},shippingCEP(e,t){this.deliveryDate=C,this.deliveryHour=C,this.captureAddress(ee,e,t)},getOrderPrice:{immediate:!0,handler:function(){this.refreshInstallments()}},getCreditCardToken(e){e.hasErrors||this.refreshInstallments()},quotationPayload(e,t,i){if(!e)return;const{cep:s,delivery_hour:r,delivery_date:a}=e;if(!F(/^\d{5}\-\d{3}$/,s))return;const n=new AbortController;if(!t)return this.handleDeliveryQuotation(n),i(()=>n.abort());const{cep:o,delivery_date:d,delivery_hour:l}=t;return this.handleDeliveryQuotation(n),i(()=>n.abort())},getParsedAddresses(e,t){e&&t&&e.shippingaddress.zipPostalCode!==t.shippingaddress.zipPostalCode&&F(/^\d{5}\-\d{3}$/,e.shippingaddress.zipPostalCode)&&(this.isCreditCard&&k(this.deliveryPlace)||this.handleSubsidy())},user(e){e&&(this.customerPhone=e.telephone??"",this.customerCPF=e.cpf??"",this.customerBirthdate=e.birthday?.split("-").reverse().join("/")??"",this.customerMail=e.email??"")}},directives:{trim:X(S),removeDuplicatedSpaces:X(O),maskDate:X(D,function(e){return e.replace(/^(\d{0,2})(\d{0,2})(\d{0,4})/,(e,t,i,s)=>[t,i,s].filter(Boolean).join(G))}),maskCpf:X(D,function(e){return e.replace(/^(\d{0,3})(\d{0,3})(\d{0,3})(\d{0,2})/,(e,t,i,s,r)=>{const a=[];return L(t,a,`${t}`),L(i,a,`.${i}`),L(s,a,`.${s}`),L(r,a,`-${r}`),a.join(J)})}),maskPhone:X(D,function(e){const t=(e,t,i,s)=>{const r=[];return L(t,r,`(${t}`),L(i,r,`) ${i}`),L(s,r,`-${s}`),r.join(J)};return E(e)<11?e.replace(/^(\d{0,2})(\d{0,4})(\d{0,4})/,t):e.replace(/^(\d{0,2})(\d{0,5})(\d{0,4})/,t)}),maskCreditCard:X(D,function(e){return e.replace(/^(\d{0,4})(\d{0,4})(\d{0,4})(\d{0,4})/,(e,t,i,s,r)=>{const a=[];for(const n of[t,i,s,r])L(n,a,n);return a.join(" ")})}),maskCreditCardDate:X(D,function(e){return e.replace(/^(\d{0,2})(\d{0,2})/,(e,t,i)=>{const s=[];for(const r of[t,i])L(r,s,r);return s.join(G)})}),maskNumberOnly:X(D),maskCep:X(D,function(e){return e.replace(/^(\d{0,5})(\d{0,3})/,(e,t,i)=>{const s=[];for(const r of[t,i])L(r,s,r);return s.join("-")})}),upperCase:X(function(e){return e.toUpperCase()}),normalize:X(R),visitedField:{mounted(e,{value:t,instance:i}){const s=P(e,"blur",()=>{i.setVisitedField(t),z.delete(e)},{once:!0});z.set(e,s)},unmounted:U},captureAbandonment:{mounted(a,n){z.set(a,P(a,"change",o=>{if(!o.isTrusted||!n.arg)return;const d=n.arg,l={[i]:A,[t]:w,[e]:M,[s]:N,[r]:N},h=S(a.value),c=l?.[d]??null,u=d===i?O(R(h)):h;c&&F(c,u)&&n.instance.createAbandonmentCart({field:d,value:h})}))},unmounted:U}}}).mount("#fechamentodopedido"),window.addEventListener("pageshow",e=>{e.persisted&&window.location.reload()})}();