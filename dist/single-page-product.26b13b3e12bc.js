"use strict";(()=>{var O="; ";function A(t){let o=document.cookie.split(O).find(e=>{let{name:r}=N(e);return r===t});return o?N(o).value:!1}function N(t){let[o,e]=t.split("=");return{name:o,value:e}}function v(t,o,e={}){if(t.length===0)throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof o)||o.toString().length===0)throw new Error("'setCookie' should receive a valid cookie value");let r=[`${t}=${o}`];e?.expires&&e?.expires instanceof Date&&r.push("expires="+e.expires.toUTCString()),e.maxAge&&r.push(`maxAge=${e.maxAge}`),e?.sameSite&&typeof e?.sameSite=="string"&&r.push(`SameSite=${e?.sameSite}`),e?.path&&r.push(`path=${e?.path}`),e?.domain&&r.push(`domain=${e?.path}`),e?.httpOnly&&r.push("HttpOnly"),e?.secure&&r.push("Secure");let n=r.join(O);return document.cookie=n,n}var D="__Host-Talho-AuthToken",x="__Host-Talho-Session-Cookie",C="X-Talho-Session";function f(t){let o=this?.get(C);return o&&v(x,o,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+b(90))}),{message:t,succeeded:!1}}function T(t){let o=this?.get(C);return o&&v(x,o,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+b(90))}),{data:t,succeeded:!0}}function _(t=[],o="GET"){let e=new Headers({Accept:"application/json","Content-Type":"application/json"});for(let[i,u]of t)e.set(i,u);let r=A(x);r&&e.set(C,r);let n=A(D);return n&&e.set("Authorization",n),{method:o,headers:e}}function b(t){return 86400*1e3*t}var g=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});var S=null,c="oculto";function a(t,o=document){return o?o.querySelector(t):S}function d(t,o,e,r){if(t)return t.addEventListener(o,e,r),()=>t.removeEventListener(o,e,r)}function H(t,o){t&&t.removeAttribute(o)}function m(t,...o){t&&t.classList.add(...o)}function E(t,...o){t&&t.classList.remove(...o)}function l(t,o,e){return t?t.classList.toggle(o,e):!1}function p(t,o){t&&(t.textContent=typeof o=="string"?o:o.toString())}function y(t){return JSON.stringify(t)}function P(t){return t.length}function L(t){return t===S}function w(t,o,e){return Math.max(t,Math.min(o,e))}var V="talho_cart_items";var q={AC:"Acre",AL:"Alagoas",AP:"Amap\xE1",AM:"Amazonas",BA:"Bahia",CE:"Cear\xE1",DF:"Distrito Federal",ES:"Esp\xEDrito Santo",GO:"Goi\xE1s",MA:"Maranh\xE3o",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Par\xE1",PB:"Para\xEDba",PR:"Paran\xE1",PE:"Pernambuco",PI:"Piau\xED",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rond\xF4nia",RR:"Roraima",SC:"Santa Catarina",SP:"S\xE3o Paulo",SE:"Sergipe",TO:"Tocantins"},nt=Object.keys(q),at=Object.values(q);var st="selecionado",it="carrinhoflutuante--visible",Z="https://xef5-44zo-gegm.b2.xano.io",tt=`${Z}/api:79PnTkh_`,h="click",ct=1,ut=10,U="POST",F="{count}",Q=[`Temos apenas ${F} unidade dispon\xEDvel.`,`Temos apenas ${F} unidades dispon\xEDveis.`],lt={quantity:1,stockCount:0,product:S,selectedVariation:S},I=location.pathname.split("/"),s=new Proxy(lt,{get(t,o){switch(o){case"variationsCount":return P(t.product?.variations??[]);case"hasPriceDifference":{let{price:e,full_price:r}=s.prices;return e!==r}case"prices":{let{product:e,selectedVariation:r}=t;if(!e||!s.hasSelectedVariation)return k();let n=e.variations.find(i=>i.id===r);return n?k(n.price,n.full_price):k()}case"BRLPrices":{let{price:e,full_price:r}=s.prices;return k(g.format(e),g.format(r))}case"computedFinalPrices":{let{quantity:e,prices:r}=s,n=r.price*e,i=r.full_price*e;return{price:{price:n,full_price:i},currency:{price:g.format(n),full_price:g.format(i)}}}case"hasSelectedVariation":return!L(t.selectedVariation);default:return Reflect.get(t,o)}},set(t,o,e){let r=Reflect.set(t,o,e);switch(o){case"quantity":p(mt,String(e??1)),Tt();break;case"selectedVariation":At(),Reflect.set(s,"quantity",1);break;case"stockCount":_t(),K(0);break;case"product":{let n=e;Reflect.set(s,"stockCount",n?.stock_quantity??0),Reflect.set(s,"selectedVariation",n?.variations[0].id??S)}}return r}}),$=a("[data-wtf-error-message-sku-maximum]"),dt=a("[data-wtf-error-message-invetory]"),pt=a("[data-wtf-quantity-minus]"),ft=a("[data-wtf-quantity-plus]"),mt=a("[data-wtf-quantity-value]"),j=a("[data-wtf-price]"),z=a("[data-wtf-full-price]"),gt=a("[data-wtf-total]"),Y=a("[data-wtf-sku-list]"),St=a("[data-wtf-sku-item]"),G=a("[data-wtf-shipping-button]"),R=a("[data-wtf-shipping-form]"),M=a("[data-wtf-shipping-value]"),et=a("[data-wtf-comprar]"),J=a("[data-wtf-error-message-shipping]");function ot(t,o,e){return t.replace(o,e)}function k(t=0,o=0){return{price:t,full_price:o}}async function Et(t){let o="Houve uma falha ao capturar o produto";try{let e=await fetch(`${tt}/product/single-product-page`,{..._([],U),body:y({quantity:1,reference_id:t})});if(!e.ok){let n=await e.json();return f.call(e.headers,n?.message??o)}let r=await e.json();return T.call(e.headers,r)}catch{return f(o)}}function K(t){let o=t+s.quantity,e=Math.min(s.stockCount,ut),r=w(ct,e,o);r!==s.quantity&&(s.quantity=r)}function yt(t){s.product?.variations.some(({id:e})=>e===t)&&(s.selectedVariation=t)}async function Pt(t){t.preventDefault();let{quantity:o,product:e,selectedVariation:r}=s;if(!r||!e||s.stockCount===0)return;let n=await ht({quantity:o,sku_id:r,reference_id:e.slug});if(!n.succeeded)return alert("A adi\xE7\xE3o falhou");s.quantity=1,m(a("#carrinho-flutuante"),it),localStorage.setItem(V,y(n.data))}async function ht(t){let o="Falha ao adicionar o produto";try{let e=await fetch(`${tt}/cart/handle`,{..._([],U),body:y({item:t,operation:"add"})});if(!e.ok){let n=await e.json();return f.call(e.headers,n?.message??o)}let r=await e.json();return T.call(e.headers,r)}catch{return f(`[CATCH] ${o}`)}}function At(){if(!Y||!St||!s.product)return;let{selectedVariation:t,product:o}=s,e=document.createDocumentFragment(),r=a("[data-wtf-weight-selector]"),n=s.variationsCount<2;if(n)return r?.remove();l(r,c,n);for(let i of o?.variations){let u=document.createElement("div"),B=t===i.id;m(u,"text-block"),l(u,st,B),p(u,ot(i.label,/\./g,",")),B||d(u,h,()=>yt(i.id)),e.appendChild(u)}Y.replaceChildren(e)}function Tt(){if(!s.product||!s.hasSelectedVariation)return;let o=i=>a("[data-wtf-price-value]",i),{BRLPrices:e,hasPriceDifference:r,computedFinalPrices:n}=s;p(o(j),e.price),p(o(z),e.full_price),p(o(gt),n.currency.price),l(j,c,!r),l(z,c,!r)}function _t(){let{stockCount:t}=s,o=t<1;if(l(a("[data-wtf-shipping]"),c,o),l(a("[data-wtf-quantity-selector]"),c,o),l(et,c,o),l(dt,c,t>0),l($,c,t>10||o))return;let r=P(Q)-1;p(a("div",$),ot(Q[w(0,r,t-1)],F,t.toString()))}function X(t){return t.replace(/^(\d{0,5})(\d{0,3})/,(o,e,r)=>{let n=[];for(let i of[e,r])i&&n.push(i);return n.join("-")})}function W(){let t=a("form",R);if(!t)return;let o=["name","method","data-name","aria-label","data-wf-page-id","data-wf-element-id","data-turnstile-sitekey"];for(let n of o)H(t,n);E(R,"w-form");let e=t.parentElement;e.innerHTML=t.outerHTML;let r=a("#shipping-cep-form");r&&(d(r,"input",n=>{n.stopPropagation();let i=n.target,u=i.value.replace(/\D+/g,"");i.name!=="cep"||i.value===X(u)||!n.isTrusted||(i.value=X(u),i.dispatchEvent(new Event("input")))}),d(r,"submit",async n=>{n.preventDefault();let i=r.cep.value,u=await vt({cep:i,reference_id:I[P(I)-1]});if(l(J,c,u.succeeded),!u.succeeded){p(a("div",J),u.message);return}switch(u.data.type){case"quotation":return rt(u.data.data);case"locationlist":return Rt(u.data.data)}}))}function rt(t){m(G,c),m(R,c),E(M,c);let o=Math.max(t.total/100-(t.has_subsidy?t.subsidy_value:0),0);p(a("[data-wtf-quotation-price]",M),o===0?"Frete gr\xE1tis":g.format(o)),d(a("[data-wtf-quotation-reload]",M),h,e=>{E(R,c),m(M,c)},{once:!0})}function Rt(t){console.log(t.length," localiza\xE7\xF5es recebidas")}async function vt(t){let o="Houve uma falha ao gerar a cota\xE7\xE3o";try{let e=await fetch(`${Z}/api:i6etHc7G/site/product-delivery`,{..._([],U),body:y(t)});if(!e.ok){let n=await e.json();return f.call(e.headers,n?.message??o)}let r=await e.json();return T.call(e.headers,r)}catch{return f(o)}}Et(I[P(I)-1]).then(t=>{if(!t.succeeded)return;s.product=t.data.product;let o=t.data.delivery;L(o)||(W(),rt(o))}).then(()=>{d(ft,h,()=>K(1)),d(pt,h,()=>K(-1)),d(et,h,Pt),d(G,h,t=>{t.preventDefault(),m(G,c),E(R,c),W()},{once:!0})});})();
