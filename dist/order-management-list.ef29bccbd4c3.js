!function(){"use strict";var e="__Host-Talho-Session-Cookie",t="X-Talho-Session";function o(o){const n=o?.headers.get(t);n&&function(e,t,o={}){if(0===a(e))throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof t)||0===a(t.toString()))throw new Error("'setCookie' should receive a valid cookie value");const n=[`${e}=${t}`];o?.expires&&o?.expires instanceof Date&&n.push("expires="+o.expires.toUTCString()),o.maxAge&&n.push(`maxAge=${o.maxAge}`),o?.sameSite&&"string"==typeof o?.sameSite&&n.push(`SameSite=${o?.sameSite}`),o?.path&&n.push(`path=${o?.path}`),o?.domain&&n.push(`domain=${o?.path}`),o?.httpOnly&&n.push("HttpOnly"),o?.secure&&n.push("Secure");const r=n.join(i);document.cookie=r}(e,n,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+1e3*u*14)})}function n(e,t=!1){return o(this),t||this&&401===this.status&&(location.href=function(e,t={}){const o=new URL(`${location.protocol}//${location.hostname}`),n=new URL(e,o);for(const[r,s]of Object.entries(t))n.searchParams.set(r,s);return n.toString()}("/acessos/entrar",{redirect_to:encodeURIComponent(location.pathname+location.search)})),{message:e,succeeded:!1}}function r(e){return o(this),{data:e,succeeded:!0}}function s(o=[],n="GET"){const r="application/json",s=new Headers({Accept:r,"Content-Type":r});for(const[e,t]of o)s.set(e,t);const a=c(e);a&&s.set(t,a);const i=c("__Host-Talho-AuthToken");return i&&s.set("Authorization",i),{method:n,headers:s}}function a(e){return e.length}var i="; ";function c(e){const t=document.cookie.split(i).find(t=>{const{name:o}=d(t);return o===e});return!!t&&d(t).value}function d(e){const[t,o]=e.split("=");return{name:t,value:o}}var u=86400,h=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"}),{createApp:p}=Vue;p({name:"OrderManagementApp",async created(){const e=await this.getOrders();e.succeeded&&(this.orders=e.data)},data:()=>({orders:null}),methods:{async getOrders(){const e="Houve uma falha com a busca de pedidos";try{const t=await fetch("https://xef5-44zo-gegm.b2.xano.io/api:YomXpzWs/order/list",{...s()});if(!t.ok){const o=await t.json();return n.call(t,o?.message??e)}const o=await t.json();return r.call(t,o)}catch(t){return n(e)}}},computed:{hasOrders(){const{orders:e}=this;return Array.isArray(e)&&e.length>0},getParsedOrders(){return this.hasOrders?this.orders?.map(({total:e,transaction_id:t,created_at:o,order_items:n,...r})=>{return{...r,created_date:(s=o,new Date(s).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),items_count:n,price:h.format(e/100),url:`/adm/ficha-de-pedido?transactionid=${t}`};var s})??[]:[]}}}).mount("#order-management-list"),window.addEventListener("pageshow",e=>{e.persisted&&window.location.reload()})}();