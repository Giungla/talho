"use strict";(()=>{var N="; ";function E(e){let t=document.cookie.split(N).find(n=>{let{name:s}=C(n);return s===e});return t?C(t).value:!1}function C(e){let[t,n]=e.split("=");return{name:t,value:n}}function h(e,t,n={}){if(e.length===0)throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof t)||t.toString().length===0)throw new Error("'setCookie' should receive a valid cookie value");let s=[`${e}=${t}`];n?.expires&&n?.expires instanceof Date&&s.push("expires="+n.expires.toUTCString()),n.maxAge&&s.push(`maxAge=${n.maxAge}`),n?.sameSite&&typeof n?.sameSite=="string"&&s.push(`SameSite=${n?.sameSite}`),n?.path&&s.push(`path=${n?.path}`),n?.domain&&s.push(`domain=${n?.path}`),n?.httpOnly&&s.push("HttpOnly"),n?.secure&&s.push("Secure");let l=s.join(N);return document.cookie=l,l}var se=401,A="__Host-Talho-AuthToken",M="__Host-Talho-Session-Cookie",w="X-Talho-Session";function ae(e){!e||e.status!==se||(location.href=k("/acessos/entrar",{redirect_to:encodeURIComponent(location.pathname)}))}function J(e){let t=e?.headers.get(w);t&&h(M,t,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+P(90))})}function d(e){return J(this),ae(this),{message:e,succeeded:!1}}function x(e){return J(this),{data:e,succeeded:!0}}function L(e=[],t="GET"){let n=new Headers({Accept:"application/json","Content-Type":"application/json"});for(let[f,I]of e)n.set(f,I);let s=E(M);s&&n.set(w,s);let l=E(A);return l&&n.set("Authorization",l),{method:t,headers:n}}function P(e){return 86400*1e3*e}var ie=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});var Y=null,O="oculto";function U(){return!!E(A)}function u(e,t=document){return t?t.querySelector(e):Y}function S(e,t,n,s){if(e)return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function R(e,t){e&&e.removeAttribute(t)}function D(e,...t){e&&e.classList.add(...t)}function H(e,...t){e&&e.classList.remove(...t)}function b(e,t,n){return e?e.classList.toggle(t,n):!1}function G(e,t){e&&(e.textContent=typeof t=="string"?t:t.toString())}function k(e,t={}){let n=new URL(`${location.protocol}//${location.hostname}`),s=new URL(e,n);for(let[l,f]of Object.entries(t))s.searchParams.set(l,f);return s.toString()}function F(e){return JSON.stringify(e)}function K(e){return e.length}function q(){return/^(([\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+(\.[\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+)*)|("[\p{L}\p{N}\s!#$%&'*+\/=?^_`{|}~.-]+"))@(([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*\.)+[a-zA-Z]{2,63}|(\[(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\]))$/u}function _(e,t){e&&e.focus(t)}var V={AC:"Acre",AL:"Alagoas",AP:"Amap\xE1",AM:"Amazonas",BA:"Bahia",CE:"Cear\xE1",DF:"Distrito Federal",ES:"Esp\xEDrito Santo",GO:"Goi\xE1s",MA:"Maranh\xE3o",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Par\xE1",PB:"Para\xEDba",PR:"Paran\xE1",PE:"Pernambuco",PI:"Piau\xED",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rond\xF4nia",RR:"Roraima",SC:"Santa Catarina",SP:"S\xE3o Paulo",SE:"Sergipe",TO:"Tocantins"},ue=Object.keys(V),ce=Object.values(V);var j="https://xef5-44zo-gegm.b2.xano.io";(function(){let e="disabled",t="mensagemdeerro",n="/area-do-usuario/pedidos-de-compra",s="redirect_to",l="[data-wtf-general-error-message]",f={preventScroll:!1};async function I(o){let r="Houve uma falha ao realizar o login. Por favor, tente novamente mais tarde.";try{let a=await fetch(`${j}/api:t3reRXiD/auth/login`,{...L([],"POST"),body:F(o)});if(!a.ok){let c=await a.json();return d.call(a,c?.message??r)}let i=await a.json();return x.call(a,i)}catch{return d(r)}}async function W(){let o="Houve uma falha na autoriza\xE7\xE3o Google. Por favor, tente novamente mais tarde.",r=new URL(`${j}/api:h_RKfex8/oauth/google/init`);r.searchParams.set("redirect_uri",location.origin.concat("/acessos/google-social-login"));try{let a=await fetch(r,{...L()});if(!a.ok){let c=await a.json();return d.call(a,c?.message??o)}let i=await a.json();return x.call(a,i)}catch{return d(o)}}function Z(o){return o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function $(){let r=new URL(location.href).searchParams.get(s);return r?decodeURIComponent(r):n}if(U()){location.href=$();return}let T=u("#wf-form-login"),Q=["name","method","aria-label","data-wf-page-id","data-wf-element-id","data-turnstile-sitekey"];if(T){for(let r of Q)R(T,r);let o=T.parentNode;H(o,"w-form"),T.remove(),o.insertAdjacentHTML("afterbegin",T.outerHTML)}let m=u("#wf-form-login"),z=new URLSearchParams(location.search),p=u("[data-wtf-user]"),g=u("[data-wtf-password]"),y=u('[type="submit"]',m),ee=u("[data-wtf-google]");z.has("email")?(p&&(p.value=z.get("email")??""),_(g,f)):_(p,f);function B(o){return function(r){return[o,r]}}function v(o,r){if(!o)return;let a=o.closest("[data-wtf-wrapper]");b(a,t,!r)}function te(o){o&&D(u(l,o),O)}function oe(o,r){let a=!r.succeeded,i=u(l,o);if(b(i,O,!a),!a)return;let c=i&&u("div",i);G(c,r.message)}function ne(){let o=B("wtfUser");if(!p)return o(!1);let r=q().test(p.value);return v(p,r),o(r)}function re(){let o=B("wtfPassword");if(!g)return o(!1);let r=K(g.value)>7;return v(g,r),o(r)}S(ee,"click",function(o){o.preventDefault(),W().then(r=>{r.succeeded&&(location.href=r.data.authUrl)})},{once:!0});let X=[{field:p,validator:ne},{field:g,validator:re}];for(let{field:o,validator:r}of X)S(o,"blur",r),S(o,"input",()=>v(o,!0));if(!m){console.warn("[WithTheFlow] Form was not founded at this page");return}S(m,"submit",async o=>{y?.setAttribute(e,e),o.preventDefault(),o.stopPropagation(),te(m);let a=X.map(({validator:c})=>c).find(c=>c().at(1)===!1);if(a){let c=Z(a().at(0));return _(u(`[data-${c}]`,m),f),R(y,e)}let i=await I({email:p?.value,password:g?.value});if(i.succeeded){h(A,i.data.authToken,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(i.data.expiration)}),location.href=$();return}oe(m,d(i.message)),R(y,e)}),R(y,e)})();})();
