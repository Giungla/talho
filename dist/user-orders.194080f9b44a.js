!function(){"use strict";var t="__Host-Talho-AuthToken",e="__Host-Talho-Session-Cookie",a="X-Talho-Session";function n(t){const n=t?.headers.get(a);n&&function(t,e,a={}){if(0===v(t))throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof e)||0===v(e.toString()))throw new Error("'setCookie' should receive a valid cookie value");const n=[`${t}=${e}`];a?.expires&&a?.expires instanceof Date&&n.push("expires="+a.expires.toUTCString()),a.maxAge&&n.push(`maxAge=${a.maxAge}`),a?.sameSite&&"string"==typeof a?.sameSite&&n.push(`SameSite=${a?.sameSite}`),a?.path&&n.push(`path=${a?.path}`),a?.domain&&n.push(`domain=${a?.path}`),a?.httpOnly&&n.push("HttpOnly"),a?.secure&&n.push("Secure");const o=n.join(y);document.cookie=o}(e,n,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+1e3*k*14)})}function o(t,e=!1){return n(this),e||this&&401===this.status&&(location.href=function(t,e={}){const a=new URL(`${location.protocol}//${location.hostname}`),n=new URL(t,a);for(const[o,r]of Object.entries(e))n.searchParams.set(o,r);return n.toString()}("/acessos/entrar",{redirect_to:encodeURIComponent(location.pathname+location.search)})),{message:t,succeeded:!1}}function r(t){return n(this),{data:t,succeeded:!0}}function s(n=[],o="GET"){const r="application/json",s=new Headers({Accept:r,"Content-Type":r});for(const[t,e]of n)s.set(t,e);const c=_(e);c&&s.set(a,c);const i=_(t);return i&&s.set("Authorization",i),{method:o,headers:s}}var c=null,i="oculto";function u(t,e=document){return e?e.querySelector(t):c}function d(t,e,a,n){if(t)return t.addEventListener(e,a,n),()=>t.removeEventListener(e,a,n)}function f(t,e,a){t&&t.setAttribute(e,a)}function l(t,e){t&&t.removeAttribute(e)}function m(t,...e){t&&t.classList.add(...e)}function h(t,...e){t&&t.classList.remove(...e)}function p(t,e,a){return!!t&&t.classList.toggle(e,a)}function w(t,e){t&&(t.textContent="string"==typeof e?e:e.toString())}function g(t){return JSON.stringify(t)}function v(t){return t.length}var y="; ";function _(t){const e=document.cookie.split(y).find(e=>{const{name:a}=b(e);return a===t});return!!e&&b(e).value}function b(t){const[e,a]=t.split("=");return{name:e,value:a}}var k=86400,S=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"}),$="talho_cart_items",T="https://xef5-44zo-gegm.b2.xano.io";!function(){const e="disabled",a="carrinhoflutuante--visible",n=`${T}/api:79PnTkh_`,y=u("#carrinho-flutuante");let b=!1;const k=new Set;function x(...t){return Math.max(...t)}if(!_(t))return void(location.href="/acessos/entrar");const C=new Proxy({list:[]},{get(t,e){const a=v(t.list);switch(e){case"hasOrders":return a>0;case"ordersCount":return a;default:return t[e]}},set(t,e,a){const n=Reflect.set(t,e,a);return n?("list"===e&&function(){const{list:t,hasOrders:e}=C;if(!N||!L||!O)return;p(E,i,e),p(N,i,!e);const a=document.createDocumentFragment();for(const n of t){const t=L.cloneNode(!0);w(u("[data-wtf-order-total]",t),n.total),w(u("[data-wtf-order-status]",t),n.status),w(u("[data-wtf-created-at]",t),n.created_at),w(u("[data-wtf-payment-method]",t),n.payment_method),w(u("[data-wtf-transaction-id]",t),n.transaction_id),d(u("[data-wtf-repurchase]",t),"click",()=>F(n.transaction_id));const e=u("[data-wtf-product-list]",t);for(const{name:a,slug:o,product_id:r,sku_id:s,quantity:l,unit_price:m,image:p,review:g,has_stock:v}of n.order_items){const t=O.cloneNode(!0),y=u("[data-wtf-review-area]",t);f(u("[data-wtf-product-anchor]",t),"href",`/produtos/${o}`),f(u("[data-wtf-order-item-image]",t),"style",`background-image: url(${p})`);const _=u("[data-wtf-buy-again-cta]",t);if(v?d(_,"click",()=>D({sku_id:s,slug:o})):A(_),w(u("[data-wtf-product-name]",t),a),w(u("[data-wtf-product-price]",t),S.format(m/100)),w(u("[data-wtf-product-subtotal]",t),S.format(m*l/100)),void 0===g){const t=P?.cloneNode(!0)??c,e=R?.cloneNode(!0)??c;h(t,i),n.pago?(d(u("[data-wtf-not-rated-cta]",t),"click",()=>{U(r,t,e)},{once:!0}),A(u("[data-wtf-not-rated-unpaid]",t))):(A(u("[data-wtf-not-rated-paid]",t)),A(u("[data-wtf-not-rated-cta]",t))),j(y,t,e)}else{const t=H?.cloneNode(!0);w(u("[data-wtf-evaluated-comment]",t),g.comment),I(t,g.rating),h(t,i),j(y,t)}e.insertAdjacentElement("afterbegin",t)}a.appendChild(t)}j(N,a)}(),!0):n}});function j(t,...e){t&&t.replaceChildren(...e.filter(Boolean))}function A(t){if(t)return t.remove()}const E=u("[data-wtf-has-no-orders]"),L=u("[data-wtf-order-template]"),N=u("[data-wtf-orders-container]"),O=u("[data-wtf-product-item]",N),H=u("[data-wtf-evaluated]"),P=u("[data-wtf-not-rated]"),R=u("[data-wtf-evaluation-form]");for(const t of[H,P,R,O])A(t);async function D({sku_id:t,slug:e}){if(k.has(e))return;k.add(e);const c=await async function(t){const e="Falha ao adicionar o produto";try{const a=await fetch(`${n}/cart/handle`,{...s([],"POST"),body:g({item:t,operation:"add"})});if(!a.ok){const t=await a.json();return o.call(a,t?.message??e)}const c=await a.json();return r.call(a,c)}catch(a){return o(`[CATCH] ${e}`)}}({sku_id:t,quantity:1,reference_id:e});c.succeeded?(m(y,a),localStorage.setItem($,g(c.data)),k.delete(e)):k.delete(e)}async function F(t){b||(b=!0,async function(t){const e="Não foi possível completar o pedido";try{const a=await fetch(`${n}/cart/repurchase/${t}`,{...s([],"POST")});if(!a.ok){const t=await a.json();return o(t?.message??e)}return r(await a.json())}catch(a){return o(e)}}(t).then(t=>{t.succeeded&&(p(u("[data-wtf-repurchase-message]",y),i,!t.data.has_removals),m(y,a),localStorage.setItem($,g(t.data.items)))}).finally(()=>{b=!1}))}function I(t,e){if(!t)return;const a=u("[data-wtf-evaluated-star-section]",t);if(!a)return;const n=x(a.childElementCount-x(1,e),0);for(let o=0;o++<n;)A(a.lastElementChild)}function U(t,a,n){if(!a||!n)return;m(a,i),h(n,i);const c=u("form",n),p=c?.parentElement;if(!c||!p)return;const v=["id","name","method","data-name","aria-label","data-wf-page-id","data-wf-element-id","data-turnstile-sitekey"];for(const e of v)l(c,e);A(c),j(p),p.insertAdjacentHTML("afterbegin",c.outerHTML);const y=u("form",n);l(u('[type="submit"]',y),e),d(y,"submit",async a=>{if(a.preventDefault(),a.stopPropagation(),!a.isTrusted||!a.submitter)return;f(a.submitter,e,e);const n=await async function({comment:t,rating:e,product_id:a}){const n="Falha ao gerar a avaliação, tente novamente mais tarde.";try{const c=await fetch(`${T}/api:9ixgU7Er/ratings/${a}/create`,{...s([],"POST"),body:g({rating:e,comment:t})});if(!c.ok){const t=await c.json();return o.call(c,t?.message??n)}const i=await c.json();return r.call(c,i)}catch(c){return o(n)}}({product_id:t,comment:y.comment.value,rating:parseInt(y.rating.value)});n.succeeded?function(t,e){if(!e)return;const a=e.closest("[data-wtf-review-area]");if(!a)return;const n=H?.cloneNode(!0);n&&(I(n,t.rating),w(u("[data-wtf-evaluated-comment]",n),t.comment),h(n,i),j(a,n))}(n.data,y):l(a.submitter,e)})}(async function(){const t="Falha ao buscar os pedidos";try{const e=await fetch(`${T}/api:TJEuMepe/user/orders`,{...s()});if(!e.ok){const a=await e.json();return o.call(e,a?.message??t)}const a=await e.json();return r.call(e,a)}catch(e){return o(t)}})().then(t=>{t.succeeded&&(C.list=t.data)})}()}();