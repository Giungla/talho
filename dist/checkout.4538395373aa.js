"use strict";(()=>{var w="; ";function B(e){let t=document.cookie.split(w).find(i=>{let{name:s}=F(i);return s===e});return t?F(t).value:!1}function F(e){let[t,i]=e.split("=");return{name:t,value:i}}function k(e,t,i={}){if(e.length===0)throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof t)||t.toString().length===0)throw new Error("'setCookie' should receive a valid cookie value");let s=[`${e}=${t}`];i?.expires&&i?.expires instanceof Date&&s.push("expires="+i.expires.toUTCString()),i.maxAge&&s.push(`maxAge=${i.maxAge}`),i?.sameSite&&typeof i?.sameSite=="string"&&s.push(`SameSite=${i?.sameSite}`),i?.path&&s.push(`path=${i?.path}`),i?.domain&&s.push(`domain=${i?.path}`),i?.httpOnly&&s.push("HttpOnly"),i?.secure&&s.push("Secure");let n=s.join(w);return document.cookie=n,n}var N="__Host-Talho-Session-Cookie",R="X-Talho-Session";function h(e){let t=this?.get(R);return t&&k(N,t,{path:"/",secure:!0,sameSite:"Strict",maxAge:O(90)}),{message:e,succeeded:!1}}function y(e){let t=this?.get(R);return t&&k(N,t,{path:"/",secure:!0,sameSite:"Strict",maxAge:O(90)}),{data:e,succeeded:!0}}function P(e,t="GET"){let i=new Headers({Accept:"application/json","Content-Type":"application/json"});for(let[n,l]of e)i.set(n,l);let s=B(N);return s&&i.set(R,s),{method:t,headers:i}}function O(e){return 86400*1e3*e}var g=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});var{ref:o,createApp:Ge}=Vue,a="",E="/",r=null,Ke="error",Ue="oculto",D="shipping",_="billing",Ye=8,M="https://xef5-44zo-gegm.b2.xano.io",qe=`${M}/api:79PnTkh_`,x=`${M}/api:5lp3Lw8X`,G=`${M}/api:24B7O9Aj`,Xe=1,ze=2,Qe=400,K="talho_cart_items",Q={AC:"Acre",AL:"Alagoas",AP:"Amap\xE1",AM:"Amazonas",BA:"Bahia",CE:"Cear\xE1",DF:"Distrito Federal",ES:"Esp\xEDrito Santo",GO:"Goi\xE1s",MA:"Maranh\xE3o",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Par\xE1",PB:"Para\xEDba",PR:"Paran\xE1",PE:"Pernambuco",PI:"Piau\xED",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rond\xF4nia",RR:"Roraima",SC:"Santa Catarina",SP:"S\xE3o Paulo",SE:"Sergipe",TO:"Tocantins"},U=Object.keys(Q),We=[10,11],V=new WeakMap,Ze=new Event("input"),L="same",Y="diff",Je="pix",H="creditcard";function et(){return new AbortController}function $(e){return tt(Ct("[data-wtf-loader]"),Ue,!e)}function tt(e,t,i){return e?e.classList.toggle(t,i):!1}function it(e,t=0){let i=Math.pow(10,t);return Math.round(e*i)/i}function q(e,t){let i=new URL(`${location.protocol}//${location.hostname}`),s=new URL(e,i);for(let[n,l]of Object.entries(t))s.searchParams.set(n,l);return s.toString()}function X(e,t){return Object.hasOwn(e,t)}function st(e,t,i){return Math.max(e,Math.min(t,i))}function I(e){return JSON.stringify(e)}function j(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,a)}function m(e){return e.replace(/\D+/g,a)}function b(e){return e.trim()}function c(e){return e.length}function rt(e,t){e.scrollIntoView(t)}function nt(e){let t=e.split(E);if(t.length!==2)return!1;let[i,s]=t,n=parseInt(i,10),l=parseInt(s,10);if(isNaN(n)||isNaN(l)||n<1||n>12)return!1;let d=new Date,v=2e3+(l<100?l:0);return new Date(v,n,0,23,59,59)>d}function ot(e){let t=(i,s,n,l)=>{let d=[];return C(s,d,`(${s}`),C(n,d,`) ${n}`),C(l,d,`-${l}`),d.join(a)};return e.length<11?e.replace(/^(\d{0,2})(\d{0,4})(\d{0,4})/,t):e.replace(/^(\d{0,2})(\d{0,5})(\d{0,4})/,t)}function at(e){return e.replace(/^(\d{0,3})(\d{0,3})(\d{0,3})(\d{0,2})/,(t,i,s,n,l)=>{let d=[];return C(i,d,`${i}`),C(s,d,`.${s}`),C(n,d,`.${n}`),C(l,d,`-${l}`),d.join(a)})}function lt(e){return e.replace(/^(\d{0,2})(\d{0,2})(\d{0,4})/,(t,i,s,n)=>[i,s,n].filter(Boolean).join(E))}function dt(e){return e.replace(/^(\d{0,4})(\d{0,4})(\d{0,4})(\d{0,4})/,(t,i,s,n,l)=>{let d=[];for(let v of[i,s,n,l])C(v,d,v);return d.join(" ")})}function ut(e){return e.replace(/^(\d{0,2})(\d{0,2})/,(t,i,s)=>{let n=[];for(let l of[i,s])C(l,n,l);return n.join(E)})}function ht(e){return e.replace(/^(\d{0,5})(\d{0,3})/,(t,i,s)=>{let n=[];for(let l of[i,s])C(l,n,l);return n.join("-")})}function ct(e){return e.toUpperCase()}function pt(e){return Array.isArray(e)}function C(e,t,i){return e?t.push(i):-1}function A(e,t){return e.includes(t)}function p(e,t){return e.test(t)}function f(...e){return{mounted(t){let i=W(t,"input",s=>{if(!s.isTrusted)return;let n=s.target;n.value=e.reduce((l,d)=>d(l),n.value??a),t.dispatchEvent(Ze)});V.set(t,i)},unmounted:Z}}function u(e,t,i){return{field:e,valid:t,...i&&{ignoreIf:i}}}function gt(e){let[t,i,s]=e.split(E);return new Date(`${s}-${i}-${t}T00:00:00`).toString()!=="Invalid Date"}function mt(e){if(e=m(e),e.length!==11||/^(\d)\1{10}$/.test(e))return!1;let t=We.map((i,s)=>{let n=s?10:9,d=11-[...e.slice(0,n)].map(Number).reduce((v,S,T)=>v+S*(i-T),0)%11;return d>9?0:d});return e.endsWith(t.join(a))}function Ct(e,t=document){return t?t.querySelector(e):r}function W(e,t,i,s){if(e)return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)}async function z({cep:e,deliveryMode:t}){let i="N\xE3o foi poss\xEDvel encontrar o endere\xE7o";if(e=m(e),e.length!==Ye)return h(i);try{let s=await fetch(`${M}/api:jyidAW68/cepaddress/${e}/checkout`,{...P([],"POST"),body:I({deliveryMode:t})});if(!s.ok){let l=await s.json();return h.call(s.headers,l?.message??i)}let n=await s.json();return y.call(s.headers,n)}catch{return h(i)}}var Z=e=>{let t=V.get(e);t&&(t(),V.delete(e))},yt=Ge({name:"TalhoCheckoutApp",setup(){let e=o(a),t=o(a),i=o(a),s=o(a),n=o(a),l=o(a),d=o(a),v=o(a),S=o(a),T=o(a),J=o(a),ee=o(a),te=o(a),ie=o(a),se=o(a),re=o(a),ne=o(a),oe=o(a),ae=o(a),le=o(a),de=o(a),ue=o(a),he=o(a),ce=o(a),pe=o(r),ge=o(r),me=o(r),Ce=o(r),ye=o(r),Pe=o(r),be=o(r),ve=o(r),fe=o(r),Ee=o(r),Se=o(r),De=o(r),Ae=o(r),Ie=o(r),Ve=o(r),Me=o(r),Te=o(r),ke=o(r),Ne=o(r),Re=o(r),Oe=o(r),_e=o(r),Le=o(r),He=o(r),Fe=o(r),we=o(r),Be=o(r),xe=o(r),$e=o(r),je=o(r);return{customerCPF:e,customerMail:t,customerPhone:i,customerBirthdate:s,customerCreditCardCVV:n,customerCreditCardDate:l,customerCreditCardNumber:d,customerCreditCardHolder:v,billingCEP:S,billingAddress:T,billingNumber:J,billingComplement:ee,billingNeighborhood:te,billingCity:ie,billingState:se,shippingRecipient:re,shippingCEP:ne,shippingAddress:oe,shippingNumber:ae,shippingComplement:le,shippingNeighborhood:de,shippingCity:ue,shippingState:he,couponCode:ce,customerMailElement:pe,customerCPFElement:ge,customerPhoneElement:me,customerBirthdateElement:Ce,paymentMethodMessageElement:ye,customerCreditCardCVVElement:Pe,customerCreditCardDateElement:be,customerCreditCardNumberElement:ve,customerCreditCardHolderElement:fe,billingCEPElement:Ee,billingAddressElement:Se,billingNumberElement:De,billingNeighborhoodElement:Ae,billingCityElement:Ie,billingStateElement:Ve,deliveryPlaceMessageElement:Me,shippingRecipientElement:Te,shippingCEPElement:ke,shippingAddressElement:Ne,shippingNumberElement:Re,shippingNeighborhoodElement:Oe,shippingCityElement:_e,shippingStateElement:Le,deliveryDateMessageElement:He,deliveryHourMessageElement:Fe,installmentsMessageElement:we,couponCodeElement:Be,deliveryPlaceAddressErrorMessage:xe,deliveryBillingAddressErrorMessage:$e,deliveryShippingAddressErrorMessage:je}},data(){return{hasPendingPayment:!1,isSubmitted:!1,productlist:r,visitedFields:[],selectedPayment:r,availablePayments:[{label:"Cart\xE3o de cr\xE9dito",method:H},{label:"PIX",method:Je}],deliveryPlace:r,deliveryPlaces:[{token:L,label:"Mesmo endere\xE7o de cobran\xE7a do cart\xE3o"},{token:Y,label:"Entregar em um endere\xE7o diferente"}],installment:r,selectedInstallment:r,isCouponPending:!1,coupon:r,isPagSeguroLoaded:!1,deliveryDate:r,deliveryHour:r,isDeliveryLoading:!1,deliveryPrice:r,deliveryOptions:r,priorityTax:r,subsidy:r}},created(){this.refreshCart().then(()=>$(!1)),window.addEventListener("storage",e=>{e.key===K&&this.refreshCart()})},methods:{async getCart(){let e="Falha ao capturar os produtos";try{let t=await fetch(`${qe}/cart/get`,{...P([])});if(!t.ok){let s=await t.json();return h.call(t.headers,s?.message??e)}let i=await t.json();return y.call(t.headers,i)}catch{return h(e)}},async refreshCart(){if(!this.hasPendingPayment)return this.getCart().then(e=>{if(e.succeeded){if(e.data.items.length===0){location.href=q("/",{reason:"empty_cart"});return}this.productlist=e.data}})},async getInstallments(){let e="Falha ao capturar o parcelamento";try{let t=await fetch(`${x}/calculatefees`,{...P([],"POST"),body:I({amount:this.getOrderPrice,cardBin:this.customerCreditCardNumber.replace(/\D+/g,a).slice(0,8)})});if(!t.ok){let s=await t.json();return h.call(t.headers,s?.message??e)}let i=await t.json();return y.call(t.headers,i)}catch{return h(e)}},async refreshInstallments(){if(!this.isCreditCard||!this.isCreditCardGroupValid||this.getCreditCardToken.hasErrors)return;this.installment=r,this.selectedInstallment=r;let e=await this.getInstallments();e.succeeded&&(this.installment=e.data)},setSelectedInstallmentsCount(e){this.selectedInstallment!==e&&(this.selectedInstallment=st(Xe,ze,e))},setSelectedPaymentMethod(e){this.selectedPayment!==e&&(this.hasDeliveryDates||this.handleDeliveryOptions(),e!==H?this.clearCreditCardData():this.isPagSeguroLoaded||this.loadPagSeguro(),this.deliveryPlace=r,this.selectedPayment=e)},setVisitedField(e){return C(!A(this.visitedFields,e),this.visitedFields,e)},hasVisitRegistry(e){return A(this.visitedFields,e)},async handlePayment(e){if(e.preventDefault(),this.hasPendingPayment||this.isDeliveryLoading)return;if(this.triggerValidations(),!this.isSubmitted){this.isSubmitted=!0,Vue.nextTick(()=>this.handlePayment(e));return}let t=this.firstInvalidField;if(t){rt(t.field,{block:"center",behavior:"smooth"}),t.field.tagName==="INPUT"&&setTimeout(()=>t.field.focus(),500);return}this.hasPendingPayment=!$(!0);let i=await this.handlePostPayment(this.selectedPayment);if(!i.succeeded)return this.hasPendingPayment=!$(!1),alert(i.message);let s={pix:"pix",creditcard:"confirmacao-do-pedido"}[this.selectedPayment];location.href=q(["/pagamento",s].join(E),{order:i.data.transactionid}),localStorage.removeItem(K)},async handlePostPayment(e){let t="Falha ao gerar o pedido";try{let i=await fetch(`${x}/payment/process/${e}`,{...P([],"POST"),body:I({...this.getOrderBaseData,customer:{...this.getParsedCustomer,...this.getParsedAddresses},...e===H&&this.creditCardAdditionalInfo})});if(!i.ok){let n=await i.json();return h.call(i.headers,n?.message??t)}let s=await i.json();return y.call(i.headers,s)}catch{return h(t)}},triggerValidations(){let e=this.notIgnoredFields;for(let{field:t}of e)t?.dispatchEvent(new Event("blur"))},feedAddress(e,{uf:t,bairro:i,logradouro:s,localidade:n}){if(e===_){this.billingAddress=s,this.billingNeighborhood=i,this.billingCity=n,this.billingState=t;return}this.shippingAddress=s,this.shippingNeighborhood=i,this.shippingCity=n,this.shippingState=t},setDeliveryPlace(e){this.deliveryPlace!==e&&(e===L&&/^\d{5}\-\d{3}$/.test(this.billingCEP)&&this.isBillingAddressGroupValid?z({cep:this.billingCEP,deliveryMode:!0}).then(t=>{t.succeeded||(this.deliveryPlaceAddressErrorMessage=t.message)}):this.deliveryPlaceAddressErrorMessage=r,this.deliveryPlace=e)},async captureAddress(e,t,i){if(!p(/^\d{5}-\d{3}$/,t)||t===i)return!1;let s=`${e}CEP`,n=await z({cep:t,deliveryMode:e===D});if(!n.succeeded)return this[s]=a,this.setVisitedField(s),e===D&&(this.deliveryShippingAddressErrorMessage=n.message),e===_&&(this.deliveryBillingAddressErrorMessage=n.message),!1;switch(e){case D:this.deliveryShippingAddressErrorMessage=r;break;case _:this.deliveryBillingAddressErrorMessage=r}return this.feedAddress(e,n.data),!0},async captureCoupon(){let e="Falha ao capturar o cupom indicado";try{let t=await fetch(`${x}/get_coupon`,{...P([],"POST"),body:I({verify_amount:!0,coupon_code:this.couponCode,cpf:this.customerCPF&&r,has_subsidy:this.subsidy?.has??!1,delivery_cep:this.getParsedAddresses.shippingaddress.zipPostalCode,has_selected_delivery:this.deliveryHour!==r&&this.deliveryDate!==r})});if(!t.ok){let s=await t.json();return h.call(t.headers,s?.message??e)}let i=await t.json();return y.call(t.headers,i)}catch{return h(e)}},async handleSearchCoupon(){if(this.isCouponPending)return;this.isCouponPending=!0;let e=await this.captureCoupon();if(this.isCouponPending=!1,!e.succeeded){this.coupon={error:!0,message:e.message};return}this.coupon=e.data},handleRemoveCoupon(){this.coupon=r,this.couponCode=a},loadPagSeguro(){let e=document.createElement("script");e.async=!0,e.src="https://assets.pagseguro.com.br/checkout-sdk-js/rc/dist/browser/pagseguro.min.js",e.onload=()=>{this.isPagSeguroLoaded=!0},document.head.appendChild(e)},clearCreditCardData(){this.customerCreditCardHolder=a,this.customerCreditCardNumber=a,this.customerCreditCardDate=a,this.customerCreditCardCVV=a},async handleDeliveryOptions(){let e=await this.captureDeliveryOptions();e.succeeded&&(this.deliveryOptions=e.data)},async captureDeliveryOptions(){let e="Falha ao capturar as op\xE7\xF5es de entrega";try{let t=await fetch(`${G}/delivery`,{...P([])});if(!t.ok){let s=await t.json();return h.call(t.headers,s?.message??e)}let i=await t.json();return y.call(t.headers,i)}catch{return h(e)}},setDeliveryDate(e){let t=this.deliveryOptions?.dates?.find(({shift_days:i})=>i===e);!t||this.deliveryDate===e||(this.deliveryDate=t.shift_days,this.deliveryHour=r,this.deliveryPrice=r)},setDeliveryHour(e){this.deliveryHour===e||this.getSelectedDateDetails?.periods.periods_count===0||(this.deliveryHour=e)},async handleDeliveryQuotation(e){this.isDeliveryLoading=!0;let t=await this.captureDeliveryQuotation(e);if(!t.succeeded)return;let{total:i,validator:s}=t.data;this.deliveryPrice={value:i,validator:s},this.isDeliveryLoading=!1},async captureDeliveryQuotation(e){let t="Falha ao gerar uma cota\xE7\xE3o";try{let i=await fetch(`${M}/api:i6etHc7G/site/checkout-delivery`,{...P([],"POST"),signal:e.signal,body:I(this.quotationPayload)});if(!i.ok){let n=await i.json();return h.call(i.headers,n?.message??t)}let s=await i.json();return y.call(i.headers,s)}catch{return h(t)}},async handleSubsidy(){let e=this.getParsedAddresses.shippingaddress.zipPostalCode;if(!/^\d{5}\-\d{3}$/.test(e))return;let t=await this.verifyForSubsidy(m(e));this.subsidy=t.succeeded?t.data:r},async verifyForSubsidy(e){let t="Houve uma falha na verifica\xE7\xE3o";try{let i=await fetch(`${G}/delivery/${e}/subsidy`,{...P([])});if(!i.ok){let n=await i.json();return h.call(i.headers,n?.message??t)}let s=await i.json();return y.call(i.headers,s)}catch{return h(t)}}},computed:{hasSelectedPaymentMethod(){return this.selectedPayment!==r},isCreditCard(){return this.selectedPayment===H},getOrderSubtotal(){return this.productlist?.order_price??0},getOrderSubtotalFormatted(){return g.format(this.getOrderSubtotal)},getOrderPrice(){let e=[this.getOrderSubtotal,this.getShippingPrice,this.priorityFee,this.subsidyDiscountPrice,this.getCouponDiscountPrice].reduce((t,i)=>t+i,0);return it(e,2)},getOrderPriceFormatted(){return g.format(this.getOrderPrice)},getShippingPrice(){return this.hasFreeShippingByCartPrice||this.deliveryPrice===r?0:this.deliveryPrice.value/100},getShippingPriceFormatted(){return this.hasFreeShippingByCartPrice?"Frete gr\xE1tis":g.format(this.getShippingPrice)},getCouponDiscountPrice(){if(this.hasNullCoupon||this.hasInvalidCoupon)return 0;let{value:e,is_percentage:t}=this.coupon,i=this.getParsedPriceForApplyDiscount,s=t?Math.min(e/100,1)*(i*-1):Math.min(i,e)*-1;return Math.round(Math.abs(s)*100)/100*Math.sign(s)},getCouponDiscountPriceFormatted(){return g.format(this.getCouponDiscountPrice)},getParsedPriceForApplyDiscount(){if(this.hasNullCoupon||this.hasInvalidCoupon)return 0;let{cupom_type:e}=this.coupon,{getShippingPrice:t}=this;return e===D&&this.hasSubsidy?Math.max(t+this.subsidyDiscountPrice,0):{product_id:0,shipping:t,subtotal:this.getOrderSubtotal}[e]},getParsedProducts(){let e=this.productlist?.items;return e?e.map(({name:t,imageUrl:i,quantity:s,price:n})=>({name:t,image:i,quantity:s,price:g.format(n),finalPrice:g.format(n*s)})):[]},isPersonalDataValid(){return!this.isSubmitted||[this.customerMailValidation.valid,this.customerBirthdateValidation.valid,this.customerCPFValidation.valid,this.customerPhoneValidation.valid].every(Boolean)},customerMailValidation(){return u(this.customerMailElement,!this.hasVisitRegistry("customerMail")||p(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,this.customerMail))},customerBirthdateValidation(){let{customerBirthdate:e}=this;return u(this.customerBirthdateElement,!this.hasVisitRegistry("customerBirthdate")||p(/^\d{2}\/\d{2}\/\d{4}$/,e)&&gt(e))},customerCPFValidation(){let{customerCPF:e}=this;return u(this.customerCPFElement,!this.hasVisitRegistry("customerCPF")||p(/^\d{3}\.\d{3}\.\d{3}-\d{2}$/,this.customerCPF)&&mt(e))},customerPhoneValidation(){return u(this.customerPhoneElement,!this.hasVisitRegistry("customerPhone")||p(/\(\d{2}\)\s\d{4,5}-\d{4}/,this.customerPhone))},paymentMethodValidation(){return u(this.paymentMethodMessageElement,this.selectedPayment!==r)},customerCreditCardHolderValidation(){return u(this.customerCreditCardHolderElement,!this.hasVisitRegistry("customerCreditCardHolder")||/^(\w{2,})(\s+(\w+))+$/.test(j(b(this.customerCreditCardHolder).replace(/\s{2,}/g," "))),!this.isCreditCard)},customerCreditCardNumberValidation(){return u(this.customerCreditCardNumberElement,!this.hasVisitRegistry("customerCreditCardNumber")||p(/^(\d{4})(\s\d{4}){2}(\s\d{3,4})$/,b(this.customerCreditCardNumber)),!this.isCreditCard)},customerCreditCardDateValidation(){let{customerCreditCardDate:e}=this;return u(this.customerCreditCardDateElement,!this.hasVisitRegistry("customerCreditCardDate")||p(/^(1[012]|0[1-9])\/\d{2}$/,e)&&nt(e),!this.isCreditCard)},customerCreditCardCVVValidation(){return u(this.customerCreditCardCVVElement,!this.hasVisitRegistry("customerCreditCardCVV")||p(/^\d{3}$/,this.customerCreditCardCVV),!this.isCreditCard)},isCreditCardGroupValid(){return[this.customerCreditCardHolderValidation.valid,this.customerCreditCardNumberValidation.valid,this.customerCreditCardDateValidation.valid,this.customerCreditCardCVVValidation.valid].every(Boolean)},billingCEPValidation(){return u(this.billingCEPElement,!this.hasVisitRegistry("billingCEP")||p(/^\d{5}-\d{3}$/,this.billingCEP),!this.isCreditCard)},billingAddressValidation(){return u(this.billingAddressElement,!this.hasVisitRegistry("billingAddress")||c(b(this.billingAddress))>2,!this.isCreditCard)},billingNumberValidation(){return u(this.billingNumberElement,!this.hasVisitRegistry("billingNumber")||c(this.billingNumber)>0,!this.isCreditCard)},billingNeighborhoodValidation(){return u(this.billingNeighborhoodElement,!this.hasVisitRegistry("billingNeighborhood")||c(this.billingNeighborhood)>0,!this.isCreditCard)},billingCityValidation(){return u(this.billingCityElement,!this.hasVisitRegistry("billingCity")||c(this.billingCity)>2,!this.isCreditCard)},billingStateValidation(){return u(this.billingStateElement,!this.hasVisitRegistry("billingState")||A(U,this.billingState),!this.isCreditCard)},isBillingAddressGroupValid(){return this.deliveryBillingAddressErrorMessage===r&&[this.billingCEPValidation,this.billingAddressValidation,this.billingNumberValidation,this.billingNeighborhoodValidation,this.billingCityValidation,this.billingStateValidation].every(e=>e.valid)},deliveryPlaceValidation(){return u(this.deliveryPlaceMessageElement,this.hasSelectedAddress&&this.deliveryPlaceAddressErrorMessage===r,!this.isCreditCard)},shippingRecipientValidation(){return u(this.shippingRecipientElement,!this.hasVisitRegistry("shippingRecipient")||p(/^(\w{2,})(\s+(\w+))+$/,j(b(this.shippingRecipient)).replace(/\s{2,}/g," ")),!this.shouldValidateShippingAddress)},shippingCEPValidation(){return u(this.shippingCEPElement,!this.hasVisitRegistry("shippingCEP")||p(/^\d{5}-\d{3}$/,this.shippingCEP),!this.shouldValidateShippingAddress)},shippingAddressValidation(){return u(this.shippingAddressElement,!this.hasVisitRegistry("shippingAddress")||c(b(this.shippingAddress))>2,!this.shouldValidateShippingAddress)},shippingNumberValidation(){return u(this.shippingNumberElement,!this.hasVisitRegistry("shippingNumber")||c(b(this.shippingNumber))>0,!this.shouldValidateShippingAddress)},shippingNeighborhoodValidation(){return u(this.shippingNeighborhoodElement,!this.hasVisitRegistry("shippingNeighborhood")||c(b(this.shippingNeighborhood))>3,!this.shouldValidateShippingAddress)},shippingCityValidation(){return u(this.shippingCityElement,!this.hasVisitRegistry("shippingCity")||c(b(this.shippingCity))>2,!this.shouldValidateShippingAddress)},shippingStateValidation(){return u(this.shippingStateElement,!this.hasVisitRegistry("shippingState")||A(U,this.shippingState),!this.shouldValidateShippingAddress)},isShippingAddressGroupValid(){return this.deliveryShippingAddressErrorMessage===r&&[this.shippingCEPValidation,this.shippingAddressValidation,this.shippingNumberValidation,this.shippingNeighborhoodValidation,this.shippingCityValidation,this.shippingStateValidation].every(e=>e.valid)},deliveryDatesGroupValidation(){return u(this.deliveryDateMessageElement,this.deliveryDate!==r,!this.paymentMethodValidation.valid)},deliveryHoursGroupValidation(){return u(this.deliveryHourMessageElement,this.deliveryHour!==r,!this.deliveryDatesGroupValidation.valid)},installmentGroupValidation(){return u(this.installmentsMessageElement,this.selectedInstallment!==r,!this.isCreditCard||!this.paymentMethodValidation.valid)},notIgnoredFields(){return[this.customerMailValidation,this.customerBirthdateValidation,this.customerCPFValidation,this.customerPhoneValidation,this.paymentMethodValidation,this.customerCreditCardHolderValidation,this.customerCreditCardNumberValidation,this.customerCreditCardDateValidation,this.customerCreditCardCVVValidation,this.billingCEPValidation,this.billingAddressValidation,this.billingNumberValidation,this.billingNeighborhoodValidation,this.billingCityValidation,this.billingStateValidation,this.deliveryPlaceValidation,this.shippingRecipientValidation,this.shippingCEPValidation,this.shippingAddressValidation,this.shippingNumberValidation,this.shippingNeighborhoodValidation,this.shippingCityValidation,this.shippingStateValidation,this.deliveryDatesGroupValidation,this.deliveryHoursGroupValidation,this.installmentGroupValidation].filter(({ignoreIf:e})=>A([!1,void 0],e))},firstInvalidField(){return this.notIgnoredFields.find(({valid:e})=>!e)??r},hasSelectedAddress(){return this.deliveryPlace!==r},isSameAddress(){return this.deliveryPlace===L},isDiffAddress(){return this.deliveryPlace===Y},shouldValidateShippingAddress(){return this.isCreditCard?this.showShippingAddressSelector&&!this.isSameAddress:!0},showShippingAddressSelector(){return!this.isCreditCard||this.isCreditCard&&this.hasSelectedAddress},getParsedAddresses(){let e=n=>Q?.[n]??a,t=n=>b(n).replace(/-+/g,a)||"N/A",i={zipPostalCode:this.shippingCEP,street:this.shippingAddress,number:this.shippingNumber,complement:t(this.shippingComplement),neighbourhood:this.shippingNeighborhood,city:this.shippingCity,state:e(this.shippingState)},s={zipPostalCode:this.billingCEP,street:this.billingAddress,number:this.billingNumber,complement:t(this.billingComplement),neighbourhood:this.billingNeighborhood,city:this.billingCity,state:e(this.billingState)};return this.isCreditCard?{billingaddress:s,shippingaddress:this.isSameAddress?s:i}:{shippingaddress:i,billingaddress:i}},getParsedCustomer(){return{name:this.isCreditCard?this.customerCreditCardHolder:this.shippingRecipient,cpf:this.customerCPF,email:this.customerMail,birthDate:this.customerBirthdate,phone:this.customerPhone}},getParsedDeliveryData(){let{getSelectedHourDetails:e,getSelectedDateDetails:t}=this;return{delivery_hour:{value:this.deliveryHour,validator:e?.validator,has_priority:e?.has_priority},delivery_date:{value:this.deliveryDate,validator:t?.validator,has_priority:t?.has_priority}}},getOrderBaseData(){return{user_id:r,coupon_code:this.hasInvalidCoupon||this.hasNullCoupon?r:this.coupon?.code,delivery:{...this.getParsedDeliveryData,delivery_price:this.deliveryPrice}}},showInstallmentSection(){return this.isCreditCard&&c(this.installment??[])>0},getParsedInstallments(){let{installment:e}=this;return e?e.map(({installments:t,installment_value:i})=>({installments:t,installment_value:g.format(i)})):[]},hasNullCoupon(){return this.coupon===r},hasAppliedCoupon(){return X(this.coupon??{},"cupom_type")},hasInvalidCoupon(){return X(this.coupon??{},Ke)},isCouponCodeValid(){let{couponCode:e}=this;return c(b(e))>4&&!p(/[^A-Z\d]/,e)},getCreditCardToken(){if(!this.isPagSeguroLoaded)return{errors:[],hasErrors:!1,encryptedCard:r};let[e,t]=this.customerCreditCardDate.split(E);return window.PagSeguro.encryptCard({expMonth:e,expYear:"20".concat(t),holder:this.customerCreditCardHolder,securityCode:this.customerCreditCardCVV,number:m(this.customerCreditCardNumber),publicKey:"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxPIKWT6ettkFKqSyfoUpH/550Q8YQtRf7ZYJJbV3U7/4HBtamJT9If4wiLs2YlEfwTPWlB5Cl0jGmkBSQkjIDF+QTOSJviZYKgiuR7Bnavgt+idkcZsd5hM1I6u1uwOJJE3wSSXg+Nw70GZCeg7A6bmq9tOu1827En/ZFKWBXqv9Upc7q/Y6N0XMzZ3CL1j6ZlhnCalQzzaV9whijxK22lIL78gLEUcnmEO7CUX6DyfcdlA13MM4X538k2eYUosdnKafCEDNVcT+PPUeUdJZ0CpBWA9c/XtO0BIbTXHTsDuDlX0r7BF0vMFJMi0D9lkFCavY/kjZEQYhnXMtrWlUWwIDAQAB"})},hasDeliveryDates(){let{deliveryOptions:e}=this;return pt(e?.dates)&&c(e?.dates)>0},hasDeliveryHour(){return this.deliveryDate!==r&&c(this.getParsedDeliveryHours)>0},getParsedDeliveryHours(){return!this.hasDeliveryDates||this.getSelectedDateDetails===r?[]:this.getSelectedDateDetails.periods.hours.map(({label:t,hour:i})=>({hour:i,label:t}))},quotationPayload(){if([this.deliveryDate,this.deliveryHour].some(s=>s===r))return!1;let e=this.getParsedAddresses.shippingaddress.zipPostalCode;if(!/^\d{5}\-\d{3}$/.test(e))return!1;let{delivery_hour:t,delivery_date:i}=this.getParsedDeliveryData;return{cep:e,delivery_hour:t,delivery_date:i}},getParsedDeliveryDates(){if(this.deliveryOptions===r)return[];let e=this.deliveryDate;return this.deliveryOptions.dates.map(({label:t,shift_days:i})=>({label:t,shift_days:i,selected:e===i}))},getSelectedDateDetails(){if(!this.deliveryDate===r)return r;let e=this.deliveryOptions?.dates.find(({shift_days:t})=>t===this.deliveryDate);return e||r},getSelectedHourDetails(){return!this.getSelectedDateDetails||!this.deliveryHour?r:this.getSelectedDateDetails.periods.hours.find(({hour:e})=>e===this.deliveryHour)??r},hasPriorityFee(){return!this.hasDeliveryHour||!this.getSelectedDateDetails||!this.getSelectedHourDetails?!1:this.getSelectedDateDetails.has_priority&&this.getSelectedHourDetails.has_priority},priorityFee(){return this.hasPriorityFee?this.deliveryOptions?.priority_fee:0},priorityFeeFormatted(){return g.format(this.priorityFee)},hasSubsidy(){return this.subsidy?.has===!0&&this.getShippingPrice>0},subsidyDiscountPrice(){return this.subsidy?.has===!0?Math.min(this.subsidy.value,this.getShippingPrice)*-1:0},subsidyDiscountPriceFormatted(){return g.format(this.subsidyDiscountPrice)},hasFreeShippingByCartPrice(){return this.getOrderSubtotal>=Qe},creditCardAdditionalInfo(){let{installment:e,isSameAddress:t,getCreditCardToken:i,selectedInstallment:s,customerCreditCardHolder:n}=this;return{is_same_address:t,credit_card_info:{holderName:n,creditCardToken:i.encryptedCard??a,numberOfPayments:s,installmentValue:e?.find(({installments:l})=>l===s)?.installment_value??0}}}},watch:{billingCEP(e,t){this.captureAddress(_,e,t).then(i=>{i&&(this.deliveryPlaceAddressErrorMessage=r,this.deliveryPlace===L&&(this.deliveryPlace=r))})},shippingCEP(e,t){this.deliveryDate=r,this.deliveryHour=r,this.captureAddress(D,e,t)},getOrderPrice:{immediate:!0,handler:function(){this.refreshInstallments()}},getCreditCardToken(e){e.hasErrors||this.refreshInstallments()},quotationPayload(e,t,i){if(!e)return;let{cep:s,delivery_hour:n,delivery_date:l}=e;if(!/^\d{5}\-\d{3}$/.test(s))return;let d=et();if(!t)return this.handleDeliveryQuotation(d),i(()=>d.abort());let{cep:v,delivery_date:S,delivery_hour:T}=t;return this.handleDeliveryQuotation(d),i(()=>d.abort())},getParsedAddresses(e,t){!e||!t||e.shippingaddress.zipPostalCode!==t.shippingaddress.zipPostalCode&&/^\d{5}\-\d{3}$/.test(e.shippingaddress.zipPostalCode)&&(this.isCreditCard&&this.deliveryPlace===r||this.handleSubsidy())}},directives:{maskDate:f(m,lt),maskCpf:f(m,at),maskPhone:f(m,ot),maskCreditCard:f(m,dt),maskCreditCardDate:f(m,ut),maskNumberOnly:f(m),maskCep:f(m,ht),upperCase:f(ct),normalize:f(j),visitedField:{mounted(e,{value:t,instance:i}){let s=W(e,"blur",n=>{i.setVisitedField(t),V.delete(e)},{once:!0});V.set(e,s)},unmounted:Z}}});yt.mount("#fechamentodopedido");})();
