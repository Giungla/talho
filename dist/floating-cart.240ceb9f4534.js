!function(){"use strict";var t="__Host-Talho-Session-Cookie",e="X-Talho-Session";function n(n){const a=n?.headers.get(e);a&&function(t,e,n={}){if(0===p(t))throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof e)||0===p(e.toString()))throw new Error("'setCookie' should receive a valid cookie value");const a=[`${t}=${e}`];n?.expires&&n?.expires instanceof Date&&a.push("expires="+n.expires.toUTCString()),n.maxAge&&a.push(`maxAge=${n.maxAge}`),n?.sameSite&&"string"==typeof n?.sameSite&&a.push(`SameSite=${n?.sameSite}`),n?.path&&a.push(`path=${n?.path}`),n?.domain&&a.push(`domain=${n?.path}`),n?.httpOnly&&a.push("HttpOnly"),n?.secure&&a.push("Secure");const r=a.join(h);document.cookie=r}(t,a,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+1e3*v*90)})}function a(t){return n(this),this&&401===this.status&&(location.href=function(t,e={}){const n=new URL(`${location.protocol}//${location.hostname}`),a=new URL(t,n);for(const[r,o]of Object.entries(e))a.searchParams.set(r,o);return a.toString()}("/acessos/entrar",{redirect_to:encodeURIComponent(location.pathname+location.search)})),{message:t,succeeded:!1}}function r(t){return n(this),{data:t,succeeded:!0}}function o(n=[],a="GET"){const r=new Headers({Accept:"application/json","Content-Type":"application/json"});for(const[t,e]of n)r.set(t,e);const o=w(t);o&&r.set(e,o);const i=w("__Host-Talho-AuthToken");return i&&r.set("Authorization",i),{method:a,headers:r}}var i=null,c="oculto";function s(t){return Array.isArray(t)}function u(t,e=document){return e?e.querySelector(t):i}function f(t,e,n,a){if(t)return t.addEventListener(e,n,a),()=>t.removeEventListener(e,n,a)}function l(t,...e){t&&t.classList.add(...e)}function d(t,e,n){return!!t&&t.classList.toggle(e,n)}function m(t,e){t&&(t.textContent="string"==typeof e?e:e.toString())}function g(t){if("string"!=typeof t)return null;try{return JSON.parse(t)}catch{return i}}function p(t){return t.length}var h="; ";function w(t){const e=document.cookie.split(h).find(e=>{const{name:n}=y(e);return n===t});return!!e&&y(e).value}function y(t){const[e,n]=t.split("=");return{name:e,value:n}}var v=86400,S=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"}),b="talho_cart_items",k="https://xef5-44zo-gegm.b2.xano.io/api:79PnTkh_",O=new Proxy({cart:i,fetched:i,isPending:!1,isCartOpened:!0},{get(t,e){switch(e){case"hasFreeShipping":return(t.cart?.order_price??0)>400;case"missingForFreeShipping":return Math.max(0,400-(t.cart?.order_price??0));case"getOrderPrice":return S.format(t.cart?.order_price??0);default:return Reflect.get(t,e)}},set(t,e,n){const a=Reflect.set(t,e,n);if(!a)return a;switch(e){case"isPending":break;case"isCartOpened":A();break;case"cart":!function(){m(T,O.getOrderPrice);const t=O.cart?.items;if(!s(t)||!_||!x)return;if(d(u("[data-wtf-floating-cart-total-block]"),c,0===p(t)),d(u("[data-wtf-floating-cart-checkout-button]",L),c,0===p(t)),!d(C,c,p(t)>0))return m(u("[data-wtf-floating-cart-items-indicator]"),"0"),x.replaceChildren();let e=0;const n=document.createDocumentFragment();for(const{slug:a,imageUrl:r,quantity:o,price:i,sku_id:c,name:s}of t){e+=o;const t=_.cloneNode(!0);m(u("[data-wtf-floating-cart-item-product-name]",t),s),m(u("[data-wtf-floating-cart-item-quantity]",t),o.toString()),m(u("[data-wtf-floating-cart-item-product-price]",t),S.format(i));const d=u("[data-wtf-floating-cart-item-image]",t);d&&(d.style.backgroundImage=`url('${r}')`);const g={sku_id:c,reference_id:a},p=[["delete","data-wtf-floating-cart-item-remove"],["increase","data-wtf-floating-cart-item-plus-button"],["decrease","data-wtf-floating-cart-item-minus-button"]];for(const[e,n]of p){const a=u(`[${n}]`,t);"increase"===e&&o>=10?l(a,"onedge"):f(a,"click",t=>F.call(t,e,g))}n.appendChild(t)}m(u("[data-wtf-floating-cart-items-indicator]"),e.toString()),x?.replaceChildren(n)}(),function(){const{hasFreeShipping:t}=O;if(d(P,c,!t),d($,c,t),!t)return m(u("[data-wtf-promo-invalidada-txt]",$),`Adicione mais ${S.format(O.missingForFreeShipping)} e ganhe frete grátis`);m(u("[data-wtf-promo-validada-txt-sem-imagem]",P),"Você ganhou frete grátis")}(),localStorage.setItem(b,JSON.stringify(n))}return a}}),_=u("[data-wtf-floating-cart-item]"),x=u("[data-wtf-floating-cart-item-wrapper]"),C=u("[data-wtf-floating-cart-empty-cart]"),P=u("[data-wtf-promo-valid]"),$=u("[data-wtf-promo-invalid]"),T=u("[data-wtf-floating-cart-total]");function j(t,e,n){return Object.prototype.hasOwnProperty.call(t,e)&&(!n||typeof t[e]===n)}async function A(){if(!O.isCartOpened)return;const t=g(localStorage.getItem(b));if(t&&j(e=t,"order_price","number")&&j(e,"items")&&s(e.items)&&(0===p(e.items)||e.items.every(t=>j(t,"name","string")&&j(t,"quantity","number")&&j(t,"price","number")&&j(t,"imageUrl","string")&&j(t,"sku_id","number")&&j(t,"slug","string"))))return O.fetched??=!0,void(O.cart=t);var e;localStorage.removeItem(b),O.isPending=!0;const n=await async function(){const t="Houve uma falha ao buscar o seu carrinho";try{const e=await fetch(`${k}/cart/get`,{...o()});if(!e.ok){const n=await e.json();return a.call(e,n?.message??t)}const n=await e.json();return r.call(e,n)}catch(e){return a(t)}}();O.fetched??=!0,O.isPending=!1,n.succeeded&&(O.cart=n.data)}async function F(t,e){this.preventDefault(),this.stopPropagation(),await async function(t,e){if(O.isPending)return;O.isPending=!0;const n=await async function(t,e){const n="Houve uma falha ao buscar o seu carrinho";try{const c=await fetch(`${k}/cart/handle`,{...o([],"POST"),body:(i={item:t,operation:e},JSON.stringify(i))});if(!c.ok){const t=await c.json();return a.call(c,t?.message??n)}const s=await c.json();return r.call(c,s)}catch(c){return a(n)}var i}({...e,quantity:1},t);O.isPending=!1,n.succeeded&&(O.cart=n.data)}(t,e)}var L=u("[data-wtf-floating-cart]"),R=new MutationObserver(t=>{const e=!!(n=t[0].target)&&n.classList.contains("carrinhoflutuante--visible");var n;O.isCartOpened=e,window.scrollTo({top:0,behavior:"instant"}),document.body.style.overflow=e?"hidden":"unset"});L&&(R.observe(L,{attributes:!0,attributeFilter:["class"]}),x&&(window.addEventListener("storage",function(t){t.key===b&&(O.cart=t.newValue?g(t.newValue):i)}),A().then(()=>{O.isCartOpened=!1})))}();