!function(){"use strict";var e="user_name",t="phone",i="email",s="shipping_cep",r="billing_cep",a="https://xef5-44zo-gegm.b2.xano.io",n="talho_cart_items",o={AC:"Acre",AL:"Alagoas",AP:"Amapá",AM:"Amazonas",BA:"Bahia",CE:"Ceará",DF:"Distrito Federal",ES:"Espírito Santo",GO:"Goiás",MA:"Maranhão",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Pará",PB:"Paraíba",PR:"Paraná",PE:"Pernambuco",PI:"Piauí",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rondônia",RR:"Roraima",SC:"Santa Catarina",SP:"São Paulo",SE:"Sergipe",TO:"Tocantins"},d=Object.keys(o),l="",h="/",c="|";function u(e,t,i){return e?t.push(i):-1}function p(e,t){return e.includes(t)}function g(e,t){return e===t}function m(e){const t=k(O(document.cookie),"; ").find(t=>{const{name:i}=y(t);return i===e});return!!t&&y(t).value}function y(e){const[t,...i]=k(e,"=");return{name:t,value:A(i)>0&&decodeURIComponent(i.join("="))}}function C(e,t,i={}){if(0===A(e))throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof t)||0===A(t.toString()))throw new Error("'setCookie' should receive a valid cookie value");const s=[`${e}=${encodeURIComponent(t)}`];u(i?.expires&&i?.expires instanceof Date,s,"expires="+i.expires?.toUTCString()),u(i.maxAge,s,`maxAge=${i.maxAge}`),u(i?.sameSite&&"string"==typeof i?.sameSite,s,`SameSite=${i?.sameSite}`),u(i?.path,s,`path=${i?.path}`),u(i?.domain,s,`domain=${i?.domain}`),u(i?.httpOnly,s,"HttpOnly"),u(i?.secure,s,"Secure");const r=s.join("; ");return document.cookie=r,r}var v=null,b={block:"center",behavior:"smooth"};function P(e,t,i,s){if(e)return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)}function f(e){return i=!e,!!(t=function(e,t=document){return t?t.querySelector(e):v}("[data-wtf-loader]"))&&t.classList.toggle("oculto",i);var t,i}function V(e,t={}){const i=new URL(`${location.protocol}//${location.hostname}`),s=new URL(e,i);for(const[r,a]of Object.entries(t))s.searchParams.set(r,a);return s.toString()}function S(e){return JSON.stringify(e)}function D(e){return e.trim()}function E(e){return e.replace(/\D+/g,l)}function A(e){return e.length}function w(){return/^(([\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+(\.[\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+)*)|("[\p{L}\p{N}\s!#$%&'*+\/=?^_`{|}~.-]+"))@(([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*\.)+[a-zA-Z]{2,63}|(\[(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\]))$/u}function N(){return/^\(\d{2}\)\s\d{4,5}-\d{4}$/}function M(){return/^\d{5}-\d{3}$/}function _(){return/^(\w{2,})(\s+(\w+))+$/}function F(){return/^\d{3}\.\d{3}\.\d{3}-\d{2}$/}function $(){return/^\d{2}\/\d{2}\/\d{4}$/}function R(e,t){return("function"==typeof e?e():e).test(t)}function I(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,l).replace(/[\u200B-\u200D\uFEFF]/g,l).replace(/[\u2060\u034F]/g,l)}function O(e){return e.replace(/\s{2,}/g," ")}function k(e,t,i){return e.split(t,i)}function H(e){return e===v}var j="POST",B="__Host-Talho-Session-Cookie",T="X-Talho-Session",L={redirect_to:encodeURIComponent(location.pathname+location.search)},x={path:h,secure:!0,sameSite:"Strict",expires:new Date(Date.now()+12096e5)};function G(e){const t=e?.headers.get(T);t&&C(B,t,x)}function z(e,t=!1,i){return G(this),t||this&&401===this.status&&function(e="/acessos/entrar",t=L){location.href=V(e,t)}(),i?.(),{message:e,succeeded:!1}}function U(e,t){return G(this),t?.(),{data:e,succeeded:!0}}function X(e=[],t="GET"){const i="application/json",s=new Headers({Accept:i,"Content-Type":i});for(const[n,o]of e)s.set(n,o);const r=m(B);r&&s.set(T,r);const a=m("__Host-Talho-AuthToken");return a&&s.set("Authorization",a),{method:t,headers:s}}function q(e,t=0){const i=Math.pow(10,t);return Math.round(e*i)/i}var Q=[10,11],Z=new Event("input"),J=new Event("blur"),W=new WeakMap,Y=e=>{const t=W.get(e);t&&(t(),W.delete(e))};function K(...e){return{mounted(t,i){const s=i.arg??"input",r=P(t,s,i=>{if(!i.isTrusted)return;const s=i.target;s.value=e.reduce((e,t)=>t(e),s.value??l),t.dispatchEvent(Z)});W.set(t,r)},unmounted:Y}}var ee=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"}),te="_fbc|_fbp",ie=document.currentScript?.getAttribute("data-parameter-names")??"gclid|gbraid|wbraid|gad_campaignid|gad_source|utm_source|utm_medium|utm_campaign";function se(e){return`talho_${e}`}function re(){const e=[];for(const t of k(ie,c)){const i=m(se(t));u(i,e,[t,i])}return e}var ae=e=>o?.[e]??l,ne=e=>D(e).replace(/-+/g,l)||"N/A",{ref:oe,createApp:de}=Vue,le="shipping",he="billing",ce=`${a}/api:79PnTkh_`,ue=`${a}/api:5lp3Lw8X`,pe=`${a}/api:24B7O9Aj`,ge="ERROR_CODE_NOT_FOUND",me="ERROR_CODE_BAD_REQUEST",ye={[ge]:"O CEP indicado não foi localizado.",[me]:"Não realizamos entregas na sua região."},Ce=document.currentScript?.getAttribute("data-public-key"),ve="same",be="diff",Pe="pix",fe="creditcard";function Ve(e,t){return Object.hasOwn(e,t)}function Se(e,t,i){return{field:e,valid:t,...i&&{ignoreIf:i}}}async function De({cep:e,deliveryMode:t}){const i="Não foi possível encontrar o endereço";if(8!==A(e=E(e)))return z(i);try{const s=await fetch(`${a}/api:jyidAW68/cepaddress/${e}/checkout`,{...X([],j),body:S({deliveryMode:t})});if(!s.ok){const e=await s.json();return z.call(s,e?.code??i)}const r=await s.json();return U.call(s,r)}catch(s){return z(i)}}de({name:"TalhoCheckoutApp",setup:()=>({customerCPF:oe(l),customerMail:oe(l),customerPhone:oe(l),customerBirthdate:oe(l),customerCreditCardCVV:oe(l),customerCreditCardDate:oe(l),customerCreditCardNumber:oe(l),customerCreditCardHolder:oe(l),billingCEP:oe(l),billingAddress:oe(l),billingNumber:oe(l),billingComplement:oe(l),billingNeighborhood:oe(l),billingCity:oe(l),billingState:oe(l),shippingRecipient:oe(l),shippingCEP:oe(l),shippingAddress:oe(l),shippingNumber:oe(l),shippingComplement:oe(l),shippingNeighborhood:oe(l),shippingCity:oe(l),shippingState:oe(l),couponCode:oe(l),customerMailElement:oe(v),customerCPFElement:oe(v),customerPhoneElement:oe(v),customerBirthdateElement:oe(v),paymentMethodMessageElement:oe(v),customerCreditCardCVVElement:oe(v),customerCreditCardDateElement:oe(v),customerCreditCardNumberElement:oe(v),customerCreditCardHolderElement:oe(v),billingCEPElement:oe(v),billingAddressElement:oe(v),billingNumberElement:oe(v),billingNeighborhoodElement:oe(v),billingCityElement:oe(v),billingStateElement:oe(v),deliveryPlaceMessageElement:oe(v),shippingRecipientElement:oe(v),shippingCEPElement:oe(v),shippingAddressElement:oe(v),shippingNumberElement:oe(v),shippingNeighborhoodElement:oe(v),shippingCityElement:oe(v),shippingStateElement:oe(v),deliveryDateMessageElement:oe(v),deliveryHourMessageElement:oe(v),installmentsMessageElement:oe(v),couponCodeElement:oe(v),deliveryPlaceAddressErrorMessage:oe(v),deliveryBillingAddressErrorMessage:oe(v),deliveryShippingAddressErrorMessage:oe(v)}),data:()=>({user:v,errorMessage:v,hasPendingPayment:!1,isSubmitted:!1,productlist:v,visitedFields:[],selectedPayment:v,availablePayments:[{label:"Cartão de crédito",method:fe},{label:"PIX",method:Pe}],deliveryPlace:v,deliveryPlaces:[{token:ve,label:"Mesmo endereço de cobrança do cartão"},{token:be,label:"Entregar em um endereço diferente"}],installment:v,selectedInstallment:v,installmentMessage:v,isCouponPending:!1,coupon:v,isPagSeguroLoaded:!1,deliveryDate:v,deliveryHour:v,isDeliveryLoading:!1,deliveryPrice:v,deliveryOptions:v,priorityTax:v,subsidy:v,selectedBillingAddressId:v,selectedShippingAddressId:v}),created(){Promise.allSettled([this.getLoggedInUser().then(e=>{e.succeeded&&(this.user=e.data)}),this.refreshCart().then(()=>f(!1))]),window.addEventListener("storage",e=>{e.key===n&&this.refreshCart()})},methods:{setPreviousAddress(e,t){const i=this.user?.address_list.find(t=>t.id===e);if(!i)return;const{id:s,cep:r,address:a,number:n,city:o,complement:d,state:l,neighborhood:h}=i;this[`${t}CEP`]=r,this[`${t}Address`]=a,this[`${t}Number`]=n,this[`${t}Complement`]=d,this[`${t}City`]=o,this[`${t}State`]=l,this[`${t}Neighborhood`]=h,t!==le?t===he&&(this.selectedBillingAddressId=s):this.selectedShippingAddressId=s},async getLoggedInUser(){const e="Falha na captura do usuário";try{const t=await fetch(`${a}/api:TJEuMepe/user/checkout`,{...X()});if(!t.ok){const i=await t.json();return z.call(t,i?.message??e,!0)}const i=await t.json();return U.call(t,i)}catch(t){return z(e)}},async getCart(){const e="Falha ao capturar os produtos";try{const t=await fetch(`${ce}/cart/get`,{...X()});if(!t.ok){const i=await t.json();return z.call(t,i?.message??e)}const i=await t.json();return U.call(t,i)}catch(t){return z(e)}},async refreshCart(){if(!this.hasPendingPayment)return this.getCart().then(e=>{e.succeeded&&(0!==A(e.data.items)?this.productlist=e.data:location.href=V("/",{reason:"empty_cart"}))})},async getInstallments(){const e="Falha ao capturar o parcelamento";try{const t=await fetch(`${ue}/calculatefees`,{...X([],j),body:S({amount:this.getOrderPrice,cardBin:this.customerCreditCardNumber.replace(/\D+/g,l).slice(0,8)})});if(!t.ok){const i=await t.json();return z.call(t,i?.message??e)}const i=await t.json();return U.call(t,i)}catch(t){return z(e)}},async refreshInstallments(){if(!this.isCreditCard||!this.isCreditCardGroupValid||this.getCreditCardToken.hasErrors)return;this.installment=v,this.selectedInstallment=v,this.installmentMessage=v;const e=await this.getInstallments();e.succeeded?this.installment=e.data:this.installmentMessage=e.message},setSelectedInstallmentsCount(e){var t;this.selectedInstallment!==e&&(this.selectedInstallment=(t=e,Math.max(1,Math.min(2,t))))},setSelectedPaymentMethod(e){this.selectedPayment!==e&&(this.hasDeliveryDates||this.handleDeliveryOptions(),e!==fe?this.clearCreditCardData():this.isPagSeguroLoaded||this.loadPagSeguro(),this.deliveryPlace=v,this.selectedPayment=e)},setVisitedField(e){return u(!p(this.visitedFields,e),this.visitedFields,e)},hasVisitRegistry(e){return p(this.visitedFields,e)},async handlePayment(e){e.preventDefault();const t=this.selectedPayment;if(this.hasPendingPayment||this.isDeliveryLoading||H(t))return;if(this.triggerValidations(),!this.isSubmitted)return this.isSubmitted=!0,void Vue.nextTick(()=>this.handlePayment(e));const i=this.firstInvalidField;if(i&&i.field)return s=i.field,r=b,s&&s.scrollIntoView(r),void("INPUT"===i.field.tagName&&setTimeout(i.field.focus,500));var s,r;this.hasPendingPayment=!f(!0);const a=await this.handlePostPayment(t);if(!a.succeeded)return this.errorMessage=a.message,void(this.hasPendingPayment=!f(!1));!function(){const e=new Date(Date.now()-1),t={path:h,secure:!1,expires:e,domain:location.host.replace(/^www/,l)};for(const i of k(ie,c))C(se(i),h,{...t,sameSite:"Lax"}),C(i,h,{...t,sameSite:"Lax"});for(const i of k(te,c))C(i,h,t)}();const o={[Pe]:"pix",[fe]:"confirmacao-do-pedido"}[t];localStorage.removeItem(n),location.href=V(["/pagamento",o].join(h),{order:a.data.transactionid})},async handlePostPayment(e){const t="Falha ao gerar o pedido";try{const i=await fetch(`${ue}/payment/process/${e}`,{...X([...re(),...k(te,c).reduce((e,t)=>{const i=m(t);return i?[...e,[t.replace("_",l),i]]:e},[])],j),body:S({...this.getOrderBaseData,customer:{...this.getParsedCustomer,...this.getParsedAddresses},...e===fe&&this.creditCardAdditionalInfo})});if(!i.ok){const e=await i.json();return z.call(i,e?.message??t)}const s=await i.json();return U.call(i,s)}catch(i){return z(t)}},triggerValidations(){const e=this.notIgnoredFields;for(const{field:t}of e)t?.dispatchEvent(J)},feedAddress(e,{uf:t,bairro:i,logradouro:s,localidade:r}){if(e===he)return this.billingAddress=s,this.billingNeighborhood=i,this.billingCity=r,void(this.billingState=t);this.shippingAddress=s,this.shippingNeighborhood=i,this.shippingCity=r,this.shippingState=t},setDeliveryPlace(e){this.deliveryPlace!==e&&(e===ve&&R(M,this.billingCEP)&&this.isBillingAddressGroupValid?De({cep:this.billingCEP,deliveryMode:!0}).then(e=>{e.succeeded||(this.deliveryPlaceAddressErrorMessage=ye?.[e.message]??e.message)}):this.deliveryPlaceAddressErrorMessage=v,this.deliveryPlace=e)},async captureAddress(e,t,i){if(!R(M,t)||t===i)return!1;const s=`${e}CEP`,r=await De({cep:t,deliveryMode:e===le});if(!r.succeeded){const{message:t}=r;return this[s]=l,this.setVisitedField(s),this.deliveryShippingAddressErrorMessage=e===le&&t!==ge?ye?.[t]??ye[me]:v,this.deliveryBillingAddressErrorMessage=e===he&&t!==ge?ye?.[t]??ye[me]:v,!1}switch(e){case le:this.deliveryShippingAddressErrorMessage=v;break;case he:this.deliveryBillingAddressErrorMessage=v}return this.feedAddress(e,r.data),!0},async captureCoupon(){const e="Falha ao capturar o cupom indicado";try{const t=await fetch(`${ue}/get_coupon`,{...X([],j),body:S({verify_amount:!0,coupon_code:this.couponCode,cpf:D(this.customerCPF),has_subsidy:this.subsidy?.has??!1,delivery_cep:this.getParsedAddresses.shippingaddress.zipPostalCode,has_selected_delivery:!H(this.deliveryHour)&&!H(this.deliveryDate)})});if(!t.ok){const i=await t.json();return z.call(t,i?.message??e)}const i=await t.json();return U.call(t,i)}catch(t){return z(e)}},async handleSearchCoupon(){if(this.isCouponPending)return;this.isCouponPending=!0;const e=await this.captureCoupon();this.isCouponPending=!1,e.succeeded?this.coupon=e.data:this.coupon={error:!0,message:e.message}},handleRemoveCoupon(){this.coupon=v,this.couponCode=l},loadPagSeguro(){const e=document.createElement("script");e.async=!0,e.src="https://assets.pagseguro.com.br/checkout-sdk-js/rc/dist/browser/pagseguro.min.js",e.onload=()=>{this.isPagSeguroLoaded=!0},document.head.appendChild(e)},clearCreditCardData(){this.customerCreditCardHolder=l,this.customerCreditCardNumber=l,this.customerCreditCardDate=l,this.customerCreditCardCVV=l},async handleDeliveryOptions(){const e=await this.captureDeliveryOptions();e.succeeded&&(this.deliveryOptions=e.data)},async captureDeliveryOptions(){const e="Falha ao capturar as opções de entrega";try{const t=await fetch(`${pe}/delivery`,{...X()});if(!t.ok){const i=await t.json();return z.call(t,i?.message??e)}const i=await t.json();return U.call(t,i)}catch(t){return z(e)}},setDeliveryDate(e){if(this.deliveryDate===e||!this.deliveryOptions)return;const t=this.deliveryOptions.dates.find(({shift_days:t})=>t===e);t&&(this.deliveryDate=t.shift_days,this.deliveryHour=v,this.deliveryPrice=v)},setDeliveryHour(e){this.deliveryHour!==e&&0!==this.getSelectedDateDetails?.periods.periods_count&&(this.deliveryHour=e)},async handleDeliveryQuotation(e){this.isDeliveryLoading=!0;const t=await this.captureDeliveryQuotation(e);if(!t.succeeded)return;const{total:i,validator:s}=t.data;this.deliveryPrice={value:i,validator:s},this.isDeliveryLoading=!1},async captureDeliveryQuotation(e){const t="Falha ao gerar uma cotação";try{const i=await fetch(`${a}/api:i6etHc7G/site/checkout-delivery`,{...X([],j),signal:e.signal,body:S(this.quotationPayload)});if(!i.ok){const e=await i.json();return z.call(i,e?.message??t)}const s=await i.json();return U.call(i,s)}catch(i){return z(t)}},async handleSubsidy(){const e=this.getParsedAddresses.shippingaddress.zipPostalCode;if(!R(M,e))return;const t=await this.verifyForSubsidy(E(e));this.subsidy=t.succeeded?t.data:v},async verifyForSubsidy(e){const t="Houve uma falha na verificação";try{const i=await fetch(`${pe}/delivery/${e}/subsidy`,{...X()});if(!i.ok){const e=await i.json();return z.call(i,e?.message??t)}const s=await i.json();return U.call(i,s)}catch(i){return z(t)}},async createAbandonmentCart(e){const t="Houve uma ao gerar o carrinho";try{const i=await fetch(`${a}/api:EuHZTAGr/abandonment/post`,{...X([],j),keepalive:!0,priority:"high",body:S(e)});if(!i.ok){const e=await i.json();return z.call(i,e?.message??t)}const s=await i.json();return U.call(i,s)}catch(i){return z(t)}}},computed:{hasSelectedPaymentMethod(){return!H(this.selectedPayment)},isCreditCard(){return this.selectedPayment===fe},getOrderSubtotal(){return this.productlist?.order_price??0},getOrderSubtotalFormatted(){return ee.format(this.getOrderSubtotal)},getOrderPrice(){const e=[this.getOrderSubtotal,this.getShippingPrice,this.priorityFee,this.getCouponDiscountPrice];return u(this.hasSubsidy,e,this.subsidyDiscountPrice),u(this.hasPIXDiscount,e,this.PIXDiscountPrice),q(e.reduce((e,t)=>e+t,0),2)},getOrderPriceFormatted(){return ee.format(this.getOrderPrice)},getShippingPrice(){return this.hasFreeShippingByCartPrice||H(this.deliveryPrice)?0:this.deliveryPrice.value/100},getShippingPriceFormatted(){return this.hasFreeShippingByCartPrice?"Frete grátis":ee.format(this.getShippingPrice)},getCouponDiscountPrice(){if(this.hasNullCoupon||this.hasInvalidCoupon)return 0;const{value:e,is_percentage:t}=this.coupon,i=this.getParsedPriceForApplyDiscount;let s=t?Math.min(e/100,1)*(-1*i):-1*Math.min(i,e);return Math.round(100*Math.abs(s))/100*Math.sign(s)},getCouponDiscountPriceFormatted(){return ee.format(this.getCouponDiscountPrice)},getParsedPriceForApplyDiscount(){if(this.hasNullCoupon||this.hasInvalidCoupon)return 0;const{cupom_type:e}=this.coupon,{getShippingPrice:t}=this;return e===le&&this.hasSubsidy?Math.max(t+this.subsidyDiscountPrice,0):{product_id:0,shipping:t,subtotal:this.getOrderSubtotal}[e]},getParsedProducts(){const e=this.productlist?.items;return e?e.map(({name:e,imageUrl:t,quantity:i,price:s})=>({name:e,image:t,quantity:i,price:ee.format(s),finalPrice:ee.format(s*i),imageStyle:`background-image: url('${t}')`})):[]},isPersonalDataValid(){return!this.isSubmitted||[this.customerMailValidation.valid,this.customerBirthdateValidation.valid,this.customerCPFValidation.valid,this.customerPhoneValidation.valid].every(Boolean)},customerMailValidation(){return Se(this.customerMailElement,!this.hasVisitRegistry("customerMail")||R(w,this.customerMail))},customerBirthdateValidation(){const{customerBirthdate:e}=this;return Se(this.customerBirthdateElement,!this.hasVisitRegistry("customerBirthdate")||R($,e)&&function(e){const[t,i,s]=k(e,h),r=new Date(`${s}-${i}-${t}T00:00:00`);if(g(r.toString(),"Invalid Date"))return!1;const a=g(r.getUTCDate(),Number(t)),n=g(r.getUTCMonth()+1,Number(i)),o=g(r.getUTCFullYear(),Number(s));return a&&n&&o}(e))},customerCPFValidation(){const{customerCPF:e}=this;return Se(this.customerCPFElement,!this.hasVisitRegistry("customerCPF")||R(F,this.customerCPF)&&function(e){if(11!==A(e=E(e))||R(/^(\d)\1{10}$/,e))return!1;const t=Q.map((t,i)=>{const s=i?10:9,r=11-[...e.slice(0,s)].map(Number).reduce((e,i,s)=>e+i*(t-s),0)%11;return r>9?0:r});return e.endsWith(t.join(l))}(e))},customerPhoneValidation(){return Se(this.customerPhoneElement,!this.hasVisitRegistry("customerPhone")||R(N,this.customerPhone))},paymentMethodValidation(){return Se(this.paymentMethodMessageElement,!H(this.selectedPayment))},customerCreditCardHolderValidation(){return Se(this.customerCreditCardHolderElement,!this.hasVisitRegistry("customerCreditCardHolder")||R(_,O(I(D(this.customerCreditCardHolder)))),!this.isCreditCard)},customerCreditCardNumberValidation(){return Se(this.customerCreditCardNumberElement,!this.hasVisitRegistry("customerCreditCardNumber")||R(/^(\d{4})(\s\d{4}){2}(\s\d{3,4})$/,D(this.customerCreditCardNumber)),!this.isCreditCard)},customerCreditCardDateValidation(){const{customerCreditCardDate:e}=this;return Se(this.customerCreditCardDateElement,!this.hasVisitRegistry("customerCreditCardDate")||R(/^(1[012]|0[1-9])\/\d{2}$/,e)&&function(e){const t=k(e,h);if(2!==A(t))return!1;const[i,s]=t,r=parseInt(i,10),a=parseInt(s,10);if(isNaN(r)||isNaN(a)||r<1||r>12)return!1;const n=new Date;return new Date(2e3+(a<100?a:0),r,0,23,59,59)>n}(e),!this.isCreditCard)},customerCreditCardCVVValidation(){return Se(this.customerCreditCardCVVElement,!this.hasVisitRegistry("customerCreditCardCVV")||R(/^\d{3,4}$/,this.customerCreditCardCVV),!this.isCreditCard)},isCreditCardGroupValid(){return[this.customerCreditCardHolderValidation.valid,this.customerCreditCardNumberValidation.valid,this.customerCreditCardDateValidation.valid,this.customerCreditCardCVVValidation.valid].every(Boolean)},billingCEPValidation(){return Se(this.billingCEPElement,!this.hasVisitRegistry("billingCEP")||R(M,this.billingCEP),!this.isCreditCard)},billingAddressValidation(){return Se(this.billingAddressElement,!this.hasVisitRegistry("billingAddress")||A(D(this.billingAddress))>2,!this.isCreditCard)},billingNumberValidation(){return Se(this.billingNumberElement,!this.hasVisitRegistry("billingNumber")||A(this.billingNumber)>0,!this.isCreditCard)},billingNeighborhoodValidation(){return Se(this.billingNeighborhoodElement,!this.hasVisitRegistry("billingNeighborhood")||A(this.billingNeighborhood)>0,!this.isCreditCard)},billingCityValidation(){return Se(this.billingCityElement,!this.hasVisitRegistry("billingCity")||A(this.billingCity)>2,!this.isCreditCard)},billingStateValidation(){return Se(this.billingStateElement,!this.hasVisitRegistry("billingState")||p(d,this.billingState),!this.isCreditCard)},isBillingAddressGroupValid(){return H(this.deliveryBillingAddressErrorMessage)&&[this.billingCEPValidation,this.billingAddressValidation,this.billingNumberValidation,this.billingNeighborhoodValidation,this.billingCityValidation,this.billingStateValidation].every(e=>e.valid)},deliveryPlaceValidation(){return Se(this.deliveryPlaceMessageElement,this.hasSelectedAddress&&H(this.deliveryPlaceAddressErrorMessage),!this.isCreditCard)},shippingRecipientValidation(){return Se(this.shippingRecipientElement,!this.hasVisitRegistry("shippingRecipient")||R(/^(\w{2,})(\s+(\w+))+$/,O(I(D(this.shippingRecipient)))),!this.shouldValidateShippingAddress)},shippingCEPValidation(){return Se(this.shippingCEPElement,!this.hasVisitRegistry("shippingCEP")||R(M,this.shippingCEP),!this.shouldValidateShippingAddress)},shippingAddressValidation(){return Se(this.shippingAddressElement,!this.hasVisitRegistry("shippingAddress")||A(D(this.shippingAddress))>2,!this.shouldValidateShippingAddress)},shippingNumberValidation(){return Se(this.shippingNumberElement,!this.hasVisitRegistry("shippingNumber")||A(D(this.shippingNumber))>0,!this.shouldValidateShippingAddress)},shippingNeighborhoodValidation(){return Se(this.shippingNeighborhoodElement,!this.hasVisitRegistry("shippingNeighborhood")||A(D(this.shippingNeighborhood))>3,!this.shouldValidateShippingAddress)},shippingCityValidation(){return Se(this.shippingCityElement,!this.hasVisitRegistry("shippingCity")||A(D(this.shippingCity))>2,!this.shouldValidateShippingAddress)},shippingStateValidation(){return Se(this.shippingStateElement,!this.hasVisitRegistry("shippingState")||p(d,this.shippingState),!this.shouldValidateShippingAddress)},isShippingAddressGroupValid(){return H(this.deliveryShippingAddressErrorMessage)&&[this.shippingCEPValidation,this.shippingAddressValidation,this.shippingNumberValidation,this.shippingNeighborhoodValidation,this.shippingCityValidation,this.shippingStateValidation].every(e=>e.valid)},deliveryDatesGroupValidation(){return Se(this.deliveryDateMessageElement,!H(this.deliveryDate),!this.paymentMethodValidation.valid)},deliveryHoursGroupValidation(){return Se(this.deliveryHourMessageElement,!H(this.deliveryHour),!this.deliveryDatesGroupValidation.valid)},installmentGroupValidation(){return Se(this.installmentsMessageElement,!H(this.selectedInstallment),!this.isCreditCard||!this.paymentMethodValidation.valid)},notIgnoredFields(){return[this.customerMailValidation,this.customerBirthdateValidation,this.customerCPFValidation,this.customerPhoneValidation,this.paymentMethodValidation,this.customerCreditCardHolderValidation,this.customerCreditCardNumberValidation,this.customerCreditCardDateValidation,this.customerCreditCardCVVValidation,this.billingCEPValidation,this.billingAddressValidation,this.billingNumberValidation,this.billingNeighborhoodValidation,this.billingCityValidation,this.billingStateValidation,this.deliveryPlaceValidation,this.shippingRecipientValidation,this.shippingCEPValidation,this.shippingAddressValidation,this.shippingNumberValidation,this.shippingNeighborhoodValidation,this.shippingCityValidation,this.shippingStateValidation,this.deliveryDatesGroupValidation,this.deliveryHoursGroupValidation,this.installmentGroupValidation].filter(({ignoreIf:e})=>p([!1,void 0],e))},firstInvalidField(){return this.notIgnoredFields.find(({valid:e})=>!e)??v},hasSelectedAddress(){return!H(this.deliveryPlace)},isSameAddress(){return this.deliveryPlace===ve},isDiffAddress(){return this.deliveryPlace===be},shouldValidateShippingAddress(){return!this.isCreditCard||this.showShippingAddressSelector&&!this.isSameAddress},showShippingAddressSelector(){return!this.isCreditCard||this.isCreditCard&&this.hasSelectedAddress},getParsedAddresses(){const e={zipPostalCode:this.shippingCEP,street:this.shippingAddress,number:this.shippingNumber,complement:ne(this.shippingComplement),neighbourhood:this.shippingNeighborhood,city:this.shippingCity,state:ae(this.shippingState)},t={zipPostalCode:this.billingCEP,street:this.billingAddress,number:this.billingNumber,complement:ne(this.billingComplement),neighbourhood:this.billingNeighborhood,city:this.billingCity,state:ae(this.billingState)};return this.isCreditCard?{billingaddress:t,shippingaddress:this.isSameAddress?t:e}:{shippingaddress:e,billingaddress:e}},getParsedCustomer(){return{name:this.isCreditCard?this.customerCreditCardHolder:this.shippingRecipient,cpf:this.customerCPF,email:this.customerMail,birthDate:this.customerBirthdate,phone:this.customerPhone}},getParsedDeliveryData(){const{getSelectedHourDetails:e,getSelectedDateDetails:t}=this;return{delivery_hour:{value:this.deliveryHour,validator:e?.validator,has_priority:e?.has_priority},delivery_date:{value:this.deliveryDate,validator:t?.validator,has_priority:t?.has_priority}}},getOrderBaseData(){return{user_id:v,coupon_code:this.hasInvalidCoupon||this.hasNullCoupon?v:this.coupon?.code,delivery:{...this.getParsedDeliveryData,delivery_price:this.deliveryPrice}}},showInstallmentSection(){return this.isCreditCard&&(A(this.installment??[])>0||!H(this.installmentMessage))},getParsedInstallments(){const{installment:e}=this;return e?e.map(({installments:e,installment_value:t})=>({installments:e,installment_value:ee.format(t)})):[]},hasNullCoupon(){return H(this.coupon)},hasAppliedCoupon(){return Ve(this.coupon??{},"cupom_type")},hasInvalidCoupon(){return Ve(this.coupon??{},"error")},isCouponCodeValid(){const{couponCode:e}=this;return A(D(e))>4&&!R(/[^A-Z\d]/,e)},getCreditCardToken(){if(!this.isPagSeguroLoaded)return{errors:[],hasErrors:!1,encryptedCard:v};const[e,t]=k(this.customerCreditCardDate,h);return window.PagSeguro.encryptCard({expMonth:e,expYear:"20".concat(t),holder:this.customerCreditCardHolder,securityCode:this.customerCreditCardCVV,number:E(this.customerCreditCardNumber),publicKey:Ce})},hasDeliveryDates(){const{deliveryOptions:e}=this;return t=e?.dates,Array.isArray(t)&&A(e?.dates)>0;var t},hasDeliveryHour(){return!H(this.deliveryDate)&&A(this.getParsedDeliveryHours)>0},getParsedDeliveryHours(){const{getSelectedDateDetails:e}=this;return!this.hasDeliveryDates||H(e)?[]:e.periods.hours.map(({label:e,hour:t})=>({hour:t,label:e}))},quotationPayload(){if([this.deliveryDate,this.deliveryHour].some(H))return!1;const e=this.getParsedAddresses.shippingaddress.zipPostalCode;if(!R(M,e))return!1;const{delivery_hour:t,delivery_date:i}=this.getParsedDeliveryData;return{cep:e,delivery_hour:t,delivery_date:i}},getParsedDeliveryDates(){const{deliveryOptions:e,deliveryDate:t}=this;return H(e)?[]:e.dates.map(({label:e,shift_days:i})=>({label:e,shift_days:i,selected:t===i}))},getSelectedDateDetails(){const{deliveryDate:e,deliveryOptions:t}=this;return H(e)||H(t)?v:t.dates.find(({shift_days:t})=>t===e)??v},getSelectedHourDetails(){const{deliveryHour:e,getSelectedDateDetails:t}=this;return H(t)||H(this.deliveryHour)?v:t.periods.hours.find(({hour:t})=>t===e)??v},hasPriorityFee(){return!!(this.hasDeliveryHour&&this.getSelectedDateDetails&&this.getSelectedHourDetails)&&this.getSelectedDateDetails.has_priority&&this.getSelectedHourDetails.has_priority},priorityFee(){return this.hasPriorityFee?this.deliveryOptions?.priority_fee:0},priorityFeeFormatted(){return ee.format(this.priorityFee)},hasSubsidy(){const{subsidy:e}=this;return!H(e)&&e.has&&this.getShippingPrice>0&&this.getOrderSubtotal>=250&&!this.hasFreeShippingByCartPrice},subsidyDiscountPrice(){const{subsidy:e}=this;return H(e)?0:e.has?-1*Math.min(e.value,this.getShippingPrice):0},subsidyDiscountPriceFormatted(){return ee.format(this.subsidyDiscountPrice)},hasFreeShippingByCartPrice(){return this.getOrderSubtotal>=400},creditCardAdditionalInfo(){const{installment:e,isSameAddress:t,getCreditCardToken:i,selectedInstallment:s,customerCreditCardHolder:r}=this;return{is_same_address:t,credit_card_info:{holderName:r,creditCardToken:i.encryptedCard??l,numberOfPayments:s,installmentValue:e?.find(({installments:e})=>e===s)?.installment_value??0}}},hasPIXDiscount(){const{deliveryOptions:e,selectedPayment:t}=this;return!H(e)&&!H(t)&&t===Pe&&e.pix_discount>0},PIXDiscountPrice(){const{hasPIXDiscount:e,deliveryOptions:t}=this;return!e||H(t)?0:q(t.pix_discount/100*-this.getOrderSubtotal,2)},PIXDiscountPriceFormatted(){return ee.format(this.PIXDiscountPrice)},userAddresses(){const{user:e}=this;return e&&0!==A(e.address_list)?e.address_list.map(({address:e,number:t,cep:i,...s})=>({...s,address:e,number:t,cep:i,complete:`${e}, ${t} ${i}`})):[]},showDeliveryPrice(){return!H(this.deliveryPrice)||this.hasFreeShippingByCartPrice}},watch:{billingCEP(e,t){this.captureAddress(he,e,t).then(e=>{e&&(this.deliveryPlaceAddressErrorMessage=v,this.deliveryPlace===ve&&(this.deliveryPlace=v))})},shippingCEP(e,t){this.deliveryDate=v,this.deliveryHour=v,this.captureAddress(le,e,t)},getOrderPrice:{immediate:!0,handler:function(){this.refreshInstallments()}},getCreditCardToken(e){e.hasErrors||this.refreshInstallments()},quotationPayload(e,t,i){if(!e)return;const{cep:s}=e;if(!R(M,s))return;const r=new AbortController;if(!t)return this.handleDeliveryQuotation(r),i(r.abort);const{cep:a}=t;return this.handleDeliveryQuotation(r),i(r.abort)},getParsedAddresses(e,t){e&&t&&e.shippingaddress.zipPostalCode!==t.shippingaddress.zipPostalCode&&R(M,e.shippingaddress.zipPostalCode)&&(this.isCreditCard&&H(this.deliveryPlace)||this.handleSubsidy())},user(e){e&&(this.customerPhone=e.telephone??l,this.customerCPF=e.cpf??l,this.customerBirthdate=e.birthday?.split("-").reverse().join(h)??l,this.customerMail=e.email??l)}},directives:{trim:K(D),removeDuplicatedSpaces:K(O),maskDate:K(E,function(e){return e.replace(/^(\d{0,2})(\d{0,2})(\d{0,4})/,(e,t,i,s)=>[t,i,s].filter(Boolean).join(h))}),maskCpf:K(E,function(e){return e.replace(/^(\d{0,3})(\d{0,3})(\d{0,3})(\d{0,2})/,(e,t,i,s,r)=>{const a=[];return u(t,a,`${t}`),u(i,a,`.${i}`),u(s,a,`.${s}`),u(r,a,`-${r}`),a.join(l)})}),maskPhone:K(E,function(e){const t=(e,t,i,s)=>{const r=[];return u(t,r,`(${t}`),u(i,r,`) ${i}`),u(s,r,`-${s}`),r.join(l)};return A(e)<11?e.replace(/^(\d{0,2})(\d{0,4})(\d{0,4})/,t):e.replace(/^(\d{0,2})(\d{0,5})(\d{0,4})/,t)}),maskCreditCard:K(E,function(e){return e.replace(/^(\d{0,4})(\d{0,4})(\d{0,4})(\d{0,4})/,(e,t,i,s,r)=>{const a=[];for(const n of[t,i,s,r])u(n,a,n);return a.join(" ")})}),maskCreditCardDate:K(E,function(e){return e.replace(/^(\d{0,2})(\d{0,2})/,(e,t,i)=>{const s=[];for(const r of[t,i])u(r,s,r);return s.join(h)})}),maskNumberOnly:K(E),maskCep:K(E,function(e){return e.replace(/^(\d{0,5})(\d{0,3})/,(e,t,i)=>{const s=[];for(const r of[t,i])u(r,s,r);return s.join("-")})}),upperCase:K(function(e){return e.toUpperCase()}),normalize:K(I),visitedField:{mounted(e,{value:t,instance:i}){const s=P(e,"blur",()=>{i.setVisitedField(t),W.delete(e)},{once:!0});W.set(e,s)},unmounted:Y},captureAbandonment:{mounted(a,n){W.set(a,P(a,"change",o=>{if(!o.isTrusted||!n.arg)return;const d=n.arg,l={[i]:w,[t]:N,[e]:_,[s]:M,[r]:M},h=D(a.value),c=l?.[d]??null,u=d===i?O(I(h)):h;c&&R(c,u)&&n.instance.createAbandonmentCart({field:d,value:h})}))},unmounted:Y}}}).mount("#fechamentodopedido"),window.addEventListener("pageshow",e=>{e.persisted&&window.location.reload()})}();