!function(){"use strict";function e(e,t,r){return e?t.push(r):-1}function t(e){const t=a((o=document.cookie,o.replace(/\s{2,}/g," ")),"; ").find(t=>{const{name:o}=r(t);return o===e});var o;return!!t&&r(t).value}function r(e){const[t,...r]=a(e,"=");return{name:t,value:s(r)>0&&decodeURIComponent(r.join("="))}}var o="-",n=null;function i(e,t={}){const r=new URL(`${location.protocol}//${location.hostname}`),o=new URL(e,r);for(const[n,i]of Object.entries(t))o.searchParams.set(n,i);return o.toString()}function s(e){return e.length}function a(e,t,r){return e.split(t,r)}function c(e){return e===n}var d="__Host-Talho-Session-Cookie",u="X-Talho-Session",h={redirect_to:encodeURIComponent(location.pathname+location.search)},p={path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+12096e5)};function m(t){const r=t?.headers.get(u);r&&function(t,r,o={}){if(0===s(t))throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof r)||0===s(r.toString()))throw new Error("'setCookie' should receive a valid cookie value");const n=[`${t}=${encodeURIComponent(r)}`];e(o?.expires&&o?.expires instanceof Date,n,"expires="+o.expires?.toUTCString()),e(o.maxAge,n,`maxAge=${o.maxAge}`),e(o?.sameSite&&"string"==typeof o?.sameSite,n,`SameSite=${o?.sameSite}`),e(o?.path,n,`path=${o?.path}`),e(o?.domain,n,`domain=${o?.domain}`),e(o?.httpOnly,n,"HttpOnly"),e(o?.secure,n,"Secure");const i=n.join("; ");document.cookie=i}(d,r,p)}function l(e,t=!1,r){return m(this),t||this&&401===this.status&&function(e="/acessos/entrar",t=h){location.href=i(e,t)}(),r?.(),{message:e,succeeded:!1}}function g(e,t){return m(this),t?.(),{data:e,succeeded:!0}}function f(e=[],r="GET"){const o="application/json",n=new Headers({Accept:o,"Content-Type":o});for(const[t,a]of e)n.set(t,a);const i=t(d);i&&n.set(u,i);const s=t("__Host-Talho-AuthToken");return s&&n.set("Authorization",s),{method:r,headers:n}}var y=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"}),{createApp:_}=window.Vue,b="reason";_({name:"TalhoOrderPage",data:()=>({order:n}),async created(){const e=new URLSearchParams(location.search).get("order");if(!e)return void(location.href=i("/",{[b]:"trasactionid_not_found"}));const t=await this.getOrder(e);var r;t.succeeded?(this.order=t.data,(r=function(e,t=document){return t?t.querySelector(e):n}("[data-wtf-loader]"))&&r.classList.toggle("oculto",!0)):location.href=i("/",{[b]:"order_not_found"})},methods:{async getOrder(e){const t="Falha ao capturar o pedido";try{const r=await fetch(`https://xef5-44zo-gegm.b2.xano.io/api:5lp3Lw8X/order-details/${e}`,{...f()});if(!r.ok){const e=await r.json();return l.call(r,e?.message??t)}const o=await r.json();return g.call(r,o)}catch(r){return l(t)}}},computed:{isPIXPayment(){return"pix"===this.order?.payment_method},hasPIXDiscount(){return(this.order?.pix_discount_percentual??0)>0},getDiscountPIXPrice(){return y.format((this.order?.pix_discount_price??0)/100*-1)},name(){return this.order?.name??o},email(){return this.order?.email??o},cpf(){return this.order?.cpf_cnpj??o},phone(){return this.order?.phone??o},shipping(){const{number:e=o,cep:t=o,address:r=o,state:n=o,city:i=o,complement:s=o,neighborhood:a=o,user_name:c=o}=this.order?.delivery.address??{};return{user_name:c,cep:t,address:r,number:e,complement:s,neighborhood:a,city:i,state:n}},billing(){const{cep:e=o,address:t=o,number:r=o,complement:n=o,neighborhood:i=o,city:s=o,state:a=o}=this.order?.billing_address??{};return{cep:e,address:t,number:r,complement:n,neighborhood:i,city:s,state:a}},hasOrderDiscount(){return!c(this.order?.discount_code)},getOrderSubtotalPriceFormatted(){const{order:e}=this;return y.format(c(e)?0:e.subtotal/100)},getOrderPriceFormatted(){const{order:e}=this;return y.format(c(e)?0:e.total/100)},getOrderShipping(){const e=this.order?.delivery.quotation_price;return"number"==typeof e?e/100:0},getOrderShippingPriceFormatted(){return y.format(this.getOrderShipping)},getOrderDiscountPriceFormatted(){return y.format((this.order?.discount??0)/100*-1)},getParsedProducts(){const{order_items:e=[]}=this.order??{};return e.map(({name:e,product_id:t,unit_price:r,quantity:o,image:n})=>({imageStyle:`background-image: url('${n}');`,quantity:o,title:e,key:t,unit_amount:y.format(r/100),final_price:y.format(r*o/100)}))},hasPriority(){return this.order?.delivery.has_priority??!1},getPriorityFee(){return this.hasPriority?this.order?.delivery.priority_price/100:0},getPriorityFeePriceFormatted(){return y.format(this.getPriorityFee)},hasSubsidy(){return this.order?.delivery.has_subsidy??!1},getDeliverySubsidy(){return this.hasSubsidy?-1*Math.min(this.getOrderShipping,this.order?.delivery.subsidy_price/100):0},getDeliverySubsidyPriceFormatted(){return y.format(this.getDeliverySubsidy)},hasFreeShippingByCartPrice(){return this.order?.delivery.has_freeship_by_cart_price??!1}}}).mount("#orderapp"),window.addEventListener("pageshow",e=>{e.persisted&&window.location.reload()})}();