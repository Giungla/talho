"use strict";(()=>{var V="; ";function b(r){let o=document.cookie.split(V).find(s=>{let{name:u}=U(s);return u===r});return o?U(o).value:!1}function U(r){let[o,s]=r.split("=");return{name:o,value:s}}function $(r,o,s={}){if(r.length===0)throw new Error("'setCookie' should receive a valid cookie name");if(!["string","number","boolean"].includes(typeof o)||o.toString().length===0)throw new Error("'setCookie' should receive a valid cookie value");let u=[`${r}=${o}`];s?.expires&&s?.expires instanceof Date&&u.push("expires="+s.expires.toUTCString()),s.maxAge&&u.push(`maxAge=${s.maxAge}`),s?.sameSite&&typeof s?.sameSite=="string"&&u.push(`SameSite=${s?.sameSite}`),s?.path&&u.push(`path=${s?.path}`),s?.domain&&u.push(`domain=${s?.path}`),s?.httpOnly&&u.push("HttpOnly"),s?.secure&&u.push("Secure");let d=u.join(V);return document.cookie=d,d}var Ie=401,D="__Host-Talho-AuthToken",q="__Host-Talho-Session-Cookie",G="X-Talho-Session";function we(r){!r||r.status!==Ie||(location.href=j("/acessos/entrar",{redirect_to:encodeURIComponent(location.pathname)}))}function fe(r){let o=r?.headers.get(G);o&&$(q,o,{path:"/",secure:!0,sameSite:"Strict",expires:new Date(Date.now()+K(90))})}function p(r){return fe(this),we(this),{message:r,succeeded:!1}}function I(r){return fe(this),{data:r,succeeded:!0}}function w(r=[],o="GET"){let s=new Headers({Accept:"application/json","Content-Type":"application/json"});for(let[O,_]of r)s.set(O,_);let u=b(q);u&&s.set(G,u);let d=b(D);return d&&s.set("Authorization",d),{method:o,headers:s}}function K(r){return 86400*1e3*r}var Ne=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});var pe=null,T="oculto";function z(r){return Array.isArray(r)}function B(){return!!b(D)}function i(r,o=document){return o?o.querySelector(r):pe}function v(r,o,s,u){if(r)return r.addEventListener(o,s,u),()=>r.removeEventListener(o,s,u)}function F(r,o){r&&r.removeAttribute(o)}function Y(r,...o){r&&r.classList.add(...o)}function W(r,...o){r&&r.classList.remove(...o)}function R(r,o,s){return r?r.classList.toggle(o,s):!1}function N(r){return R(i("[data-wtf-loader]"),T,!r)}function X(r,o){r&&(r.textContent=typeof o=="string"?o:o.toString())}function j(r,o={}){let s=new URL(`${location.protocol}//${location.hostname}`),u=new URL(r,s);for(let[d,O]of Object.entries(o))u.searchParams.set(d,O);return u.toString()}function Z(r){return JSON.stringify(r)}function f(r){return r.length}var J={AC:"Acre",AL:"Alagoas",AP:"Amap\xE1",AM:"Amazonas",BA:"Bahia",CE:"Cear\xE1",DF:"Distrito Federal",ES:"Esp\xEDrito Santo",GO:"Goi\xE1s",MA:"Maranh\xE3o",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Par\xE1",PB:"Para\xEDba",PR:"Paran\xE1",PE:"Pernambuco",PI:"Piau\xED",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rond\xF4nia",RR:"Roraima",SC:"Santa Catarina",SP:"S\xE3o Paulo",SE:"Sergipe",TO:"Tocantins"},Q=Object.keys(J),Oe=Object.values(J);var k="https://xef5-44zo-gegm.b2.xano.io";(function(){let r="[data-wtf-wrapper]",o="mensagemdeerro",s="#wf-form-Address-Form";if(!B()){location.href=`/acessos/entrar?redirect_to=${encodeURIComponent(location.pathname)}`;return}let u=i("[data-wtf-error-message-no-address-registered]"),d=i("[data-wtf-registered-address]"),O=d?.parentElement;d?.remove();let _=new Proxy([],{set(e,t,n){let a=Reflect.set(e,t,n),c=t==="length"&&n===0;if(ee(c),c||typeof n=="number")return a;let A=i(`[data-wtf-address-id="${n.id}"]`)!==null;return ee(f(e)>0),A||me(n),a}});function ee(e){R(u,T,!e)}function me(e){if(!d)return;let t=d.cloneNode(!0),n=i("[data-wtf-address-tag]",t),a=i("[data-wtf-address]",t),c=i("[data-wtf-delete-user-address]",t);if(n&&(n.textContent=e.nick),a&&(a.textContent=e.address),c){let A=null;A=v(c,"click",async function(){if(!(await ge(e.id)).succeeded)return;A?.();let Ce=_.findIndex(be=>be.id===e.id);_.splice(Ce,1),t.remove()},!1)}t.dataset.wtfAddressId=e.id,O.appendChild(t)}async function Ae(e){let t="O CEP informado n\xE3o foi encontrado";try{let n=await fetch(`${k}/api:jyidAW68/cepaddress/${e}`,{...w()});if(!n.ok){let c=await n.json();return p.call(n,c?.message??t)}let a=await n.json();return I.call(n,a)}catch{return p(t)}}async function Ee(){let e="Houve uma falha ao buscar os seus endere\xE7os. Tente novamente mais tarde.";try{let t=await fetch(`${k}/api:Yytq8Zut/user_addresses/all`,{...w()});if(!t.ok){let a=await t.json();return p.call(t,a?.message??e)}let n=await t.json();return I.call(t,n)}catch{return p(e)}}async function ge(e){let t="Houve uma falha ao remover o endere\xE7o. Tente novamente mais tarde.";try{let n=await fetch(`${k}/api:Yytq8Zut/user_addresses/${e}/delete`,{...w([],"DELETE")});if(!n.ok){let a=await n.json();return p.call(n,a?.message??t)}return I.call(n,null)}catch{return p(t)}}async function Se(e){let t="Houve uma falha ao salvar o endere\xE7o. Por favor, tente novamente mais tarde.";try{let n=await fetch(`${k}/api:Yytq8Zut/user_addresses/create`,{...w([],"POST"),body:Z(e)});if(!n.ok){let c=await n.json();return p.call(n,c?.message??t)}let a=await n.json();return I.call(n,a)}catch{return p(t)}}function E(e){return function(t){return[e,t]}}function ye(e,t){let n=!t.succeeded,a=i("[data-wtf-error-new]",e),c=i("[data-wtf-success-new]",e);if(R(a,T,!n),R(c,T,n),!n){setTimeout(()=>Y(c,T),8e3);return}let A=a&&i("div",a);X(A,t.message)}function he(e){return e.closest(r)}function m(e,t){let n=he(e);R(n,o,!t)}function Te(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ve(e){if(e.succeeded){let{cep:t,logradouro:n,localidade:a,complemento:c,bairro:A,uf:le}=e.data;x(l,t),x(g,n),x(S,A),x(y,a),x(h,le);return}for(let t of[g,ne,S,y,h])x(t)}function te(e){if(z(e)){_.push(...e);return}_.push(e)}function x(e,t=""){e&&(e.value=t)}let C=i(s);if(!C)return;let Re=["name","method","data-name","aria-label","data-wf-page-id","data-wf-element-id","data-turnstile-sitekey"];for(let e of Re)F(C,e);let re=i('input[type="submit"]',C);re&&F(re,"disabled");let H=C.parentElement;if(!H)return;W(H,"w-form"),C.remove(),H.insertAdjacentHTML("afterbegin",C.outerHTML);let L=i(s);if(!L)return;let M=i("[data-wtf-tag-new]"),l=i("[data-wtf-zipcode-new]"),g=i("[data-wtf-address-new]"),P=i("[data-wtf-number-new]"),ne=i("[data-wtf-complement-new]"),S=i("[data-wtf-neighborhood-new]"),y=i("[data-wtf-city-new]"),h=i("[data-wtf-state-new]");function _e(){if(!l)return;let e=l.value.replace(/\D+/g,""),t=f(e);l.value=t>5?e.replace(/(\d{5})(\d{1,3})/,"$1-$2"):e,!(f(l.value)<9)&&Ae(e).then(ve)}function oe(){let e=E("wtfTagNew");if(!M)return e(!1);let t=f(M.value)>2;return m(M,t),e(t)}function se(){let e=E("wtfZipcodeNew");if(!l)return e(!1);let t=/^\d{5}-\d{3}$/.test(l.value);return m(l,t),e(t)}function ae(){let e=E("wtfAddressNew");if(!g)return e(!1);let t=f(g.value)>2;return m(g,t),e(t)}function ie(){let e=E("wtfNumberNew");if(!P)return e(!1);let t=f(P.value)>0;return m(P,t),e(t)}function ue(){let e=E("wtfNeighborhoodNew");if(!S)return e(!1);let t=f(S.value)>2;return m(S,t),e(t)}function ce(){let e=E("wtfCityNew");if(!y)return e(!1);let t=f(y.value)>2;return m(y,t),e(t)}function de(){let e=E("wtfStateNew");if(!h)return e(!1);let t=Q.includes(h.value);return m(h,t),e(t)}let xe=[{field:M,validator:oe},{field:l,validator:se},{field:g,validator:ae},{field:P,validator:ie},{field:S,validator:ue},{field:y,validator:ce},{field:h,validator:de}];for(let{field:e,validator:t}of xe)e&&(v(e,"blur",t,!1),v(e,"input",function(){m(e,!0)},!1));l&&v(l,"input",_e,!1),v(L,"submit",async function(e){e.preventDefault(),e.stopPropagation();let n=[oe,se,ae,ie,ue,ce,de].find(c=>!c().at(1));if(n){let c=`[data-${Te(n().at(0))}]`;i(c,L)?.focus({preventScroll:!1});return}N(!0);let a=await Se({nick:M?.value,cep:l?.value,address:g?.value,number:P?.value,complement:ne?.value,neighborhood:S?.value,city:y?.value,state:h?.value});if(ye(L,a),!a.succeeded)return N(!1);L.reset(),te(a.data),N(!1)},!1),Ee().then(e=>{e.succeeded&&f(e.data)>0&&te(e.data)}).finally(()=>N(!1))})();})();
