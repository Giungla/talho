"use strict";(()=>{(function(){"use strict";let k="__Host-Talho-AuthToken",l="disabled",w="oculto",I="mensagemdeerro",_="[data-wtf-wrapper]",x={preventScroll:!1},q={block:"center",behavior:"smooth"};function f(e,t,n,r){if(e)return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function a(e,t=document){return t?t.querySelector(e):null}function A(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function D(e,t){e&&e.focus(t)}function K(e,t){e&&e.scrollIntoView(t)}function V(e){let t=document.cookie.split("; ").find(n=>{let{name:r}=b(n);return r===e});return t?b(t).value:!1}function b(e){let[t,n]=e.split("=");return{name:t,value:n}}function $(){return!!V(k)}function se(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function F(e,t){let n=!t.succeeded,r=a("[data-wtf-success-message]",e);if(h(R,w,!n),h(r,w,n),!n){setTimeout(()=>P(r,w),8e3);return}G(t.message,R)}function z(e,t,n){e&&e.setAttribute(t,n)}function T(e,t){e&&e.removeAttribute(t)}function d(e){return function(t){return[e,t]}}function h(e,t,n){return e?e.classList.toggle(t,n):!1}function i(e,t){if(!e)return;let n=e.closest("[data-wtf-wrapper]");n&&h(n,I,!t)}function L(e){return{message:e,succeeded:!1}}function U(e){return{data:e,succeeded:!0}}async function j(e){let t="Houve uma falha ao realizar o cadastro. Por favor, tente novamente mais tarde.";try{let n=await fetch("https://xef5-44zo-gegm.b2.xano.io/api:t3reRXiD/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){let c=await n.json();return L(c?.message??t)}let r=await n.json();return U(r)}catch{return L(t)}}if($()){location.href="/area-do-usuario/pedidos-de-compra";return}let p=a("#wf-form-register");if(p){let e=["name","method","data-name","aria-label","data-wf-page-id","data-wf-element-id","data-turnstile-sitekey","data-wf-user-form-type"];for(let n of e)T(p,n);let t=p.parentElement;O(t,"w-form"),p.remove(),t.insertAdjacentHTML("afterbegin",p.outerHTML)}let s=a("#wf-form-register"),R=a("[data-wtf-general-error-message]",s),m=a("[data-wtf-name]",s),g=a("[data-wtf-last-name]",s),v=a("[data-wtf-email]",s),u=a("[data-wtf-password]",s),E=a("[data-wtf-consent]",s),Z=a("[data-wtf-optin]",s),y=a('input[type="submit"]',s);function G(e,t){if(!t)return;let n=a("div",t);n&&(n.textContent=e)}function W({hasNumber:e,hasLowercase:t,hasUppercase:n,hasMinLength:r,hasSpecialChar:c}){let o=(M,S)=>`Sua senha deve conter pelo menos ${M} ${S}.`;return r?e?c?t?n?!1:o(1,"letra mai\xFAscula"):o(1,"letra min\xFAscula"):o(1,"caractere especial"):o(1,"n\xFAmero"):o(8,"caracteres")}function B(e,t){if(!e)return;let n=e.closest(_);if(!n)return;let r=a("[data-wtf-field-error] div",n);r&&(r.textContent=t)}function J(e){return t=>t.test(e)}function X(e){let t=J(e);return{hasNumber:t(/\d/),hasLowercase:t(/[a-z]/),hasUppercase:t(/[A-Z]/),hasMinLength:t(/.{8,}/),hasSpecialChar:t(/[!@#$%^&*()_+{}\[\]:;<>,.?\/~\\-]/)}}function C(e){return e.length}function N(e){return/^[a-zA-Z\s]+$/.test(e)}function Q(){let e=d("wtfUser");if(!m)return e(!1);let t=A(m.value).trim().replace(/\s{2,}/g," "),n=C(t)>1&&N(t);return i(m,n),e(n)}function Y(){let e=d("wtfLastName");if(!g)return e(!1);let t=A(g.value).trim().replace(/\s{2,}/g," "),n=C(t)>0&&N(t);return i(g,n),e(n)}function ee(){let e=d("wtfEmail");if(!v)return e(!1);let t=/^(([\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+(\.[\p{L}\p{N}!#$%&'*+\/=?^_`{|}~-]+)*)|("[\p{L}\p{N}\s!#$%&'*+\/=?^_`{|}~.-]+"))@(([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*\.)+[a-zA-Z]{2,63}|(\[(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\]))$/u.test(v.value);return i(v,t),e(t)}function te(){let e=d("wtfPassword");if(!u)return e(!1);let{hasNumber:t,hasLowercase:n,hasUppercase:r,hasMinLength:c,hasSpecialChar:o}=X(u.value),M=W({hasNumber:t,hasLowercase:n,hasUppercase:r,hasMinLength:c,hasSpecialChar:o}),S=t&&n&&r&&o&&c;return B(u,M||""),i(u,S),e(S)}function ne(){let e=d("wtfConsent");if(!E)return e(!1);let t=E.checked;return i(E,t),e(t)}function P(e,...t){e&&e.classList.add(...t)}function O(e,...t){e&&e.classList.remove(...t)}let H=[{field:m,validator:Q},{field:g,validator:Y},{field:v,validator:ee},{field:u,validator:te}];for(let{field:e,validator:t}of H)f(e,"blur",t),f(e,"input",()=>i(e,!0));f(E,"input",ne,!1),f(s,"reset",()=>{let e="w--redirected-checked";document.querySelectorAll(`#${s?.id} .${e}`).forEach(t=>{O(t,e)})}),f(s,"submit",async e=>{e.preventDefault(),e.stopPropagation(),z(y,l,l);let t=H.find(({validator:r})=>r().at(1)===!1);if(t)return F(s,L("Houve uma falha ao validar os seus dados. Por favor, tente novamente.")),D(t.field,x),T(y,l);let n=await j({name:m?.value,lastName:g?.value,email:v?.value,password:u?.value,optin:Z?.checked,consent:E?.checked});F(s,n),T(y,l),n.succeeded&&(s?.reset(),K(R,q))}),P(s?.parentElement,"w-form"),T(y,l)})();})();
