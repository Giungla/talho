"use strict";(()=>{(function(){let{ref:b,createApp:h}=window.Vue,T="",i=null,r="-",m="oculto",g="https://xef5-44zo-gegm.b2.xano.io/api:5lp3Lw8X",s=new Intl.NumberFormat("pt-BR",{currency:"BRL",style:"currency"});function p(e,t,o){return e?e.classList.toggle(t,o):!1}function f(e){return p(u("[data-wtf-loader]"),m,!e)}function u(e,t=document){return t?t.querySelector(e):i}function l(e){return{message:e,succeeded:!1}}function y(e){return{data:e,succeeded:!0}}h({name:"TalhoOrderPage",setup(){},data(){return{order:i}},async created(){let t=new URLSearchParams(location.search).get("order");if(!t){location.href="/";return}let o=await this.getOrder(t);if(!o.succeeded){location.href="/";return}this.order=o.data,f(!1)},mounted(){},methods:{async getOrder(e){let t="Falha ao capturar o pedido";try{let o=await fetch(`${g}/order-details/${e}`,{headers:{Accept:"application/json"}});if(!o.ok){let a=await o.json();return l(a?.message??t)}let n=await o.json();return y(n)}catch{return l(t)}}},computed:{name(){return this.order?.name??r},email(){return this.order?.email??r},cpf(){return this.order?.cpf_cnpj??r},phone(){return this.order?.phone??r},shipping(){let{number:e=r,cep:t=r,address:o=r,state:n=r,city:a=r,complement:d=r,neighborhood:c=r,user_name:P=r}=this.order?.delivery.address??{};return{user_name:P,cep:t,address:o,number:e,complement:d,neighborhood:c,city:a,state:n}},billing(){let{cep:e=r,address:t=r,number:o=r,complement:n=r,neighborhood:a=r,city:d=r,state:c=r}=this.order?.billing_address??{};return{cep:e,address:t,number:o,complement:n,neighborhood:a,city:d,state:c}},hasOrderDiscount(){return this.order?.discount_code!==i},getOrderSubtotalPriceFormatted(){let e=this.order?.order_items.reduce((t,{unit_price:o,quantity:n})=>t+o*n,0);return s.format(e?e/100:0)},getOrderPriceFormatted(){let e=this.order?.total;return s.format(typeof e=="number"?e/100:0)},getOrderShipping(){let e=this.order?.delivery.quotation_price;return typeof e=="number"?e/100:0},getOrderShippingPriceFormatted(){return s.format(this.getOrderShipping)},getOrderDiscountPriceFormatted(){return s.format((this.order?.discount??0)*-1)},getParsedProducts(){let{order_items:e=[]}=this.order??{};return e.map(({name:t,product_id:o,unit_price:n,quantity:a})=>({quantity:a,title:t,key:o,unit_amount:s.format(n/100),final_price:s.format(n*a/100)}))},hasPriority(){return this.order?.delivery.has_priority??!1},getPriorityFee(){return this.hasPriority?this.order?.delivery.priority_price/100:0},getPriorityFeePriceFormatted(){return s.format(this.getPriorityFee)},hasSubsidy(){return this.order?.delivery.has_subsidy??!1},getDeliverySubsidy(){return this.hasSubsidy?-1*Math.min(this.getOrderShipping,this.order?.delivery.subsidy_price/100):0},getDeliverySubsidyPriceFormatted(){return s.format(this.getDeliverySubsidy)}}}).mount(u("#orderapp"))})();})();
